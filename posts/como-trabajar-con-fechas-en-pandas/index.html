<!DOCTYPE html><html lang="es-ES" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="¿Cómo trabajar con fechas en Pandas?" /><meta property="og:locale" content="es_ES" /><meta name="description" content="Aprende a usar las funcionalidades de pandas." /><meta property="og:description" content="Aprende a usar las funcionalidades de pandas." /><link rel="canonical" href="http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-pandas/" /><meta property="og:url" content="http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-pandas/" /><meta property="og:site_name" content="Camilo Martínez Burgos" /><meta property="og:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-21-como-trabajar-con-fechas-en-pandas/hero.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-12-21T16:50:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-21-como-trabajar-con-fechas-en-pandas/hero.png" /><meta property="twitter:title" content="¿Cómo trabajar con fechas en Pandas?" /><meta name="twitter:site" content="@camartinezbu" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-21T16:50:00-05:00","datePublished":"2022-12-21T16:50:00-05:00","description":"Aprende a usar las funcionalidades de pandas.","headline":"¿Cómo trabajar con fechas en Pandas?","image":"https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-21-como-trabajar-con-fechas-en-pandas/hero.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-pandas/"},"url":"http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-pandas/"}</script><title>¿Cómo trabajar con fechas en Pandas? | Camilo Martínez Burgos</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Camilo Martínez Burgos"><meta name="application-name" content="Camilo Martínez Burgos"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/common/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Camilo Martínez Burgos</a></div><div class="site-subtitle font-italic">Ciencia de datos y programación</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MI</span> </a><li class="nav-item"> <a href="/portfolio/" class="nav-link"> <i class="fa-fw fas fa-briefcase ml-xl-3 mr-xl-3 unloaded"></i> <span>PORTAFOLIO</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/camartinezbu" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/camartinezbu" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/camartinezbu/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['camartinezbu.contacto','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>¿Cómo trabajar con fechas en Pandas?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>¿Cómo trabajar con fechas en Pandas?</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1671659400" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 21/12/2022 </em> </span><div class="mt-3 mb-3"> <img data-src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-21-como-trabajar-con-fechas-en-pandas/hero.png" class="preview-img bg" alt="Preview Image" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> Por <em> <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2327 palabras"> <em>12 min</em> de lectura</span></div></div></div><div class="post-content"><p>El trabajo con fechas tiene <a href="https://www.camartinezbu.com/posts/3-razones-que-dificultan-el-trabajo-con-fechas/">numerosas complejidades</a>, entre las que se cuentan el formato de escritura de las fechas, las zonas horarias y las diferentes formas de hablar de duraciones de tiempo.</p><p>En este post quiero explicarte cómo leer, manipular y hacer aritmética con fechas usando <a href="https://pandas.pydata.org/docs/getting_started/index.html">pandas</a>. Si buscas un tutorial para el módulo <code class="language-plaintext highlighter-rouge">datetime</code>, dirígete a <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-python/">este enlace</a>. Si te interesa aprender a trabajar con fechas en R, te invito a leer <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-r/">esta publicación</a>.</p><h2 id="pandas"><span class="mr-2">pandas</span><a href="#pandas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Pandas es una de las librerías más usadas para trabajar con datos tabulares en Python. Esta incluye un gran número de funciones para leer, limpiar, modificar, hacer análisis descriptivo y exportar tablas; entre ellas, algunas diseñadas para optimizar tu trabajo con fechas y horas.</p><p>Veamos los tipos de objetos relacionados con fechas con los que te vas a encontrar en <code class="language-plaintext highlighter-rouge">pandas</code>.</p><h3 id="tipos-de-objetos"><span class="mr-2">Tipos de objetos</span><a href="#tipos-de-objetos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Pandas te permite capturar 4 conceptos relacionados con el tiempo:</p><ul><li>Momentos puntuales.<li>Periodos: Una duración de tiempo que consiste en un punto de partida y una frecuencia.<li>Diferencias de tiempo absolutas: que no tienen en cuenta la aritmética de los calendarios. Por ejemplo, años bisiestos.<li>Diferencias de tiempo relativas: que si tienen en cuenta la aritmética de los calendarios.</ul><p>Cada uno de estos conceptos está asociado a una función específica que crea objetos de distinta clase, dependiendo de si el argumento que se le pasa es un escalar, un array o un objeto de Python (<code class="language-plaintext highlighter-rouge">Series</code> o <code class="language-plaintext highlighter-rouge">DataFrames</code>). La siguiente tabla describe estas relaciones:</p><div class="table-wrapper"><table><thead><tr><th>Concepto<th>Función asociada<th>Clase escalar<th>Clase Array<th>Clase Pandas<tbody><tr><td>Momento puntual<td><code class="language-plaintext highlighter-rouge">to_datetime()</code><td><code class="language-plaintext highlighter-rouge">Timestamp</code><td><code class="language-plaintext highlighter-rouge">DatetimeIndex</code><td><code class="language-plaintext highlighter-rouge">datetime64[ns]</code> o <code class="language-plaintext highlighter-rouge">datetime64[ns, tz]</code><tr><td>Periodos<td><code class="language-plaintext highlighter-rouge">Period()</code><td><code class="language-plaintext highlighter-rouge">Period</code><td><code class="language-plaintext highlighter-rouge">PeriodIndex</code><td><code class="language-plaintext highlighter-rouge">period[freq]</code><tr><td>Diferencias absolutas<td><code class="language-plaintext highlighter-rouge">to_timedelta()</code><td><code class="language-plaintext highlighter-rouge">Timedelta</code><td><code class="language-plaintext highlighter-rouge">TimedeltaIndex</code><td><code class="language-plaintext highlighter-rouge">timedelta64[ns]</code><tr><td>Diferencias relativas<td><code class="language-plaintext highlighter-rouge">DateOffset()</code><td><code class="language-plaintext highlighter-rouge">DateOffset</code><td><code class="language-plaintext highlighter-rouge">None</code><td><code class="language-plaintext highlighter-rouge">None</code></table></div><h3 id="lectura-de-fechas"><span class="mr-2">Lectura de fechas</span><a href="#lectura-de-fechas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Por lo pronto, veamos cómo funciona la lectura de fechas desde strings para los momentos puntuales, es decir, los objetos que están asociados con la función <code class="language-plaintext highlighter-rouge">to_datetime()</code>. En el siguiente bloque de código voy a crear un string, una lista y una serie de <code class="language-plaintext highlighter-rouge">pandas</code> con texto en formato <a href="https://es.wikipedia.org/wiki/ISO_8601">ISO 8601</a>:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">mi_string</span> <span class="o">=</span> <span class="s">"2022-11-06"</span>
<span class="n">mi_array</span> <span class="o">=</span> <span class="p">[</span><span class="s">"2022-11-06"</span><span class="p">,</span> <span class="s">"2022-12-06"</span><span class="p">,</span> <span class="s">"2023-01-06"</span><span class="p">]</span>
<span class="n">mi_serie</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">([</span><span class="s">"2022-11-06"</span><span class="p">,</span> <span class="s">"2022-12-06"</span><span class="p">,</span> <span class="s">"2023-01-06"</span><span class="p">])</span>
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>El formato <a href="https://es.wikipedia.org/wiki/ISO_8601">ISO 8601</a> es un estándar internacional para escribir fechas y horas, que elimina ambigüedades entre las distintas maneras de escribir fechas. En general, este estándar consiste en escribir primero las unidades más grandes (p.e. años) y luego las unidades más pequeñas (p.e. meses o días). Los componentes de la fecha se separan con un guión (<code class="language-plaintext highlighter-rouge">-</code>) y los componentes de la hora con dos puntos (<code class="language-plaintext highlighter-rouge">:</code>).</p></div></blockquote><p>Los siguientes son los resultados de aplicar la función <code class="language-plaintext highlighter-rouge">to_datetime()</code> a los 3 tipos de objetos. Como te darás cuenta, estos corresponden a la tabla que mencioné con anterioridad:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1"># String
</span><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">mi_string</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-11-06 00:00:00')
</span>
<span class="c1"># Array
</span><span class="n">pd</span><span class="p">.</span><span class="n">todatetime</span><span class="p">(</span><span class="n">mi_array</span><span class="p">)</span>
<span class="c1"># DatetimeIndex(['2022-11-06', '2022-12-06', '2023-01-06'], dtype='datetime64[ns]', freq=None)
</span>
<span class="c1"># Serie
</span><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">mi_serie</span><span class="p">)</span>
<span class="c1"># 0   2022-11-06
# 1   2022-12-06
# 2   2023-01-06
# dtype: datetime64[ns]
</span></pre></table></code></div></div><p>Ahora bien, ¿qué sucede cuando el formato de los strings en los que tienes tus fechas no coincide con el estándar ISO 8601? En estos casos, debes proveer la estructura de la fecha en el argumento <code class="language-plaintext highlighter-rouge">format</code>. Esta estructura se escribe con un string especial compuesto por caracteres que representan cada uno de los elementos. Estos caracteres son los mismos que funcionan con el paquete <code class="language-plaintext highlighter-rouge">datetime</code> de Python base:</p><div class="table-wrapper"><table><thead><tr><th>Medida de tiempo<th>Ejemplo<th>Caracter asociado<tbody><tr><td>Año con siglo<td><code class="language-plaintext highlighter-rouge">"1987"</code><td><code class="language-plaintext highlighter-rouge">"%Y"</code><tr><td>Año sin siglo<td><code class="language-plaintext highlighter-rouge">"87"</code><td><code class="language-plaintext highlighter-rouge">"%y"</code><tr><td>Mes en número<td><code class="language-plaintext highlighter-rouge">"02"</code><td><code class="language-plaintext highlighter-rouge">"%m"</code><tr><td>Mes en palabra larga<td><code class="language-plaintext highlighter-rouge">"Febrero"</code><td><code class="language-plaintext highlighter-rouge">"%B"</code><tr><td>Mes en palabra corta<td><code class="language-plaintext highlighter-rouge">"Feb"</code><td><code class="language-plaintext highlighter-rouge">"%b"</code><tr><td>Día del mes<td><code class="language-plaintext highlighter-rouge">"04"</code><td><code class="language-plaintext highlighter-rouge">"%d"</code><tr><td>Hora (formato 24 horas)<td><code class="language-plaintext highlighter-rouge">"19"</code><td><code class="language-plaintext highlighter-rouge">"%H"</code><tr><td>Hora (formato 12 horas)<td><code class="language-plaintext highlighter-rouge">"07"</code><td><code class="language-plaintext highlighter-rouge">"%h"</code><tr><td>Identificador de mañana o tarde<td><code class="language-plaintext highlighter-rouge">"PM"</code><td><code class="language-plaintext highlighter-rouge">"%p"</code><tr><td>Minuto<td><code class="language-plaintext highlighter-rouge">"30"</code><td><code class="language-plaintext highlighter-rouge">"%M"</code><tr><td>Segundo<td><code class="language-plaintext highlighter-rouge">"00"</code><td><code class="language-plaintext highlighter-rouge">"%S"</code></table></div><p>Supón que tienes un string en tu <code class="language-plaintext highlighter-rouge">DataFrame</code> que contiene una columna con las fechas en las que algún registro se actualizó, con el siguiente formato <code class="language-plaintext highlighter-rouge">"Updated on 09 Dec 2022 at 13:30:05"</code>. Al ejecutar la función <code class="language-plaintext highlighter-rouge">to_datetime()</code> sin ningún argumento adicional, Python te devolverá un error porque <code class="language-plaintext highlighter-rouge">pandas</code> no sabe cómo interpretar ese string:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"Updated on 09 December 2022 at 13:30:05"</span><span class="p">)</span>
<span class="c1"># ParserError: Unknown string format: Updated on 09 Dec 2022 at 13:30:05
</span></pre></table></code></div></div><p>Ahora intentemos con el argumento <code class="language-plaintext highlighter-rouge">format</code>. En este caso, puedes ver que el string contiene el número del día (<code class="language-plaintext highlighter-rouge">%d</code>), el nombre largo del mes (<code class="language-plaintext highlighter-rouge">%bB</code>), el año incluyendo los dígitos del siglo (<code class="language-plaintext highlighter-rouge">%Y</code>), la hora en formato 24 horas (<code class="language-plaintext highlighter-rouge">%H</code>), los minutos (<code class="language-plaintext highlighter-rouge">%M</code>) y los segundos (<code class="language-plaintext highlighter-rouge">%S</code>). Con esta información puedes construir el string que iría en <code class="language-plaintext highlighter-rouge">format</code> así:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"Updated on 09 December 2022 at 13:30:05"</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="s">"Updated on %d %B %Y at %H:%M:%S"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 13:30:05')
</span></pre></table></code></div></div><p>Sin embargo, el código anterior sólo funciona para fechas que estén escritas en inglés, dado que contiene el nombre del mes en ese idioma. Si quisieras leer directamente el string <code class="language-plaintext highlighter-rouge">"Actualizado el 09 de Diciembre de 2022 a las 13:30:05"</code>, <code class="language-plaintext highlighter-rouge">pandas</code> te devolvería un error porque no reconoce <code class="language-plaintext highlighter-rouge">Diciembre</code> como el nombre de un mes:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"Actualizado el 09 de Diciembre de 2022 a las 13:30:05"</span><span class="p">,</span> 
			   <span class="nb">format</span> <span class="o">=</span> <span class="s">"Actualizado el %d de %B de %Y a las %H:%M:%S"</span><span class="p">)</span>
<span class="c1"># ValueError: time data 'Actualizado el 09 de Diciembre de 2022 a las 13:30:05' does not match format 'Actualizado el %d de %B de %Y a las %H:%M:%S' (match)
</span></pre></table></code></div></div><p>Para corregir este error, tienes que definir el idioma en el que va a correr tu ambiente de Python usando la función <code class="language-plaintext highlighter-rouge">setlocale</code> del módulo <code class="language-plaintext highlighter-rouge">locale</code>. Como queremos que Python lea los nombres de los meses en español tenemos que usar el locale <code class="language-plaintext highlighter-rouge">"es_ES"</code> así:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">locale</span>

<span class="c1"># Cambiar el idioma a español
</span><span class="n">locale</span><span class="p">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="p">.</span><span class="n">LC_TIME</span><span class="p">,</span> <span class="s">"es_ES"</span><span class="p">)</span>

<span class="c1"># Leer la fecha
</span><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"Actualizado el 09 de Diciembre de 2022 a las 13:30:05"</span><span class="p">,</span> 
			   <span class="nb">format</span> <span class="o">=</span> <span class="s">"Actualizado el %d de %B de %Y a las %H:%M:%S"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 13:30:05')
</span></pre></table></code></div></div><h3 id="unidades-de-tiempo"><span class="mr-2">Unidades de tiempo</span><a href="#unidades-de-tiempo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Puedes acceder a una gran cantidad de elementos de los objetos <code class="language-plaintext highlighter-rouge">Timestamp</code> y <code class="language-plaintext highlighter-rouge">DatetimeIndex</code> llamando los atributos que se describen en la siguiente tabla. Si quieres más información, puedes ver la lista completa de atributos en el siguiente <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-date-components">enlace</a>.</p><div class="table-wrapper"><table><thead><tr><th>Atributo<th>Descripción<tbody><tr><td><code class="language-plaintext highlighter-rouge">year</code><td>Año<tr><td><code class="language-plaintext highlighter-rouge">month</code><td>Mes<tr><td><code class="language-plaintext highlighter-rouge">day</code><td>Día del mes<tr><td><code class="language-plaintext highlighter-rouge">hour</code><td>Hora<tr><td><code class="language-plaintext highlighter-rouge">minute</code><td>Minuto<tr><td><code class="language-plaintext highlighter-rouge">Second</code><td>Segundo<tr><td><code class="language-plaintext highlighter-rouge">date</code><td>Fecha sin información de zona horaria<tr><td><code class="language-plaintext highlighter-rouge">time</code><td>Hora sin información de zona horaria<tr><td><code class="language-plaintext highlighter-rouge">timetz</code><td>Hora incluyendo información de zona horaria<tr><td><code class="language-plaintext highlighter-rouge">dayofyear</code><td>Día del año<tr><td><code class="language-plaintext highlighter-rouge">dayofweek</code><td>Día de la semana (0 es lunes y 6 es domingo)<tr><td><code class="language-plaintext highlighter-rouge">daysinmonth</code><td>Número de días del mes actual</table></div><p>Veamos un ejemplo. Supón que tienes un objeto <code class="language-plaintext highlighter-rouge">Timestamp</code> como el que se presenta a continuación. Puedes extraer los elementos fácilmente así:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="n">mi_ejemplo</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2022-12-09 14:20:35'</span><span class="p">)</span>

<span class="c1"># Imprimir los componentes de la fecha
</span><span class="k">print</span><span class="p">(</span><span class="s">"Año:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">year</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Mes:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">month</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Día:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">day</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Hora:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">hour</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Minuto:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">minute</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Segundo:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">second</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Día del año:"</span><span class="p">,</span> <span class="n">mi_ejemplo</span><span class="p">.</span><span class="n">dayofyear</span><span class="p">)</span>

<span class="c1"># Año: 2022
# Mes: 12
# Día: 9
# Hora: 14
# Minuto: 20
# Segundo: 35
# Día del año: 343
</span></pre></table></code></div></div><p>Te habrás dado cuenta que en los objetos que mencioné hace falta la Serie de <code class="language-plaintext highlighter-rouge">datetime64[ns]</code>. Esto es porque la forma de acceder a los componentes de la fecha es ligeramente diferente. En vez de llamar directamente el nombre del atributo como en la tabla, lo que tienes que hacer es poner primero el atributo <code class="language-plaintext highlighter-rouge">dt</code>. Es decir, si quieres extraer la hora de una Serie de fechas, deberías escribir algo como:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">mi_serie</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">([</span><span class="s">'2022-12-09 14:20:35'</span><span class="p">,</span>
									<span class="s">'2022-12-15 15:30:14'</span><span class="p">,</span>
									<span class="s">'2023-01-04 09:55:22'</span><span class="p">]))</span>

<span class="c1"># Extraer la hora
</span><span class="k">print</span><span class="p">(</span><span class="n">mi_serie</span><span class="p">.</span><span class="n">dt</span><span class="p">.</span><span class="n">hour</span><span class="p">)</span>
<span class="c1"># 0    14
# 1    15
# 2    9
# dtype: int64
</span></pre></table></code></div></div><h3 id="zonas-horarias"><span class="mr-2">Zonas horarias</span><a href="#zonas-horarias" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Detrás de cámaras, <code class="language-plaintext highlighter-rouge">pandas</code> usa las librerías <code class="language-plaintext highlighter-rouge">pytz</code> y <code class="language-plaintext highlighter-rouge">dateutil</code> para manejar zonas horarias. Por defecto, los objetos que creas no tienen información de zona horaria. Pero esto se puede modificar fácilmente con las mismas lógicas de <code class="language-plaintext highlighter-rouge">pytz</code>. Veamos las operaciones más comunes que tendrás que realizar:</p><ul><li>Definir la zona horaria de la fecha: Si comienzas con un objeto que no tiene información de zona horaria, puedes definirla con el con el método <code class="language-plaintext highlighter-rouge">tz_localize()</code>.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2022-12-09 14:20:35'</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35')
</span>
<span class="c1"># Definir la zona horaria de Bogotá
</span><span class="n">mi_fecha_hora</span><span class="p">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">"America/Bogota"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35-0500', tz='America/Bogota')
</span></pre></table></code></div></div><blockquote class="prompt-warning"><div><p>Es muy importante que guardes este resultado en un variable –o sobreescribas la existente–. De lo contrario, no se guardarán los cambios a la zona horaria.</p></div></blockquote><ul><li>Cambiar de una zona horaria a otra: Para esto, puedes usar el método <code class="language-plaintext highlighter-rouge">tz_convert()</code>, escribiendo como argumento la zona horaria que quieres como resultado.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># Definir un objeto en hora de Bogotá
</span><span class="n">mi_fecha_hora_bog</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2022-12-09 14:20:35'</span><span class="p">).</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">"America/Bogota"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35-0500', tz='America/Bogota')
</span>
<span class="c1"># Transformarlo a hora de Madrid
</span><span class="n">mi_fecha_hora_mad</span> <span class="o">=</span> <span class="n">mi_fecha_hora_bog</span><span class="p">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">"Europe/Madrid"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 20:20:35+0100', tz='Europe/Madrid')
</span>
<span class="c1"># Transformarlo a hora de Tokyo
</span><span class="n">mi_fecha_hora_tok</span> <span class="o">=</span> <span class="n">mi_fecha_hora_bog</span><span class="p">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">"Asia/Tokyo"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-10 04:20:35+0900', tz='Asia/Tokyo')
</span></pre></table></code></div></div><ul><li>Forzar una zona horaria sin cambiar la hora original: Primero tienes que eliminar la información de zona horaria de tu objeto de interés usando <code class="language-plaintext highlighter-rouge">tz_localize(None)</code> y luego, incluyes la zona horaria que desees usando de nuevo <code class="language-plaintext highlighter-rouge">tz_localize()</code>.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># Definir un objeto en hora de Bogotá
</span><span class="n">mi_fecha_hora_bog</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">'2022-12-09 14:20:35'</span><span class="p">).</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">"America/Bogota"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35-0500', tz='America/Bogota')
</span>
<span class="c1"># Forzar el objeto a hora de Madrid
</span><span class="n">mi_fecha_hora_mad2</span> <span class="o">=</span> <span class="n">mi_fecha_hora_bog</span><span class="p">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">).</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">"Europe/Madrid"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35+0100', tz='Europe/Madrid')
</span>
<span class="c1"># Forzar el objeto a la hora de Tokyo
</span><span class="n">mi_fecha_hora_tok2</span> <span class="o">=</span> <span class="n">mi_fecha_hora_bog</span><span class="p">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">).</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">"Asia/Tokyo"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-09 14:20:35+0900', tz='Asia/Tokyo')
</span></pre></table></code></div></div><h3 id="periodos"><span class="mr-2">Periodos</span><a href="#periodos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Es momento de hablar de los tipos de objetos que quedaron pendientes. Los periodos representan duraciones de tiempo con una fecha específica de inicio. Esto se traduce en una diferencia sutil frente a los objetos tipo <code class="language-plaintext highlighter-rouge">Timestamp</code>: mientras que los <code class="language-plaintext highlighter-rouge">Timestamp</code> representan un momento específico en el tiempo, los objetos tipo <code class="language-plaintext highlighter-rouge">Period</code> describen una ventana de tiempo que comienza en un momento específico. En otras palabras, en vez de referirnos a un punto arbitrario en el tiempo como el 10 de diciembre de 2022, hablamos del día, semana o mes que comienzan a partir del 10 de diciembre de 2022.</p><p>De manera similar a los momentos puntuales, podemos crear objetos distintos dependiendo de si partimos de un escalar, un vector o un objeto de <code class="language-plaintext highlighter-rouge">pandas</code>. Dado su propósito, la función <code class="language-plaintext highlighter-rouge">Period</code> contiene un argumento llamado <code class="language-plaintext highlighter-rouge">freq</code>, que define el tamaño de la ventana de tiempo que queremos definir. Algunas de las periodicidades más comunes son:</p><div class="table-wrapper"><table><thead><tr><th>Caracter<th>Descripción<tbody><tr><td><code class="language-plaintext highlighter-rouge">D</code><td>Día calendario<tr><td><code class="language-plaintext highlighter-rouge">B</code><td>Día hábil<tr><td><code class="language-plaintext highlighter-rouge">W</code><td>Semana<tr><td><code class="language-plaintext highlighter-rouge">M</code><td>Mes<tr><td><code class="language-plaintext highlighter-rouge">Q</code><td>Trimestre<tr><td><code class="language-plaintext highlighter-rouge">Y</code><td>Año<tr><td><code class="language-plaintext highlighter-rouge">H</code><td>Hora<tr><td><code class="language-plaintext highlighter-rouge">T</code><td>Minuto<tr><td><code class="language-plaintext highlighter-rouge">S</code><td>Segundo</table></div><blockquote class="prompt-info"><div><p>Puedes consultar el resto de duraciones en el <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases">siguiente link</a></p></div></blockquote><p>A modo de ejemplo, puedes crear objetos de la familia de <code class="language-plaintext highlighter-rouge">Period</code> así:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">mi_string</span> <span class="o">=</span> <span class="s">"2022-11-06"</span>
<span class="n">mi_array</span> <span class="o">=</span> <span class="p">[</span><span class="s">"2022-11-06"</span><span class="p">,</span> <span class="s">"2022-12-06"</span><span class="p">,</span> <span class="s">"2023-01-06"</span><span class="p">]</span>
<span class="n">mi_serie</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">Series</span><span class="p">([</span><span class="s">"2022-11-06"</span><span class="p">,</span> <span class="s">"2022-12-06"</span><span class="p">,</span> <span class="s">"2023-01-06"</span><span class="p">])</span>

<span class="c1"># Period con duración de 2 días.
</span><span class="n">pd</span><span class="p">.</span><span class="n">Period</span><span class="p">(</span><span class="n">mi_string</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">"2D"</span><span class="p">)</span>
<span class="c1"># Period('2022-11-06', '2D')
</span>
<span class="c1"># PeriodIndex con duración de 1 semana.
</span><span class="n">pd</span><span class="p">.</span><span class="n">PeriodIndex</span><span class="p">(</span><span class="n">mi_array</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">"W"</span><span class="p">)</span>
<span class="c1"># PeriodIndex(['2022-10-31/2022-11-06', '2022-12-05/2022-12-11',
#             '2023-01-02/2023-01-08'],
#            dtype='period[W-SUN]', freq='W-SUN')
</span>
<span class="c1"># period[freq] con duración de 1 semana
</span><span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">mi_serie</span><span class="p">).</span><span class="n">dt</span><span class="p">.</span><span class="n">to_period</span><span class="p">(</span><span class="s">"W"</span><span class="p">)</span>
<span class="c1"># 0    2022-10-31/2022-11-06
# 1    2022-12-05/2022-12-11
# 2    2023-01-02/2023-01-08
</span><span class="n">dtype</span><span class="p">:</span> <span class="n">period</span><span class="p">[</span><span class="n">W</span><span class="o">-</span><span class="n">SUN</span><span class="p">]</span>
</pre></table></code></div></div><blockquote class="prompt-tip"><div><p>Nota que para crear una serie de objetos tipo <code class="language-plaintext highlighter-rouge">period[freq]</code> necesitas partir de un array que ya sea un <code class="language-plaintext highlighter-rouge">Timestamp</code> o un <code class="language-plaintext highlighter-rouge">DatetimeIndex</code>. Por tal motivo, antes de usar el método <code class="language-plaintext highlighter-rouge">to_period()</code>, fue necesario convertir la serie con la función <code class="language-plaintext highlighter-rouge">pd.to_datetime()</code>.</p></div></blockquote><h3 id="timedeltas"><span class="mr-2">Timedeltas</span><a href="#timedeltas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los objetos tipo <code class="language-plaintext highlighter-rouge">Timedelta</code> funcionan muy similar a los <code class="language-plaintext highlighter-rouge">timedelta</code> del módulo <code class="language-plaintext highlighter-rouge">datetime</code>. En resumen, describen un intervalo de tiempo exacto, medido en unidades como días, horas, minutos, segundos etc. Puedes crear estos objetos con la función <code class="language-plaintext highlighter-rouge">Timedelta()</code> y ajustar su duración con parámetros comp <code class="language-plaintext highlighter-rouge">days</code>, <code class="language-plaintext highlighter-rouge">hours</code>, etc. Aquí puedes ver un ejemplo de cómo usarlos para hacer aritmética con fechas.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1"># Crear un Timedelta
</span><span class="n">mi_timedelta</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="c1"># Timedelta('30 days 00:00:00')
</span>
<span class="c1"># Usar un timedelta para conseguir una nueva fecha
</span><span class="n">mi_timestamp</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"2022-12-21"</span><span class="p">)</span>
<span class="c1"># Timestamp('2022-12-21 00:00:00')
</span>
<span class="n">mi_timestamp</span> <span class="o">+</span> <span class="n">mi_timedelta</span>
<span class="c1"># Timestamp('2023-01-20 00:00:00')
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>Dada su construcción, no puedes usar <code class="language-plaintext highlighter-rouge">Timedelta</code> para representar duraciones de tiempo variables como las que usamos en nuestro lenguaje cotidiano. Para eso están los objetos tipo<code class="language-plaintext highlighter-rouge">DateOffset</code>, que verás a continuación.</p></div></blockquote><h3 id="dateoffsets"><span class="mr-2">DateOffsets</span><a href="#dateoffsets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Por su parte, los objetos de tipo <code class="language-plaintext highlighter-rouge">DateOffset</code> también se usan para describir intervalos de tiempo; pero en vez de hacerlo en términos de unidades exactas de tiempo, lo hacen siguiendo las reglas del calendario. Por ejemplo, un <code class="language-plaintext highlighter-rouge">DateOffset</code> con una duración de 1 mes, puede tener duraciones reales de 29, 29, 30 o 31 días dependiendo del mes y el año desde el que se calcule.</p><p>Como argumentos de la función <code class="language-plaintext highlighter-rouge">DateOffset()</code> puedes incluir duraciones como años (<code class="language-plaintext highlighter-rouge">years</code>), meses (<code class="language-plaintext highlighter-rouge">months</code>), semanas(<code class="language-plaintext highlighter-rouge">weeks</code>), días(<code class="language-plaintext highlighter-rouge">days</code>), entre otros. Encontrarás los demás argumentos en <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.tseries.offsets.DateOffset.html#pandas.tseries.offsets.DateOffset">este enlace</a>. A continuación verás un ejemplo de trabajo con objetos <code class="language-plaintext highlighter-rouge">DateOffset</code>.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1"># Crear un DateOffset
</span><span class="n">mi_dateoffset</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Crear una fecha de inicio:
</span><span class="n">mi_timestamp</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s">"2023-01-21"</span><span class="p">)</span>
<span class="c1"># Timestamp('2023-01-21 00:00:00')
</span>
<span class="c1"># Calcular la fecha más un mes
</span><span class="n">mi_timestamp2</span> <span class="o">=</span> <span class="n">mi_timestamp</span> <span class="o">+</span> <span class="n">mi_dateoffset</span>
<span class="c1"># Timestamp('2023-02-21 00:00:00')
</span>
<span class="c1"># ¿Cuántos días de diferencia tienen las dos fechas?
</span><span class="p">(</span><span class="n">mi_timestamp</span> <span class="o">+</span> <span class="n">mi_dateoffset</span><span class="p">)</span> <span class="o">-</span> <span class="n">mi_timestamp</span>
<span class="c1"># Timedelta('31 days 00:00:00')
</span></pre></table></code></div></div><blockquote class="prompt-tip"><div><p>Como puedes ver, al calcular la diferencia entre dos fechas obtienes un objeto tipo <code class="language-plaintext highlighter-rouge">Timedelta</code>. Intenta cambiar los argumentos de <code class="language-plaintext highlighter-rouge">DateOffset()</code> y calcula la diferencia entre las fechas para que veas la variabilidad en su duración.</p></div></blockquote><h2 id="conclusiones"><span class="mr-2">Conclusiones</span><a href="#conclusiones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>¡Felicidades, ya sabes usar <code class="language-plaintext highlighter-rouge">pandas</code> para trabajar con fechas! Con las herramientas que aprendiste en este blog podrás desarrollar un gran número de tareas relacionadas con fechas. Como recursos adicionales, te dejo los enlaces a un par de tutoriales que escribí para que aprendas a hacer <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-r/">tareas similares en R</a> y <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-python/">en Python</a>.</p><p>Te invito a dejar un comentario abajo si tienes algún truco sobre el manejo de <code class="language-plaintext highlighter-rouge">datetime</code> y, si te pareció útil este post, a compartirlo en tus redes sociales.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/fechas/" class="post-tag no-text-decoration" >fechas</a> <a href="/tags/datetimes/" class="post-tag no-text-decoration" >datetimes</a> <a href="/tags/lubridate/" class="post-tag no-text-decoration" >lubridate</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a> <a href="/tags/pandas/" class="post-tag no-text-decoration" >pandas</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%C2%BFC%C3%B3mo+trabajar+con+fechas+en+Pandas%3F+-+Camilo+Mart%C3%ADnez+Burgos&url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-pandas%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%C2%BFC%C3%B3mo+trabajar+con+fechas+en+Pandas%3F+-+Camilo+Mart%C3%ADnez+Burgos&u=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-pandas%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-pandas%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/">3 razones que dificultan el trabajo con fechas</a><li><a href="/posts/como-trabajar-con-fechas-en-r/">¿Cómo trabajar con fechas en R?</a><li><a href="/posts/como-trabajar-con-fechas-en-python/">¿Cómo trabajar con fechas en Python?</a><li><a href="/posts/args-y-kwargs-en-python/">Args y Kwargs en Python</a><li><a href="/posts/como-escribir-un-problema-de-optimizacion-en-jupyter/">¿Cómo escribir un problema de optimización en Jupyter?</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/"><div class="card-body"> <em class="small" data-ts="1671145800" data-df="DD/MM/YYYY" > 15/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>3 razones que dificultan el trabajo con fechas</h3><div class="text-muted small"><p> Una de las tareas más habituales en el trabajo de un científico de datos tiene que ver con el manejo de fechas. Asumiendo que tus datos ya están ordenados, los campos que describen fechas te van a ...</p></div></div></a></div><div class="card"> <a href="/posts/como-trabajar-con-fechas-en-r/"><div class="card-body"> <em class="small" data-ts="1671289800" data-df="DD/MM/YYYY" > 17/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo trabajar con fechas en R?</h3><div class="text-muted small"><p> Saber trabajar correctamente con fechas es una herramienta fundamental para cualquier científico de datos, ya que es muy común encontrarse con columnas de este tipo en los datasets. Sin embargo, co...</p></div></div></a></div><div class="card"> <a href="/posts/como-trabajar-con-fechas-en-python/"><div class="card-body"> <em class="small" data-ts="1671463200" data-df="DD/MM/YYYY" > 19/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo trabajar con fechas en Python?</h3><div class="text-muted small"><p> En una publicación anterior te hablé sobre las dificultades que te puedes encontrar cuando trabajes con fechas en tus proyectos de ciencia de datos. Para que puedas resolverlas, estoy escribiendo u...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/como-trabajar-con-fechas-en-python/" class="btn btn-outline-primary" prompt="Anterior"><p>¿Cómo trabajar con fechas en Python?</p></a> <a href="/posts/google-colab-vs-deepnote/" class="btn btn-outline-primary" prompt="Nuevo"><p>Google Colab vs Deepnote</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-pandas/'; this.page.identifier = '/posts/como-trabajar-con-fechas-en-pandas/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://camartinezbu.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { window.addEventListener("message", reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-77VL6HZ7DQ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-77VL6HZ7DQ'); }); </script>

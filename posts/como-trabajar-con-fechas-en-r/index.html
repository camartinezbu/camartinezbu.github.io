<!DOCTYPE html><html lang="es-ES" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="¿Cómo trabajar con fechas en R?" /><meta property="og:locale" content="es_ES" /><meta name="description" content="Aprende a usar lubridate." /><meta property="og:description" content="Aprende a usar lubridate." /><link rel="canonical" href="http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-r/" /><meta property="og:url" content="http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-r/" /><meta property="og:site_name" content="Camilo Martínez Burgos" /><meta property="og:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-17-como-trabajar-con-fechas-en-r/hero.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-12-17T10:10:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-17-como-trabajar-con-fechas-en-r/hero.png" /><meta property="twitter:title" content="¿Cómo trabajar con fechas en R?" /><meta name="twitter:site" content="@camartinezbu" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-21T17:32:00-05:00","datePublished":"2022-12-17T10:10:00-05:00","description":"Aprende a usar lubridate.","headline":"¿Cómo trabajar con fechas en R?","image":"https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-17-como-trabajar-con-fechas-en-r/hero.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-r/"},"url":"http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-r/"}</script><title>¿Cómo trabajar con fechas en R? | Camilo Martínez Burgos</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Camilo Martínez Burgos"><meta name="application-name" content="Camilo Martínez Burgos"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/common/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Camilo Martínez Burgos</a></div><div class="site-subtitle font-italic">Ciencia de datos y programación</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MI</span> </a><li class="nav-item"> <a href="/portfolio/" class="nav-link"> <i class="fa-fw fas fa-briefcase ml-xl-3 mr-xl-3 unloaded"></i> <span>PORTAFOLIO</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/camartinezbu" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/camartinezbu" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/camartinezbu/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['camartinezbu.contacto','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>¿Cómo trabajar con fechas en R?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>¿Cómo trabajar con fechas en R?</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1671289800" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 17/12/2022 </em> </span> <span> Actualizado <em class="" data-ts="1671661920" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 21/12/2022 </em> </span><div class="mt-3 mb-3"> <img data-src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2022-12-17-como-trabajar-con-fechas-en-r/hero.png" class="preview-img bg" alt="Preview Image" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> Por <em> <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2179 palabras"> <em>12 min</em> de lectura</span></div></div></div><div class="post-content"><p>Saber trabajar correctamente con fechas es una herramienta fundamental para cualquier científico de datos, ya que es muy común encontrarse con columnas de este tipo en los <em>datasets</em>. Sin embargo, como lo explico en <a href="https://www.camartinezbu.com/posts/3-razones-que-dificultan-el-trabajo-con-fechas/">esta publicación</a>, no es algo trivial dadas algunas complejidades propias de las fechas.</p><p>Al final de este post, sabrás como leer, manipular y hacer aritmética con fechas usando el paquete <a href="https://lubridate.tidyverse.org/index.html">lubridate</a>. Si te interesa aprender a trabajar con fechas en Python, te invito s leer los posts correspondientes a <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-python/"><code class="language-plaintext highlighter-rouge">datetime</code></a> y <a href="https://www.camartinezbu.com/posts/como-trabajar-con-fechas-en-pandas/"><code class="language-plaintext highlighter-rouge">pandas</code></a>.</p><h2 id="tipos-de-datos-primitivos-en-r"><span class="mr-2">Tipos de datos primitivos en R</span><a href="#tipos-de-datos-primitivos-en-r" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Antes de empezar, es útil hacer un repaso de los tipos de datos que utiliza R base para trabajar con fechas. Lubridate crea un tipo de objeto nuevo, sino que te ofrece un conjunto de funciones para trabajar con ellos.</p><p>Dependiendo de qué tanta información contiene tu campo de fecha, vas a trabajar con distintos tipos de objetos en R. Cuando sólo se tiene año, mes y día, R trabaja con el tipo de dato <code class="language-plaintext highlighter-rouge">Date</code>. Internamente, este consiste en un conteo de los días que han pasado desde el primero de enero de 1970.</p><p>Puedes leer una fecha desde un <code class="language-plaintext highlighter-rouge">character</code> usando la función <code class="language-plaintext highlighter-rouge">as.Date()</code>. A modo de ejemplo:</p><div class="language-R highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">mi_fecha</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="s2">"2022-12-10"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p>Ahora bien, si además tienes información del momento preciso –horas, minutos y segundos–, R va a trabajar con el tipo de dato <code class="language-plaintext highlighter-rouge">POSIXct</code>. Este consiste en un conteo de segundos desde el 1 de enero de 1970 a media noche.</p><blockquote class="prompt-tip"><div><p>R no cuenta con una clase nativa que guarde únicamente horas, minutos y segundos. El paquete <a href="https://www.rdocumentation.org/packages/hms/versions/1.1.2">hms</a> incluye la clase <code class="language-plaintext highlighter-rouge">hms</code> que habilita esta funcionalidad.</p></div></blockquote><p>Para leer una fecha de este estilo desde un <code class="language-plaintext highlighter-rouge">character</code>, puedes usar la función <code class="language-plaintext highlighter-rouge">as.POSIXct()</code> así:</p><div class="language-R highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.POSIXct</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>El formato en el que están escritas la fechas anteriores se conoce como <a href="https://es.wikipedia.org/wiki/ISO_8601">ISO 8601</a>. En este estándar se escriben las fechas de la mayor unidad a la menor unidad: Año antes que mes, mes antes que día, y así sucesivamente. De esta manera, se elimina la ambigüedad a la hora de interpretar a qué unidad pertenece cada número.</p></div></blockquote><h2 id="lubridate"><span class="mr-2">Lubridate</span><a href="#lubridate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Lubridate es un paquete que te ofrece funciones que aplican sobre fechas en formato <code class="language-plaintext highlighter-rouge">Date</code> y <code class="language-plaintext highlighter-rouge">POSIXct</code>, que te facilitarán mucho tu trabajo. Adicionalmente, este paquete funciona muy bien con otros paquetes del <a href="https://www.tidyverse.org">tidyverse</a>, por lo que lo puedes incorporar sin mayores problemas en tu código existente. Veamos algunas tareas que puedes hacer con <code class="language-plaintext highlighter-rouge">lubridate</code>.</p><h3 id="lectura-de-fechas"><span class="mr-2">Lectura de fechas</span><a href="#lectura-de-fechas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>El primer paso es leer un <code class="language-plaintext highlighter-rouge">character</code> que contiene una fecha en tu dataset. Si bien podrías hacerlo como lo mostré en un ejemplo anterior con las funciones <code class="language-plaintext highlighter-rouge">as.Date()</code> y <code class="language-plaintext highlighter-rouge">as.POSIXct()</code>, no siempre tendrás la fortuna de que las fechas estén en el formato ISO 8601.</p><p>Por esta razón, lubridate te ofrece una familia de funciones que puedes usar para leer configuraciones comunes. Estas se basan en una letra para denotar cada unidad: “<strong>y</strong>”” para año, “<strong>m</strong>” para mes, “<strong>d</strong>” para día, “<strong>h</strong>” para hora, “<strong>m</strong>” para minuto y “<strong>s</strong>” para segundo.</p><blockquote><p>Es cierto que la “<strong>m</strong>” se repite en esta asignación. Sin embargo, esto no es un problema porque las funciones de lubridate separan el componente de fecha y el de hora con un guión bajo (_), como lo verás más adelante.</p></blockquote><p>Con esta lógica, se construyen funciones como <code class="language-plaintext highlighter-rouge">ymd()</code>, que te permite leer un <code class="language-plaintext highlighter-rouge">character</code> en el que el orden es Año-Mes-Día, sin importar el caracter que las separe. También funciones como <code class="language-plaintext highlighter-rouge">mdy()</code>, que espera un orden Mes-Día-Año, <code class="language-plaintext highlighter-rouge">dym()</code>, que espera Día-Año-Mes, y demás combinaciones de esas letras.</p><p>A modo de ejemplo, al ejecutar las siguientes líneas de código tendrás exactamente el mismo objeto <code class="language-plaintext highlighter-rouge">Date</code>:</p><div class="language-R highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w">

</span><span class="c1"># Estas líneas devuelven la misma fecha: </span><span class="w">
</span><span class="n">mi_fecha1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd</span><span class="p">(</span><span class="s2">"2022-12-10"</span><span class="p">)</span><span class="w">
</span><span class="n">mi_fecha2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mdy</span><span class="p">(</span><span class="s2">"12/10/2022"</span><span class="p">)</span><span class="w">
</span><span class="n">mi_fecha3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dym</span><span class="p">(</span><span class="s2">"10:2022:12"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10"</span><span class="w">
</span></pre></table></code></div></div><p>Lo mismo sucede si añadimos datos de hora. Con las mismas letras se construyen funciones como <code class="language-plaintext highlighter-rouge">ymd_hms()</code>, que puede crear un objeto <code class="language-plaintext highlighter-rouge">POSIXct</code> a partir de un texto en orden Año-Mes-Día-Hora-Minuto-Segundo. Ya te podrás imaginar qué hacen funciones como <code class="language-plaintext highlighter-rouge">mdy_hm()</code> o <code class="language-plaintext highlighter-rouge">dmy_h()</code>.</p><p>Veamos qué resulta de ejecutar las siguientes funciones:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">lubridate</span><span class="p">)</span><span class="w">

</span><span class="c1"># Año-Mes-Día Hora-Minuto-Segundo</span><span class="w">
</span><span class="n">mi_fecha_hora1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 UTC"</span><span class="w">

</span><span class="c1"># Mes-Día-Año Hora-Minuto</span><span class="w">
</span><span class="n">mi_fecha_hora2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mdy_hm</span><span class="p">(</span><span class="s2">"12/10/2022_19_30"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 UTC"</span><span class="w">

</span><span class="c1"># Día-Mes-Año Hora</span><span class="w">
</span><span class="n">mi_fecha_hora3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dmy_h</span><span class="p">(</span><span class="s2">"10:12:2022 19"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:00:00 UTC"</span><span class="w">
</span></pre></table></code></div></div><blockquote class="prompt-tip"><div><p>También puedes cargar una fecha que aparezca como una combinación entre año y trimestre (p.e. <code class="language-plaintext highlighter-rouge">"2022:4"</code>) usando la función <code class="language-plaintext highlighter-rouge">yq()</code>.</p></div></blockquote><h3 id="unidades-de-tiempo"><span class="mr-2">Unidades de tiempo</span><a href="#unidades-de-tiempo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>¡Perfecto! Ya sabes cargar una fecha con lubridate. Ahora vas a aprender a extraer los elementos individuales de las fechas. Puedes acceder al año, mes, día, hora, minuto, segundo y más unidades de tiempo de tu objeto tipo <code class="language-plaintext highlighter-rouge">Date</code> o <code class="language-plaintext highlighter-rouge">POSIXct</code>, con las siguientes funciones:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Año</span><span class="w">
</span><span class="n">year</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 2022</span><span class="w">

</span><span class="c1"># Mes</span><span class="w">
</span><span class="n">month</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 12</span><span class="w">

</span><span class="c1"># Día</span><span class="w">
</span><span class="n">day</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 10</span><span class="w">

</span><span class="c1"># Hora</span><span class="w">
</span><span class="n">hour</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 19</span><span class="w">

</span><span class="c1"># Minuto</span><span class="w">
</span><span class="n">minute</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; 30 </span><span class="w">

</span><span class="c1"># Segundo</span><span class="w">
</span><span class="n">second</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 0</span><span class="w">

</span><span class="c1"># Trimeste</span><span class="w">
</span><span class="n">quarter</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 4</span><span class="w">

</span><span class="c1"># Semestre</span><span class="w">
</span><span class="n">semester</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 2</span><span class="w">

</span><span class="c1"># Día de la semana</span><span class="w">
</span><span class="n">wday</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">,</span><span class="w"> </span><span class="n">week_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> 
</span><span class="c1">#&gt; 6 </span><span class="w">
</span></pre></table></code></div></div><blockquote class="prompt-tip"><div><p>En la función <code class="language-plaintext highlighter-rouge">wday()</code> es necesario poner el argumento <code class="language-plaintext highlighter-rouge">week_start = 1</code> para que el lunes sea el primer día de la semana –y no el domingo, que es la función por defecto–. Esto hace que el valor que devuelve la función sea 6, dado que la fecha del ejemplo es un sábado. Si no lo haces, la función te devuelve el 7, ya que es el séptimo día de la semana si comienzas a contar desde el domingo.</p></div></blockquote><p>Hasta el momento, todos los campos de fecha que hemos revisado se devuelven como un <code class="language-plaintext highlighter-rouge">integer</code>. Sin embargo, también puedes hacer que la función <code class="language-plaintext highlighter-rouge">month()</code> devuelva el nombre del mes o <code class="language-plaintext highlighter-rouge">wday()</code> el nombre del día. Hay dos argumentos que intervienen en esta operación: el primero es <code class="language-plaintext highlighter-rouge">label</code>, que le indica a <code class="language-plaintext highlighter-rouge">lubridate</code> que debe imprimir un nombre y no un número, y el segundo es <code class="language-plaintext highlighter-rouge">abbr</code>, que define si quieres una representación larga o corta del nombre. Veamos.</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Nombre del mes sin abreviar</span><span class="w">
</span><span class="n">month</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">abbr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; diciembre</span><span class="w">

</span><span class="c1"># Nombre del mes sin abreviar</span><span class="w">
</span><span class="n">month</span><span class="p">(</span><span class="n">mi_fecha_hora</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">abbr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; dic</span><span class="w">
</span></pre></table></code></div></div><blockquote class="prompt-tip"><div><p>Dependiendo de la configuración de idioma de tu computador, así como el sistema operativo que estés usando, puede que la función te devuelva el nombre del mes o del día en otro idioma. Para forzar un idioma de salida de la función, debes usar el argumento <code class="language-plaintext highlighter-rouge">locale</code> con un código de idioma y país. Para español puedes usar <code class="language-plaintext highlighter-rouge">"es_ES"</code>.</p></div></blockquote><h3 id="zonas-horarias"><span class="mr-2">Zonas horarias</span><a href="#zonas-horarias" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Otro aspecto que debes saber manejar son las zonas horarias. Si estás trabajando con un set de datos que escapa a la jurisdicción de un país o que se desarrolla en una zona geográfica muy amplia, puedes encontrarte con fechas que están en distintos husos horarios. Hay 3 operaciones que vas a aprender:</p><ul><li>Definir la zona horaria de la fecha apenas la lees: Para hacerlo, simplemente debes agregar a cualquiera de las funciones vistas con anterioridad el argumento <code class="language-plaintext highlighter-rouge">tz</code>, con el código de la zona horaria de tu interés. Puedes consultar una lista de zonas horarias en este <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">enlace</a>.</ul><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># Hora de Bogotá</span><span class="w">
</span><span class="n">mi_fecha_hora_bog</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"America/Bogota"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 -05"</span><span class="w">

</span><span class="c1"># Hora de Madrid</span><span class="w">
</span><span class="n">mi_fecha_hora_mad</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Europe/Madrid"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 CET"</span><span class="w">

</span><span class="c1"># Hora de Tokyo</span><span class="w">
</span><span class="n">mi_fecha_hora_tok</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Asia/Tokyo"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 JST"</span><span class="w">
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>Por defecto, la zona horaria que se incluye en las fechas es <code class="language-plaintext highlighter-rouge">UTC</code>, el<a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Tiempo Universal Coordinado</a>, que para efectos prácticos corresponde al tiempo del Meridiano de Greenwich.</p></div></blockquote><ul><li>Cambiar una fecha de una zona horaria a otra: La función <code class="language-plaintext highlighter-rouge">with_tz()</code> permite cambiar una fecha de una zona horaria a otra en horario local. Esta función tiene dos argumentos principales: la fecha que queremos convertir y la zona horaria objetivo.</ul><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># Hora de Bogotá</span><span class="w">
</span><span class="n">mi_fecha_hora_bog</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"America/Bogota"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 -05"</span><span class="w">

</span><span class="c1"># Hora de Bogotá en hora local de Madrid</span><span class="w">
</span><span class="n">mi_fecha_hora_mad2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">with_tz</span><span class="p">(</span><span class="n">mi_fecha_hora_bog</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Europe/Madrid"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-11 01:30:00 CET"</span><span class="w">

</span><span class="c1"># Hora de Bogotá en hora local de Tokyo</span><span class="w">
</span><span class="n">mi_fecha_hora_tok2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">with_tz</span><span class="p">(</span><span class="n">mi_fecha_hora_bog</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Asia/Tokyo"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-11 09:30:00 JST"</span><span class="w">
</span></pre></table></code></div></div><ul><li>Forzar una zona horaria sin cambiar la hora original: La función <code class="language-plaintext highlighter-rouge">force_tz()</code> permite cambiar la zona horaria de una fecha sin hacer la transformación anterior. Es decir, conservando intacta la hora.</ul><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1"># Hora de Bogotá</span><span class="w">
</span><span class="n">mi_fecha_hora_bog</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"America/Bogota"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 -05"</span><span class="w">

</span><span class="c1"># Forzar la hora de Bogotá a hora de Madrid</span><span class="w">
</span><span class="n">mi_fecha_hora_mad3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">force_tz</span><span class="p">(</span><span class="n">mi_fecha_hora_bog</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Europe/Madrid"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 CET"</span><span class="w">

</span><span class="c1"># Forzar la hora de Bogotá a hora de Tokyo</span><span class="w">
</span><span class="n">mi_fecha_hora_tok3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">force_tz</span><span class="p">(</span><span class="n">mi_fecha_hora_bog</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Asia/Tokyo"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 JST"</span><span class="w">
</span></pre></table></code></div></div><h3 id="periodos"><span class="mr-2">Periodos</span><a href="#periodos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los periodos corresponden a los espacios de tiempo en unidades que usamos en el día a día, como años, meses, semanas o días. Es decir que incorporan características como horarios de verano, número de días de los meses o años bisiestos. Estos objetos te pueden servir para ubicar fechas que ocurren con cierta periodicidad específica en <em>términos humanos</em>.</p><p>La siguiente tabla resume las funciones que puedes usar para crear periodos. No incluyo una columna de unidad porque, por construcción, los periodos no tienen siempre la misma duración en segundos.</p><div class="table-wrapper"><table><thead><tr><th>Periodo<th>Función de <code class="language-plaintext highlighter-rouge">lubridate</code><tbody><tr><td>Años<td>years()<tr><td>Meses<td>months()<tr><td>Semanas<td>weeks()<tr><td>Días<td>days()<tr><td>Horas<td>hours()<tr><td>Minutos<td>minutes()<tr><td>Segundos<td>seconds()<tr><td>Milisegundos<td>milliseconds()<tr><td>Microsegundos<td>microseconds()</table></div><p>Puedes obtener el mismo día del próximo año de la siguiente manera:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 UTC"</span><span class="w">

</span><span class="c1"># Misma fecha en el próximo año</span><span class="w">
</span><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">years</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2023-12-10 19:30:00 UTC" </span><span class="w">
</span></pre></table></code></div></div><h3 id="duraciones"><span class="mr-2">Duraciones</span><a href="#duraciones" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Por el contrario, las duraciones corresponden a espacios de tiempo exactos, medidos en segundos. A las duraciones no les interesan las reglas de los calendarios –horarios de verano, número de días de los meses, años bisiestos–, por lo que pueden ser muy útiles cuando quieres automatizar procesos en tus scripts o guardar información sobre experimentos.</p><p>La siguiente tabla resume las unidades de tiempo que puedes manejar y a cuántos segundos equivalen:</p><div class="table-wrapper"><table><thead><tr><th>Duración<th># segundos<th>Función de <code class="language-plaintext highlighter-rouge">lubridate</code><tbody><tr><td>Años<td>31536000<td>dyears()<tr><td>Meses<td>2629800<td>dmonths()<tr><td>Semanas<td>604800<td>dweeks()<tr><td>Días<td>86400<td>ddays()<tr><td>Horas<td>3600<td>dhours()<tr><td>Minutos<td>60<td>dminutes()<tr><td>Segundos<td>1<td>dseconds()<tr><td>Milisegundos<td>0.001<td>dmilliseconds()<tr><td>Microsegundos<td>0.000001<td>dmicroseconds()</table></div><p>A modo de ejemplo, para obtener una fecha más una duración de un año puedes escribir lo siguiente:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 UTC"</span><span class="w">

</span><span class="c1"># Fecha + Duración de 1 año (31536000 segundos)</span><span class="w">
</span><span class="n">mi_fecha_hora</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dyears</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2023-12-11 01:30:00 UTC" </span><span class="w">
</span></pre></table></code></div></div><h3 id="intervalos"><span class="mr-2">Intervalos</span><a href="#intervalos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Los intervalos representan la diferencia de tiempo entre dos fechas y se pueden dividir entre periodos y duraciones para obtener su longitud en estas medidas. Estos se pueden calcular de dos maneras: llamando la función <code class="language-plaintext highlighter-rouge">interval()</code> con las dos fechas o escribiendo los caracteres <code class="language-plaintext highlighter-rouge">%--%</code> entre las dos fechas.</p><p>Por ejemplo, usando los casos anteriores podemos escribir algo como:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="n">mi_fecha_inicio</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2022-12-10 19:30:00"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2022-12-10 19:30:00 UTC"</span><span class="w">

</span><span class="n">mi_fecha_final</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ymd_hms</span><span class="p">(</span><span class="s2">"2023-02-10 19:30:00"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; "2023-02-10 19:30:00 UTC"</span><span class="w">

</span><span class="c1"># Intervalo calculado con la función interval()</span><span class="w">
</span><span class="n">mi_intervalo</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">interval</span><span class="p">(</span><span class="n">mi_fecha_inicio</span><span class="p">,</span><span class="w"> </span><span class="n">mi_fecha_final</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; 2022-12-10 19:30:00 UTC--2023-02-10 19:30:00 UTC</span><span class="w">

</span><span class="c1"># Intervalo calculado con %--%</span><span class="w">
</span><span class="n">mi_intervalo2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mi_fecha_inicio</span><span class="w"> </span><span class="o">%--%</span><span class="w"> </span><span class="n">mi_fecha_final</span><span class="w">
</span><span class="c1">#&gt; 2022-12-10 19:30:00 UTC--2023-02-10 19:30:00 UTC</span><span class="w">

</span><span class="c1"># Periodos del intervalo</span><span class="w">
</span><span class="n">mi_intervalo</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">months</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; 2</span><span class="w">

</span><span class="c1"># Duraciones del intervalo</span><span class="w">
</span><span class="n">mi_intervalo</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">dmonths</span><span class="p">(</span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; 2.036961</span><span class="w">
</span></pre></table></code></div></div><h2 id="integración-con-el-tidyverse"><span class="mr-2">Integración con el Tidyverse</span><a href="#integración-con-el-tidyverse" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Como lo mencioné anteriormente, <code class="language-plaintext highlighter-rouge">lubridate</code> está diseñado desde el comienzo para trabajar muy bien con las funciones del <code class="language-plaintext highlighter-rouge">tidyverse</code>. Esto significa que puedes ejecutar todas las funciones que viste con anterioridad con funciones como <code class="language-plaintext highlighter-rouge">group_by()</code>, <code class="language-plaintext highlighter-rouge">mutate()</code>, <code class="language-plaintext highlighter-rouge">filter()</code>, <code class="language-plaintext highlighter-rouge">sort()</code>, <code class="language-plaintext highlighter-rouge">summarise()</code>, etc.</p><p>Por ejemplo si tienes una columna con fechas <code class="language-plaintext highlighter-rouge">POSIXct</code> que registre algún evento, podrías agrupar por el año y el trimestre con un código así:</p><div class="language-R highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">dataframe</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
	</span><span class="n">group_by</span><span class="p">(</span><span class="n">anio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">(</span><span class="n">fecha</span><span class="p">),</span><span class="w"> </span><span class="n">trimestre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">quarter</span><span class="p">(</span><span class="n">fecha</span><span class="p">))</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
	</span><span class="n">summarise</span><span class="p">(</span><span class="n">promedio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">variable_interes</span><span class="p">))</span><span class="w">
</span></pre></table></code></div></div><p>¡Inténtalo! Verás que es muy fácil extrapolar todos los conceptos que vimos a tu flujo de trabajo ordinario.</p><h2 id="conclusión"><span class="mr-2">Conclusión</span><a href="#conclusión" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>¡Felicidades, ya sabes usar <code class="language-plaintext highlighter-rouge">lubridate</code>! Con las herramientas que aprendiste en este blog podrás desarrollar un gran número de tareas relacionadas con fechas. Como recursos adicionales, te dejo este <em><a href="https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf">cheat sheet</a></em> elaborado por Posit, que te ayudará a recordar las funciones de este paquete cuando las necesites. Cuando se publiquen, pondré los enlaces de los posts sobre cómo trabajar con fechas en <code class="language-plaintext highlighter-rouge">datetime</code> y <code class="language-plaintext highlighter-rouge">pandas</code> en Python.</p><p>Te invito a dejar un comentario abajo si tienes algún truco sobre el manejo de <code class="language-plaintext highlighter-rouge">lubridate</code> y, si te pareció útil este post, a compartirlo en tus redes sociales.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/r/'>R</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/fechas/" class="post-tag no-text-decoration" >fechas</a> <a href="/tags/datetimes/" class="post-tag no-text-decoration" >datetimes</a> <a href="/tags/lubridate/" class="post-tag no-text-decoration" >lubridate</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%C2%BFC%C3%B3mo+trabajar+con+fechas+en+R%3F+-+Camilo+Mart%C3%ADnez+Burgos&url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%C2%BFC%C3%B3mo+trabajar+con+fechas+en+R%3F+-+Camilo+Mart%C3%ADnez+Burgos&u=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2Fcomo-trabajar-con-fechas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/">3 razones que dificultan el trabajo con fechas</a><li><a href="/posts/como-trabajar-con-fechas-en-r/">¿Cómo trabajar con fechas en R?</a><li><a href="/posts/como-trabajar-con-fechas-en-python/">¿Cómo trabajar con fechas en Python?</a><li><a href="/posts/args-y-kwargs-en-python/">Args y Kwargs en Python</a><li><a href="/posts/como-escribir-un-problema-de-optimizacion-en-jupyter/">¿Cómo escribir un problema de optimización en Jupyter?</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/"><div class="card-body"> <em class="small" data-ts="1671145800" data-df="DD/MM/YYYY" > 15/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>3 razones que dificultan el trabajo con fechas</h3><div class="text-muted small"><p> Una de las tareas más habituales en el trabajo de un científico de datos tiene que ver con el manejo de fechas. Asumiendo que tus datos ya están ordenados, los campos que describen fechas te van a ...</p></div></div></a></div><div class="card"> <a href="/posts/como-trabajar-con-fechas-en-python/"><div class="card-body"> <em class="small" data-ts="1671463200" data-df="DD/MM/YYYY" > 19/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo trabajar con fechas en Python?</h3><div class="text-muted small"><p> En una publicación anterior te hablé sobre las dificultades que te puedes encontrar cuando trabajes con fechas en tus proyectos de ciencia de datos. Para que puedas resolverlas, estoy escribiendo u...</p></div></div></a></div><div class="card"> <a href="/posts/como-trabajar-con-fechas-en-pandas/"><div class="card-body"> <em class="small" data-ts="1671659400" data-df="DD/MM/YYYY" > 21/12/2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo trabajar con fechas en Pandas?</h3><div class="text-muted small"><p> El trabajo con fechas tiene numerosas complejidades, entre las que se cuentan el formato de escritura de las fechas, las zonas horarias y las diferentes formas de hablar de duraciones de tiempo. E...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/" class="btn btn-outline-primary" prompt="Anterior"><p>3 razones que dificultan el trabajo con fechas</p></a> <a href="/posts/como-trabajar-con-fechas-en-python/" class="btn btn-outline-primary" prompt="Nuevo"><p>¿Cómo trabajar con fechas en Python?</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'http://www.camartinezbu.com//posts/como-trabajar-con-fechas-en-r/'; this.page.identifier = '/posts/como-trabajar-con-fechas-en-r/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://camartinezbu.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { window.addEventListener("message", reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-77VL6HZ7DQ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-77VL6HZ7DQ'); }); </script>

<!DOCTYPE html><html lang="es-ES" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="4 paquetes que debes conocer para hacer mapas en R" /><meta property="og:locale" content="es_ES" /><meta name="description" content="Aqui una alternativa a ArcGIS o QGIS." /><meta property="og:description" content="Aqui una alternativa a ArcGIS o QGIS." /><link rel="canonical" href="http://www.camartinezbu.com//posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" /><meta property="og:url" content="http://www.camartinezbu.com//posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/" /><meta property="og:site_name" content="Camilo Martínez Burgos" /><meta property="og:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-01-17T09:45:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" /><meta property="twitter:title" content="4 paquetes que debes conocer para hacer mapas en R" /><meta name="twitter:site" content="@camartinezbu" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-12-15T18:47:32-05:00","datePublished":"2021-01-17T09:45:00-05:00","description":"Aqui una alternativa a ArcGIS o QGIS.","headline":"4 paquetes que debes conocer para hacer mapas en R","image":"https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.camartinezbu.com//posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/"},"url":"http://www.camartinezbu.com//posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/"}</script><title>4 paquetes que debes conocer para hacer mapas en R | Camilo Martínez Burgos</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Camilo Martínez Burgos"><meta name="application-name" content="Camilo Martínez Burgos"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/common/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Camilo Martínez Burgos</a></div><div class="site-subtitle font-italic">Ciencia de datos y programación</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>INICIO</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORÍAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>ETIQUETAS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVO</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE MI</span> </a><li class="nav-item"> <a href="/portfolio/" class="nav-link"> <i class="fa-fw fas fa-briefcase ml-xl-3 mr-xl-3 unloaded"></i> <span>PORTAFOLIO</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/camartinezbu" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/camartinezbu" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/camartinezbu/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['camartinezbu.contacto','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Inicio </a> </span> <span>4 paquetes que debes conocer para hacer mapas en R</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Entrada</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>4 paquetes que debes conocer para hacer mapas en R</h1><div class="post-meta text-muted"> <span> Publicado <em class="" data-ts="1610894700" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 17/01/2021 </em> </span> <span> Actualizado <em class="" data-ts="1671148052" data-df="DD/MM/YYYY" data-toggle="tooltip" data-placement="bottom"> 15/12/2022 </em> </span><div class="mt-3 mb-3"> <img data-src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/pexels-andrew-neel-2859169.jpg" class="preview-img bg" alt="Preview Image" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> Por <em> <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1189 palabras"> <em>6 min</em> de lectura</span></div></div></div><div class="post-content"><p>Así que decidiste aprender a usar R para trabajar con mapas. Esta guia te dará las herramientas básicas para que puedas hacerlo, incluyas visualizaciones de mapas en tu flujo de trabajo y te motives a hacer análisis espacial con este lenguaje.</p><h2 id="código-vs-interfaces-de-usuario"><span class="mr-2">Código vs interfaces de usuario</span><a href="#código-vs-interfaces-de-usuario" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Antes de comenzar, lo primero que tienes que saber es que para hacer mapas en R vas a tener que escribir código. No es código muy complejo si tienes una familiaridad básica con este lenguaje de programación, pero quizás al principio tiene una curva de aprendizaje más empinada que programas como ArcGIS (o su alternativa Open Source <a href="https://qgis.org/en/site/forusers/download.html">QGIS</a>) en los que puedes interactuar a través de menús y botones con tu mouse.</p><p>Sin embargo, si ya estás trabajando en un ambiente de R, si quieres automatizar la creación de muchos mapas con estructuras de control - los bucles con <code class="language-plaintext highlighter-rouge">for</code>-, o si te gustaría incluir fácilmente tu análisis en un dashboard de <code class="language-plaintext highlighter-rouge">shiny</code>, realizar mapas de esta forma puede ser una muy buena alternativa.</p><h2 id="dónde-consigo-los-mapas"><span class="mr-2">¿Dónde consigo los mapas?</span><a href="#dónde-consigo-los-mapas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Lo primero que te puedes estar preguntando es: <em>¿Pero y dónde encuentro los mapas para trabajar?</em> Afortunadamente, en línea hay muchos repositorios de información con atributos espaciales. Aqui va una lista de enlaces que te pueden ser de utilidad para empezar.</p><h3 id="para-colombia"><span class="mr-2">Para Colombia</span><a href="#para-colombia" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><a href="https://geoportal.dane.gov.co/servicios/descarga-y-metadatos/descarga-mgn-marco-geoestadistico-nacional/">El Marco Geoestadístico Nacional</a> del DANE contiene los polígonos del país, sus departamentos y municipios, con revisiones en 2005, 2012, 2017, 2018 y 2020.<li><a href="https://geoportal.igac.gov.co/contenido/datos-abiertos-igac">El portal de Datos Abiertos del IGAC</a> tiene información de agrología, cartografía, geodesia, entre otros.<li><a href="https://www.ideca.gov.co/buscador?topic=All&amp;metadata=All&amp;newest=All&amp;entity=All&amp;resource=All&amp;content_type=map&amp;res=true&amp;sort_by=created&amp;sort_order=DESC">El IDECA</a> tiene una gran cantidad de información para Bogotá para un gran número de temáticas: Ordenamiento Territorial, Salud, Ambiente, Seguridad, entre otros.<li><a href="https://www.medellin.gov.co/geomedellin/index.hyg">GeoMedellín</a> aloja numerosos conjuntos de información geolocalizada para Medellín, también separados por temas.</ul><h3 id="para-el-resto-del-mundo"><span class="mr-2">Para el resto del Mundo</span><a href="#para-el-resto-del-mundo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>El <a href="https://gadm.org/download_country_v3.html">GADM</a> del Centro de Ciencias Espaciales de la Universidad de California, Davis tiene los shapefiles para todos los países y sus subdivisiones. Dependiendo el país que escojas habrá mayor o menor calidad de la información.</ul><p>Esta no es una lista exhaustiva de fuentes de información, así que si conoces otra fuente que creas que debe estar allí, compártemela para añadirla.</p><h2 id="el-formato-shapefile"><span class="mr-2">El formato shapefile</span><a href="#el-formato-shapefile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>El formato más común con el que te vas a encontrar es el <em>shapefile</em>. Este formato es desarollado por ESRI, la compañía que creó ArcGIS, y consiste en varios archivos con extensiones <code class="language-plaintext highlighter-rouge">*.dbf</code>, <code class="language-plaintext highlighter-rouge">*.prj</code>, <code class="language-plaintext highlighter-rouge">*.sbn</code>, <code class="language-plaintext highlighter-rouge">*.sbx</code>, <code class="language-plaintext highlighter-rouge">*.shp</code>, <code class="language-plaintext highlighter-rouge">*.shx</code>, entre otros.</p><p>Para efectos prácticos, siempre que querramos importar o modificar el shapefile en R, vamos a referirnos únicamente al archivo <code class="language-plaintext highlighter-rouge">*.shp</code> y R se encargará del resto. Asímismo, es importante que <strong>no borres los archivos con las demás extensiones</strong>, dado que para que el shapefile funcione los necesitas a todos.</p><p>Eventualmente, te puedes encontrar con otros formatos como el <em>GeoPackage</em> o <em>geodatabase</em>, pero la manera de trabajar con ellos en R es my similar a la del <em>shapefile</em>.</p><h2 id="1-simple-features-sf"><span class="mr-2">1. Simple Features: sf</span><a href="#1-simple-features-sf" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Simple Features es un estándar para la representación de objetos espaciales de la vida real a través de geometrías -puntos, lineas, polígonos, etc. - en los sistemas de información geográfica. El paquete <code class="language-plaintext highlighter-rouge">sf</code> implementa este estándar en R y es con el que vamos a trabajar.</p><p>En esta guía no vamos a cubrir cosas específicas como las funciones para personalizar los mapas, el sistema de coordenadas de los shapefiles u operaciones con y entre shapes. Por ahora solo vamos a importar un shape a R.</p><p>Voy a usar el mapa de las localidades de la Bogotá <a href="https://www.ideca.gov.co/recursos/mapas/localidad-bogota-dc">disponible en la página del IDECA</a> para hacer los siguiente ejemplos. Lo primero, y lo único, que vamos a hacer con <code class="language-plaintext highlighter-rouge">sf</code> será importar el shapefile. Para ello, vamos a correr el siguiente código:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">install.packages</span><span class="p">(</span><span class="s1">'sf'</span><span class="p">)</span><span class="w"> </span><span class="c1"># Si no has instalado el paquete aún</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span><span class="w">

</span><span class="n">mi_shape</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sf</span><span class="o">::</span><span class="n">st_read</span><span class="p">(</span><span class="s1">'Loca.shp'</span><span class="p">)</span><span class="w"> </span><span class="c1"># Debes modificar el contenido de st_read dependiendo de dónde tengas guardado el archivo.</span><span class="w">
</span></pre></table></code></div></div><p>Si todo salio bien, deberías tener un objeto en r con clase <code class="language-plaintext highlighter-rouge">sf</code>, que contiene un mapa con las localidades de Bogotá.</p><h2 id="2-ggplot2"><span class="mr-2">2. ggplot2</span><a href="#2-ggplot2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>La primera forma de visualizar este objeto es usando el paquete <code class="language-plaintext highlighter-rouge">ggplot2</code> del <code class="language-plaintext highlighter-rouge">tidyverse</code>. Este paquete es una de las librerías más usadas para crear gráficos en R y tiene muchas opciones para ajustar cada detalle.</p><p>Visualizar un mapa en ggplot es muy sencillo. Así como tienes funciones como <code class="language-plaintext highlighter-rouge">geom_point()</code> o <code class="language-plaintext highlighter-rouge">geom_bar()</code> para crear un gráfico de puntos o un gráfico de barras, el paquete <code class="language-plaintext highlighter-rouge">sf</code> contiene una función <code class="language-plaintext highlighter-rouge">geom_sf()</code> que se enlaza con <code class="language-plaintext highlighter-rouge">ggplot2</code> y te permite visualizar el mapa.</p><p>A modo de ejemplo, el resultado del siguiente código será:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_sf</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/mapa_ggplot.png" alt="Mapa de las localidades de Bogotá usando ggplot2" data-proofer-ignore> <em>Mapa de las localidades de bogotá usando ggplot2</em></p><p>De aqui en adelante, puedes jugar con las opciones de temas de ggplot2, para cambiar el color de fondo, la fuente, los ejes, entre muchas otras cosas. Por ejemplo, intenta añadir al final del código anterior <code class="language-plaintext highlighter-rouge">+ theme_void()</code>. Casi cualquier configuración que funcionaría para un ggplot normal, funciona para un mapa hecho de esta forma.</p><h2 id="3-tmap"><span class="mr-2">3. tmap</span><a href="#3-tmap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">tmap</code> es un paquete diseñado específicamente para la creación de mapas temáticos con <code class="language-plaintext highlighter-rouge">sf</code>. <code class="language-plaintext highlighter-rouge">tmap</code> tiene una sintaxis muy parecida a la de ggplot y tiene la ventaja de que no tienes que lidiar con etiquetas de los ejes, color de fondo, etc. Ya está diseñado para sacar un mapa más limpio.</p><p>Al ejecutar los siguientes comandos, tendrás como resultado:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">tmap</span><span class="p">)</span><span class="w">

</span><span class="n">tm_shape</span><span class="p">(</span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">tm_polygons</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><img data-src="https://raw.githubusercontent.com/camartinezbu/blog-images/main/posts/2021-01-17-4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/mapa_tmap.png" alt="Mapa de las localidades de Bogotá usando tmap" data-proofer-ignore> <em>Mapa de las localidades de bogotá usando tmap</em></p><p>Una vez estés familiarizado con este paquete, te recomiendo revisar el paquete <code class="language-plaintext highlighter-rouge">tmaptools</code>, que contiene algunas funciones útiles para trabajar con <code class="language-plaintext highlighter-rouge">tmap</code>.</p><h2 id="4-leaflet"><span class="mr-2">4. leaflet</span><a href="#4-leaflet" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Finalmente, el paquete <code class="language-plaintext highlighter-rouge">leaflet</code> ofrece una funcionalidad mucho más interesante: Interactividad. Con este paquete, puedes crear un mapa en el que podrás arrastrar, hacer zoom, definir que hace cuando haces clic o cuando pasas el mouse por encima de un polígono, entre muchas otras cosas.</p><p>Lo mejor de todo, la sintaxis es parecida a los dos métodos anteriores, por lo que construir un mapa más complejo sigue siendo muy sencillo usando <code class="language-plaintext highlighter-rouge">leaflet</code>.</p><p>Del siguiente código, resulta:</p><div class="language-r highlighter-rouge"><div class="code-header"> <span data-label-text="R"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="¡Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">library</span><span class="p">(</span><span class="n">leaflet</span><span class="p">)</span><span class="w">

</span><span class="n">leaflet</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mi_shape</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">addTiles</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="c1"># Esta función añade el mapa de fondo, que peudes cambiar por muchas opciones</span><span class="w">
    </span><span class="n">addPolygons</span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">LocNombre</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><div style="height: 30em; padding: 0; display: flex; justify-content: center;" class="htmlwidget"> <iframe src="/assets/leaflet/mapa_leaflet_files/mapa_leaflet.html" style="width: 100%; height:100%;"></iframe></div><p><em>Mapa de las localidades con leaflet</em></p><p>Una gran ventaja de trabajar con <code class="language-plaintext highlighter-rouge">leaflet</code> es que puedes integrar los mapas interactivos con tableros de visualización con <code class="language-plaintext highlighter-rouge">shiny</code>, conservando la interactividad con los usuarios. Si quieres saber cómo funciona <code class="language-plaintext highlighter-rouge">shiny</code>, revisa la introducción que hice en <a href="https://camartinezbu.github.io/posts/como-hacer-un-dashboard-en-r/">esta entrada de blog</a>.</p><h2 id="bonus-haz-el-mapa-de-las-calles-de-tu-ciudad"><span class="mr-2">Bonus: Haz el mapa de las calles de tu ciudad</span><a href="#bonus-haz-el-mapa-de-las-calles-de-tu-ciudad" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Recientemente encontré <a href="https://ggplot2tutor.com/streetmaps/streetmaps/">este tutorial</a> de Christian Burkhart (<a href="https://twitter.com/ChBurkhart">@ChBurkhart</a>) en el que describe cómo hacer un mapa usando <code class="language-plaintext highlighter-rouge">osmdata</code> y <code class="language-plaintext highlighter-rouge">ggplot2</code>. Te invito a que hagas este ejercicio, que no te tomará más de 5 minutos. <a href="https://twitter.com/camartinezbu/status/1340697885042745347">Yo lo hice para Bogotá</a> y no quedó tan mal.</p><p>Con estos 4 paquetes, tienes lista una caja de herramientas para empezar a trabajar con mapas y al jugar con las opciones, podrás hacer visualizaciones profesionales y de manera muy fácil.</p><h2 id="lecturas-relacionadas"><span class="mr-2">Lecturas relacionadas</span><a href="#lecturas-relacionadas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://r-spatial.github.io/sf/index.html">Documentación de sf</a><li><a href="https://cran.r-project.org/web/packages/tmap/vignettes/tmap-getstarted.html">Documentación de tmap</a><li><a href="https://rstudio.github.io/leaflet/">Documentación de leaflet para R</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/r/'>R</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mapas/" class="post-tag no-text-decoration" >mapas</a> <a href="/tags/r/" class="post-tag no-text-decoration" >r</a> <a href="/tags/leaflet/" class="post-tag no-text-decoration" >leaflet</a> <a href="/tags/sf/" class="post-tag no-text-decoration" >sf</a> <a href="/tags/ggplot/" class="post-tag no-text-decoration" >ggplot</a> <a href="/tags/tmap/" class="post-tag no-text-decoration" >tmap</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta entrada está licenciada bajo <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> por el autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartir</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=4+paquetes+que+debes+conocer+para+hacer+mapas+en+R+-+Camilo+Mart%C3%ADnez+Burgos&url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2F4-paquetes-que-debes-conocer-para-hacer-mapas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=4+paquetes+que+debes+conocer+para+hacer+mapas+en+R+-+Camilo+Mart%C3%ADnez+Burgos&u=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2F4-paquetes-que-debes-conocer-para-hacer-mapas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Fwww.camartinezbu.com%2F%2Fposts%2F4-paquetes-que-debes-conocer-para-hacer-mapas-en-r%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copiar enlace" data-title-succeed="¡Enlace copiado!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Actualizado recientemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/3-razones-que-dificultan-el-trabajo-con-fechas/">3 razones que dificultan el trabajo con fechas</a><li><a href="/posts/como-trabajar-con-fechas-en-r/">¿Cómo trabajar con fechas en R?</a><li><a href="/posts/como-trabajar-con-fechas-en-python/">¿Cómo trabajar con fechas en Python?</a><li><a href="/posts/args-y-kwargs-en-python/">Args y Kwargs en Python</a><li><a href="/posts/como-escribir-un-problema-de-optimizacion-en-jupyter/">¿Cómo escribir un problema de optimización en Jupyter?</a></ul></div><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contenido</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Lecturas adicionales</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/hablemos-de-proyecciones/"><div class="card-body"> <em class="small" data-ts="1612105200" data-df="DD/MM/YYYY" > 31/01/2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hablemos de proyecciones</h3><div class="text-muted small"><p> Ahora que conoces algunos paquetes para visualizar mapas, es importante que entiendas qué son las proyecciones, pues te van a servir para hacer análisis espacial más adelante. Un problema de geome...</p></div></div></a></div><div class="card"> <a href="/posts/una-introduccion-a-jupyter/"><div class="card-body"> <em class="small" data-ts="1601327700" data-df="DD/MM/YYYY" > 28/09/2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Una introducción a Jupyter</h3><div class="text-muted small"><p> Al trabajar en un proyecto que requiere gran cantidad de código, llenar el archivo con comentarios a través de numerales (#) puede no ser la mejor solución para entender qué estamos haciendo o para...</p></div></div></a></div><div class="card"> <a href="/posts/como-hacer-un-dashboard-en-r/"><div class="card-body"> <em class="small" data-ts="1597684200" data-df="DD/MM/YYYY" > 17/08/2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>¿Cómo hacer un dashboard en R?</h3><div class="text-muted small"><p> Los tableros o dashboards son herramientas muy útiles para extraer conclusiones de los datos, en ocasiones más convenientes que realizar muchas gráficas en excel para luego incluirlas en una presen...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/cuidado-con-los-decimales/" class="btn btn-outline-primary" prompt="Anterior"><p>¡Cuidado con los decimales!</p></a> <a href="/posts/estructuras-de-datos-basicas-en-python/" class="btn btn-outline-primary" prompt="Nuevo"><p>Estructuras de datos básicas en python</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'http://www.camartinezbu.com//posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/'; this.page.identifier = '/posts/4-paquetes-que-debes-conocer-para-hacer-mapas-en-r/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://camartinezbu.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { window.addEventListener("message", reloadDisqus); } </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Etiquetas populares</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/r/">r</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/datetimes/">datetimes</a> <a class="post-tag" href="/tags/fechas/">fechas</a> <a class="post-tag" href="/tags/jupyter/">jupyter</a> <a class="post-tag" href="/tags/lubridate/">lubridate</a> <a class="post-tag" href="/tags/concepto/">concepto</a> <a class="post-tag" href="/tags/dataviz/">dataviz</a> <a class="post-tag" href="/tags/ggplot/">ggplot</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/camartinezbu">Camilo Martínez Burgos</a>. <span data-toggle="tooltip" data-placement="top" title="Salvo que se indique explícitamente, las entradas de este blog están licenciadas bajo la Creative Commons Attribution 4.0 International (CC BY 4.0) License por el autor.">Algunos derechos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Hecho con <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando el tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">¡Oops! No se encuentran resultados.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/es.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-77VL6HZ7DQ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-77VL6HZ7DQ'); }); </script>

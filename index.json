[{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/","section":"camartinezbu.com","summary":"","title":"camartinezbu.com","type":"page"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/categories/chatgpt/","section":"Categories","summary":"","title":"ChatGPT","type":"categories"},{"content":"Las herramientas basadas en modelos grandes de lenguaje (LLM ‚Äì Large Language Models) han estado en los √∫ltimos meses en el foco de la conversaci√≥n. No s√≥lo por las capacidades que tienen para generar textos de todo tipo de temas, sino tambi√©n por la explosi√≥n en el n√∫mero de modelos disponibles, tanto de empresas privadas como de iniciativas open source.\nNo es sorpresa entonces que estos modelos pueden convertirse en una adici√≥n valiosa a tu caja de herramientas, ayud√°ndote a resolver problemas, obtener ideas y optimizar tu proceso de an√°lisis de datos. A continuaci√≥n, quiero darte algunos consejos generales sobre c√≥mo usar uno de estos modelos ‚ÄìChatGPT‚Äì y proponerte algunos ejemplos espec√≠ficos sobre c√≥mo aprovecharlo al m√°ximo en tu flujo de trabajo de ciencia de datos.\nUn aviso preliminar # Aunque ChatGPT puede ser una herramienta √∫til para obtener respuestas r√°pidas y explorar ideas, no olvides que no reemplaza las herramientas de b√∫squeda convencionales. Aunque ChatGPT puede ofrecerte informaci√≥n relevante y, a menudo, orientarte en la direcci√≥n correcta, sus respuestas pueden no ser tan precisas o completas como las que puedes obtener de otras fuentes.\nA la par de los consejos que te dar√© m√°s adelante, no dependas exlusivamente de esta herramienta. Por el contrario, complementa su uso con la b√∫squeda de documentaci√≥n, foros de discusi√≥n como StackOverflow o recursos especializados de ciencia de datos.\nEsto te permitir√° tener una comprensi√≥n m√°s s√≥lida de los conceptos, t√©cnicas y enfoques relacionados con tus proyectos, y a la vez, te da la posibilidad de sacarle a√∫n m√°s provecho a ChatGPT.\nDicho lo anterior, ahora s√≠ vamos a ver los consejos generales para usar esta herramienta.\nConsejos generales # S√© claro y preciso # Al interactuar con herramientas de chat como ChatGPT, es muy importante que le des instrucciones claras y espec√≠ficas para obtener los resultados deseados. Para esto ayuda mucho que est√©s famililarizado con el tema de tu inter√©s, porque conoces los conceptos y las palabras espec√≠ficas de este tema y as√≠ podr√°s obtener respuestas de mayor utilidad.\nPor ejemplo, en vez de preguntar algo como \u0026ldquo;¬øC√≥mo puedo mejorar mi modelo de clasificaci√≥n?\u0026rdquo;, intenta ser m√°s espec√≠fico: \u0026ldquo;Dame tres t√©cnicas efectivas para mejorar la precisi√≥n de mi modelo de clasificaci√≥n en Python\u0026rdquo;.\nDa contexto sobre lo que est√°s haciendo # Cuando interact√∫es con ChatGPT, dale algunas oraciones de contexto sobre lo que vas a hacer. Intenta describir brevemente el problema que est√°s abordando, los datos que tienes disponibles y cualquier informaci√≥n adicional de contexto que consideres relevante. Esto ayudar√° a que la respuesta que obtengas est√© m√°s alineada con tu entrada.\nPor ejemplo, en vez de escribir \u0026ldquo;Expl√≠came c√≥mo hacer una regresi√≥n log√≠stica\u0026rdquo;, intenta \u0026ldquo;Necesito implementar una regresi√≥n log√≠stica en Python para resolver un problema de clasificaci√≥n binaria de un conjunto de datos con la variable objetivo y 5 variables de explicaci√≥n. Dame el c√≥digo de Python y expl√≠came c√≥mo funciona\u0026rdquo;.\nDescribe el formato de salida esperado # Si necesitas un formato particular para tu resultado o que este cumpla con alguna m√©trica puntual, ind√≠calo en el prompt. Esto puede ser desde un n√∫mero de palabras o p√°rrafos deseados en la respuesta, hasta una lista expl√≠cita de c√≥mo quieres tus resultados.\nPor ejemplo, en vez de preguntar: \u0026ldquo;¬øC√≥mo lidiar con im√°genes de distintos tama√±os para un problema de clasificaci√≥n de im√°genes en deep learning?\u0026rdquo;, te sugiero intentar: \u0026ldquo;¬øC√≥mo puedo lidiar con im√°genes de distintos tama√±os para un problema de clasificaci√≥n de im√°genes en deep learning? Por favor devu√©lveme la respuesta en el siguiente formato: - Acercamiento n√∫mero N, - T√≠tulo, - Descripci√≥n, - Pros, - Contras, - Implementaci√≥n de c√≥digo\u0026rdquo;.\nJuego de rol: Experto en ciencia de datos # Finalmente, sobre todo cuando quieres obtener explicaciones de alg√∫n concepto o descripciones paso paso de alg√∫n c√≥digo, suele servir que le indiques a ChatGPT que asuma el rol de alg√∫n experto en un tema espec√≠fico y hacerle preguntas desde esa perspectiva.\nPor ejemplo, en vez de preguntarle: \u0026ldquo;¬øQu√© buenas pr√°cticas existen para el an√°lisis exploratorio de datos?\u0026rdquo;, intenta con \u0026ldquo;Eres un experto en an√°lisis exploratorio de datos y necesito recomendaciones sobre las mejores pr√°cticas y las visualizaciones m√°s efectivas para identificar correlaciones en un conjunto de datos. ¬øQu√© me sugieres?\u0026rdquo;.\nUsos en Ciencia de Datos # Ahora vamos a explorar algunos casos de uso espec√≠ficos de ChatGPT para tareas de ciencia de datos. El objetivo de esta secci√≥n es que te inspires para escribir prompts que te ayuden en tu d√≠a a d√≠a.\nEjemplo 1.: Explicaci√≥n de expresiones regulares # Las expresiones regulares son herramientas muy poderosas a la hora de trabajar con textos, pero a simple vista, pueden ser complejas de leer. Especialmente si est√°s lidiando con expresiones muy largas o complejas.\nPodr√≠as intentar darle un ejemplo de expresi√≥n regular y hacerle preguntas a ChatGPT como:\n\u0026ldquo;¬øPodr√≠as explicar c√≥mo funciona esta expresi√≥n regular?\u0026rdquo; \u0026ldquo;¬øHay alguna forma m√°s eficiante de escribir esta expresi√≥n regular para obtener el mismo resultado?\u0026rdquo; \u0026ldquo;¬øCu√°les son los posibles casos de uso donde esta expresi√≥n regular podr√≠a fallar?\u0026rdquo; Ejemplo 2: Ayuda con pandas y manipulaci√≥n de DataFrames # Si est√°s trabajando con esta librer√≠a de Python y tienes dudas sobre c√≥mo realizar una operaci√≥n espec√≠fica en un DataFrame, puedes usar ChatGPT para resolverlas. Recuerda los consejos que te di al inicio del post y dale contexto sobre la estructura de tu DataFrame y describe la tarea que quieres reallizar.\nPuedes preguntarle cosas como:\n\u0026ldquo;¬øPuedes sugerirme c√≥mo aplicar una funci√≥n espec√≠fica a una columna en mi DataFrame de Pandas?\u0026rdquo; \u0026ldquo;¬øCu√°l es la mejor forma de filtrar los datos en funci√≥n de una condici√≥n en una columna espec√≠fica de mi DataFrame?\u0026rdquo; \u0026ldquo;¬øPuedes darme un ejemlo de c√≥mo hacer un an√°lisis exploratorio b√°sico de mi DataFrame utilizando las funciones de pandas?\u0026rdquo; Ejemplo 3: Optimizaci√≥n de hiperpar√°metros # Al entrenar modelos de Machine Learning, es fundamental encontrar los hiperpar√°metros √≥ptimos para mejorar el rendimiento de tus modelos. Puedes utilizar CHatGPT para obtener sugerencias y consejos sobre c√≥mo ajustar los hiperpar√°metros de un modelo en el que est√©s trabajando. Sin embargo, no olvides consultar directamente la documentaci√≥n y otros recursos.\nPara esta tarea, podr√≠as preguntarle cosas como:\n\u0026ldquo;¬øPodr√≠as indicarme qu√© hiperpar√°metros puedo ajustar para este modelo de clasificaci√≥n?\u0026rdquo; \u0026ldquo;¬øQu√© t√©cnicas hay para evaluar diferentes combinaciones de hiperpar√°metros y c√≥mo las implemento en c√≥digo?\u0026rdquo; \u0026ldquo;¬øHay alguna forma de automatizar la b√∫squeda de hiperpar√°metros √≥ptimos en Python?\u0026rdquo; Ejemplo 4: Extracci√≥n de datos mediante Web Scrapping # Puedes utilizar ChatGPT para obtener ayuda con la implementaci√≥n de Web Scraping o resolver dudas espec√≠ficas que tengas con esta tarea.\nAlgunas preguntas que podr√≠as hacer son:\n\u0026ldquo;¬øPodr√≠as sugerirme algunas librer√≠as de Python para realizar Web Scraping?\u0026rdquo; \u0026ldquo;¬øC√≥mo puedo extraer datos de una tabla espec√≠fica en una p√°gina web usando Web Scraping?\u0026rdquo; \u0026ldquo;¬øQu√© son los navegadores fantasma en el contexto de Web Scraping?\u0026rdquo; Ejemplo 5: Procesamiento de Lenguaje Natural (NLP) # Si has trabajado con texto sabes que hay una gran cantidad de librer√≠as que te permiten cumplir tareas de procesamiento de lenguaje natural. En esta aplicaci√≥n, ChatGPT tambi√©n puede ser √∫til para obtener consejos o para prototipar r√°pidamente.\nPuedes intentar preguntarle:\n\u0026ldquo;¬øExisten librer√≠as pre-entrenadas que pueden ayudame a clasificar autom√°ticamente el sentimiento de un texto?\u0026rdquo; \u0026ldquo;¬øCu√°les son las distintas aproximaciones paras tokenizar un texto en procesamiento de lenguaje natural? ¬øsus pros y sus contras?\u0026rdquo; \u0026ldquo;Sup√≥n que tengo un DataFrame con oraciones en espa√±ol. ¬øC√≥mo se ver√≠a el c√≥digo para hacer detecci√≥n de entidades nombradas?\u0026rdquo; Conclusi√≥n # Como pudiste ver a lo largo de este post, escribir los prompts para modelos de lenguaje que interact√∫an a trav√©s de chat ‚Äìcomo ChatGPT‚Äì es todo un arte. Si aplicas estos trucos, puedes mejorar la forma en la que estos modelos te ayudan a resolver problemas, prototipar ideas y optimizar tu flujo de trabajo. Sin embargo, no olvides complementar su uso con otras fuentes de informaci√≥n y motores de b√∫squeda para obtener respuestas m√°s precisas.\nEspero que estos tips te sirvan para sacar el m√°ximo provecho de ChatGPT en el campo de la ciencia de datos. Te invito a compartir estos tips con m√°s personas y a experimentar con distintas formas de escribir tus prompts. ¬°√âxitos en tu aprendizaje!\n","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/posts/descubre-como-usar-chatgpt-para-ciencia-de-datos/","section":"Publicaciones","summary":"Las herramientas basadas en modelos grandes de lenguaje (LLM ‚Äì Large Language Models) han estado en los √∫ltimos meses en el foco de la conversaci√≥n.","title":"Descubre c√≥mo usar ChatGPT para ciencia de datos","type":"posts"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/tags/prompts/","section":"Tags","summary":"","title":"Prompts","type":"tags"},{"content":" Conoce los art√≠culos que he escrito en espa√±ol üßê ","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/posts/","section":"Publicaciones","summary":" Conoce los art√≠culos que he escrito en espa√±ol üßê ","title":"Publicaciones","type":"posts"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/tags/tips/","section":"Tags","summary":"","title":"Tips","type":"tags"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/tags/trucos/","section":"Tags","summary":"","title":"Trucos","type":"tags"},{"content":"","date":"18 de mayo de 2023","externalUrl":null,"permalink":"/tags/tutorial/","section":"Tags","summary":"","title":"Tutorial","type":"tags"},{"content":"Si ya has trabajando en scripts o cuadernos de jupyter para alg√∫n proyecto de ciencia de datos, probablemente hayas experimentado problemas para manejar las rutas de archivos. En este post te quiero explicar el funcionamiento de pathlib, una librer√≠a que te facilitar√° la interacci√≥n con archivos en tu computador y que seguro te ser√° √∫til en tus proyectos de programaci√≥n.\nPathlib # pathlib es una librer√≠a de Python que te proporciona una forma amigable y consistente para trabajar con rutas de archivo en tu computador. Esto lo hace a trav√©s de una aproximaci√≥n orientada a objetos, por lo que si ya tienes familiaridad con este paradigma, no tendr√°s muchos problemas en incorporarla en tu flujo normal de trabajo.\n¬øC√≥mo funciona? # Las rutas de archivo en pathlib se representan a trav√©s de un objeto de clase Path. Este objeto funciona como un string com√∫n y corriente, pero con m√©todos que lo hacen m√°s √∫til para trabajar con carpetas y archivos en tu computador.\nPara crear un objeto de clase Path, tienes que pasar un string con la ruta de archivo a la funci√≥n del mismo nombre as√≠:\nfrom pathlib import Path mi_ruta = Path(\u0026#34;carpeta/archivo.txt\u0026#34;) Esto creara un objeto llamado mi_ruta que representa un archivo llamado archivo.txt al interior de la carpeta con un nombre muy creativo: carpeta.\nEn Windows, la sintaxis de las rutas de archivo usa barras invertidas (\\) en lugar de las barras diagonales (/). Esto puede causar algunos problemas si Python piensa que est√°s tratando de \u0026ldquo;escapar\u0026rdquo; el siguiente caracter y no queriendo usar la barra invertida como tal.\nNo obstante, pathlib se encarga autom√°ticamente de estos errores, entonces no te tienes que preocupar por hacer ajustes manuales al string de la ruta de archivo.\nEnlazar rutas de archivo # Tambi√©n puedes crear rutas de archivo m√°s complejhas al concatenar varias partes usando el operador /, tal como lo har√≠as en una ruta de archivos ordinaria en MacOS o Linux. Por ejemplo, puedes hacer algo de este estilo:\ncarpeta_madre = Path(\u0026#34;Documentos\u0026#34;) carpeta_hija = carpeta_madre / \u0026#34;Proyectos\u0026#34; / \u0026#34;Proyecto_1\u0026#34; archivo_final = carpeta_hija / \u0026#34;documento.docx\u0026#34; En el ejemplo, carpeta_madre es una ruta que representa la carpeta Documentos. Luego la variable carpeta_hija crea un objeto tipo Path que representa una carpeta Proyecto_1 que se encuentra al interior de Proyectos, a su vez dentro de Documentos. Finalmente, archivo_final describe una ruta con un archivo documento.docx al interior de la carpeta Proyecto_1.\nAtributos de los objetos Path # Los objetos de clase Path tienen muchos atributos que te pueden ser de utilidad. Ac√° te dejo algunos de los m√°s usados:\nAtributos Descripci√≥n .name El √∫ltimo componente de la ruta .parent El directorio padre de la ruta .stem El √∫ltimo componente de la ruta sin la extensi√≥n .suffix La extensi√≥n de la √∫ltima componente de la ruta .drive La letra de la unidad del disco en sistemas Windows (p.e. C:\\) .root La parte inicial de la ruta que denota la ra√≠z del sistema de archivos (/ en Linux o C:\\ en Windows) Funciones √∫tiles # pathlib tambi√©n contiene varias functiones que puedes usar para interactuar m√°s directamente con archivos y directorios. En esta tabla te resumo algunos de ellos.\nFunciones Descripci√≥n mkdir() Crea un nuevo directorio en la ruta especificada exists() Verifica si la ruta especificada existe is_dir() Verifica si la ruta especificada es un directorio o carpeta is_file() Verifica si la ruta especificada es un archivo glob() Devuelve un iterador que produce todas las rutas que coinciden con un patr√≥n glob rglob() Devuelve un iterador que produce todas las rutas que coinciden con un patr√≥n glob de manera recursiva Los patrones glob son cadenas de texto que se usan para buscar archivos y directorios en la shell de Unix. Puedes encontrar m√°s informaci√≥n sobre ellos ac√°.\nAhora que conoces los conceptos b√°sicos, veamos un ejemplo pr√°ctico de c√≥mo podr√≠as usar pathlib en Python.\nEjemplo pr√°ctico # Supongamos que tienes un archivo llamado datos.csv en una carpeta llamada Proyecto en el escritorio de tu computador. Podr√≠as ir manualmente a la ubicaci√≥n del archivo con tu explorador de archivos y copiar la ruta. O tambi√©n podr√≠as hacerlo con lo que acabas de aprender sobre pathlib.\nPrimero, crea la ruta completa de de este archivo. En este ejemplo voy a usar la funci√≥n Path.home(), que devuelve un objeto Path que representa el directorio de inicio del usuario actual. En Windows esto deber√≠a ser algo como C:\\Users\\usuario, en Linux /home/usuario y en MacOS /Users/usuario. Arrancar en esta ruta puede ayudar a ubicar m√°s f√°cilmente los archivos o carpetas.\nfrom pathlib import Path ruta_completa = Path.home() / \u0026#34;Escritorio\u0026#34; / \u0026#34;proyecto\u0026#34; / \u0026#34;datos.csv\u0026#34; Ahora que tienes la ruta completa de tu archivo, puedes abrirlo y trabajar con √©l desde otras librer√≠as de acuerdo con tu necesidad. pathlib funciona con varias librer√≠as populares de Python como pandas, scikit-learn o torch.\nTambi√©n puedes aprovechar la funcionalidad de Pathlib de una forma m√°s program√°tica. Por ejemplo, podr√≠as usar c√≥digo para verificar si un archivo o carpeta existen antes de trabajar con ellos:\nfrom pathlib import Path ruta_completa = Path.home() / \u0026#34;Escritorio\u0026#34; / \u0026#34;proyecto\u0026#34; / \u0026#34;datos.csv\u0026#34; if ruta_completa.exists(): with open(ruta_completa, \u0026#34;r\u0026#34;) as datos: # Ejecuta alg√∫n c√°lculo con los datos print(\u0026#34;Archivo leido con √©xito.\u0026#34;) else: print(\u0026#34;El archivo no existe.\u0026#34;) En este caso, ruta_completa.exists() revisa si el archivo datos.csv existe en el lugar que le indicamos. Si el archivo existe, podemos abrirlo y hacer alguna operaci√≥n dentro el bloque de c√≥digo with. Si no, se imprime el mensaje \u0026quot;El archivo no existe.\u0026quot; en la consola.\nConclusi√≥n # Como puedes ver, pathlib es una librer√≠a muy √∫til para trabajar con archivos y directorios en Python. Los objetos de clase Path tienen varios atributos y funciones que te van a facilitar la vida a la hora de crear, eliminar y renombrar archivos y carpetas. As√≠ que es un activo muy √∫til para tu caja de herramientas de ciencia de datos.\n¬øQu√© otros usos se te ocurren para trabajar con pathlib?\nSi te pareci√≥ √∫til este art√≠culo, te invito a compartirlo con m√°s personas. ¬°√âxitos en tu aprendizaje!\n","date":"3 de mayo de 2023","externalUrl":null,"permalink":"/posts/aprende-a-manejar-rutas-de-archivo-con-pathlib/","section":"Publicaciones","summary":"Si ya has trabajando en scripts o cuadernos de jupyter para alg√∫n proyecto de ciencia de datos, probablemente hayas experimentado problemas para manejar las rutas de archivos.","title":"Aprende a manejar rutas de archivo con pathlib","type":"posts"},{"content":"","date":"3 de mayo de 2023","externalUrl":null,"permalink":"/tags/archivos/","section":"Tags","summary":"","title":"Archivos","type":"tags"},{"content":"","date":"3 de mayo de 2023","externalUrl":null,"permalink":"/tags/carpetas/","section":"Tags","summary":"","title":"Carpetas","type":"tags"},{"content":"","date":"3 de mayo de 2023","externalUrl":null,"permalink":"/categories/python/","section":"Categories","summary":"","title":"Python","type":"categories"},{"content":"Los decoradores en Python son una caracter√≠stica poderosa y √∫til que te permiten modificar o envolver el comportamiento de una funci√≥n sin modificar su c√≥digo original. Sin embargo, si vienes de otros lenguajes o eres principiante en programaci√≥n, puede que su funcionamiento sea un poco enredado.\nEn este art√≠culo quiero explicarte c√≥mo funcionan y darte algunos ejemplos b√°sicos para que puedas involucrarlos en tu flujo de trabajo ordinario en Python.\nLos decoradores # En Python, un decorador es una funci√≥n que toma otra funci√≥n como argumento y devuelve una nueva funci√≥n que generalmente agrega alguna funcionalidad al comportamiento original. Los decoradores se aplican utilizando el s√≠mbolo @ seguido del nombre de la funci√≥n decoradora justo encima de la funci√≥n que deseas decorar.\nCuando llamas a la funci√≥n decorada, en realidad est√°s llamando a la funci√≥n devuelta por el decorador, que puede realizar alguna tarea adicional antes o despu√©s de la ejecuci√≥n de la funci√≥n original.\nLa estructura general # Para implementar un decorador en Python, puedes seguir una estructura b√°sica como la que se presenta a continuaci√≥n:\ndef decorador(func): # Definir una nueva funci√≥n que \u0026#34;envuelve\u0026#34; la funci√≥n original def wrapper(*args, **kwargs): # Haz algo antes de llamar la funci√≥n original resultado = func(*args, **kwargs) # Haz algo despu√©s de llamar la funci√≥n original return result # Devuelve la nueva funci√≥n return wrapper Veamos paso a paso c√≥mo funciona el c√≥digo detr√°s del decorador. Primero, creas una funci√≥n llamada decorador que toma como argumento a otra funci√≥n llamada func. Al interior de decorador, creas otra funci√≥n que se llama wrapper, que como su nombre lo indica, tiene como objetivo \u0026ldquo;envolver\u0026rdquo; la funci√≥n func.\nHay que notar dos cosas sobre esta funci√≥n. Por un lado, que los argumentos de la funci√≥n wrapper son *args y **kwargs. Esto es porque no sabes los argumentos espec√≠ficos de todas las funciones a las que le puedes aplicar el decorador. *args y **kwargs garantizan que el resultado del decorador va a usar esos mismos argumentos.\nPor otro lado, que dentro de la funci√≥n wrapper se definen las acciones que vas a implementar antes o despu√©s de la funci√≥n original. En el ejemplo anterior, aparecen como dos mensajes en pseudoc√≥digo antes y despu√©s de resultado. ¬°Este es lugar donde los decoradores hacen su magia!\nComo puedes ver, el decorador devuelve la funci√≥n wrapper. Es decir, la funci√≥n original (func) que incluye los cambios dictados por el decorador.\nFinalmente, para aplicar el decorador a otra funci√≥n, simplemente debes escribir un arroba (@) seguido del nombre del decorador. Inmediatamente debajo, debes crear a la funci√≥n a la que le quieres aplicar el decorador. Algo as√≠:\n@decorador def mi_funcion(): # Tu funci√≥n especifica return # El resultado que quieres devolver con tu funci√≥n Medir el tiempo de ejecuci√≥n # Uno de los ejemplos cl√°sicos sobre los decoradores es la creaci√≥n de uno que ejecute una funci√≥n particular y te permita medir cu√°nto se demora en ejecutarse.\nVeamos c√≥mo funcionar√≠a siguiendo la estructura anterior. El pseudoc√≥digo asociado se ver√≠a algo as√≠:\n# Crear la funci√≥n decoradora, que tome como argumento otra funci√≥n # Definir la funci√≥n que envuelve (wrapper) la funci√≥n original # Calcular el tiempo de inicio de ejecuci√≥n # Ejecutar la funci√≥n original # Calcular el tiempo del fin de ejecucu√≥n # Imprimir el tiempo de ejecuci√≥n en consola # Devolver el resultado (en este caso la funci√≥n original) # Devolver la funci√≥n wrapper Como puedes ver, dado que lo que queremos hacer es calcular el tiempo de ejecuci√≥n, vamos a guardar dos momentos en el tiempo e imprimiremos la diferencia entre el tiempo de inicio y el de finalizaci√≥n.\nNo en todos los casos necesitas hacer algo antes y despu√©s de la funci√≥n original. Debes ajustar el decorador de acuerdo con tu uso espec√≠fico.\nSi esta estructura est√° clara, pasemos a c√≥mo se ver√≠a incluyendo el c√≥digo de Python:\nimport time # Crear la funci√≥n decoradora, que tome como argumento otra funci√≥n def tiempo_ejecucion(func): # Definir la funci√≥n que envuelve (wrapper) la funci√≥n original def wrapper(*args, **kwargs): # Calcular el tiempo de inicio de ejecuci√≥n tiempo_inicio = time.time() # Ejecutar la funci√≥n original resultado = func(*args, **kwargs) # Calcular el tiempo del fin de ejecucu√≥n tiempo_fin = time.time() # Imprimir el tiempo de ejecuci√≥n en consola print(f\u0026#39;{func.__name__} se demor√≥ {tiempo_fin - tiempo_inicio:.2f} segundos en su ejecuci√≥n.\u0026#39;) # Devolver el resultado (en este caso la funci√≥n original) return resultado # Devolver la funci√≥n wrapper return wrapper Varias precisiones en el c√≥digo anterior.\nEs necesario cargar el m√≥dulo time para poder calcular el momento en que arranca y termina la ejecuci√≥n de tu funci√≥n. Como lo vimos anteriormente, en la definici√≥n de wrapper, as√≠ como en la llamada de func dentro de su alcance, usamos los argumentos *args y **kwargs. No olvides incluirlos para que el decorador funcione correctamente. En el mensaje que se imprime en consola se est√° usando un f-string, una manera m√°s concisa de incluir los valores de variables en strings. Como puedes ver, el mensaje incluye el nonbre de la funci√≥n a la que le aplicas el decorador, as√≠ como el tiempo de ejecuci√≥n en segundos, redondeado a 2 d√≠gitos. El decorador en acci√≥n # Sup√≥n que quieres calcular cu√°nto se demora tu c√≥digo en ejecutar una funci√≥n que crea una list comprehension que calcula los cuadrados de los n√∫meros del 0 al n, donde n es un argumento que le pasas a la funci√≥n. Es decir, algo como esto:\ndef calcular_cuadrados(numero): return [i**2 for i in range(numero + 1)] calcular_cuadrados(9) # La salida en consola ser√≠a: # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] Como te puedes imaginar, en este ejemplo sencillo el tiempo de ejcuci√≥n va a redondearse a 0 segundos. No obstante, el decorador funcionar√° igual para funciones que se demoran m√°s en ejecutarse.\nSi quieres aplicar el decorador que creamos anteriormente, tienes que llamarlo con el caracter @ antes de la definici√≥n de la funci√≥n. Algo as√≠:\n@tiempo_ejecucion def calcular_cuadrados(numero): return [i**2 for i in range(numero + 1)] calcular_cuadrados(9) # La salida en consola ser√≠a: # calcular_cuadrados se demor√≥ 0.00 segundos en su ejecuci√≥n. # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81] Conclusi√≥n # Espero que con este post te quede un poco m√°s claro c√≥mo es el funcionamiento de los decoradores en Python. Para que lo puedas aplicar, te dejo la tarea de pensar en qu√© luegares de tu flujo de trabajo podr√≠as utilizar los decoradores.\nPiensa especialmente en tareas que tienes que hacer de manera reiterativa para m√∫ltiples funciones. Puede ser el c√°lculo de alguna estad√≠stica de resumen para una base de datos o la aplicaci√≥n de alg√∫n tema o t√≠tulo en tus gr√°ficos.\nEn los pr√≥ximos d√≠as te compartir√© varios ejemplos que pueden serte de utilidad, con la explicaci√≥n paso a paso de c√≥mo los constru√≠.\nEspero que te haya gustado este art√≠culo. Si te pareci√≥ √∫til, te invito a compartirlo con m√°s peronas. ¬°√âxitos en tu aprendizaje!\n","date":"7 de abril de 2023","externalUrl":null,"permalink":"/posts/como-funcionan-los-decoradores-en-python/","section":"Publicaciones","summary":"Los decoradores en Python son una caracter√≠stica poderosa y √∫til que te permiten modificar o envolver el comportamiento de una funci√≥n sin modificar su c√≥digo original.","title":"¬øC√≥mo funcionan los decoradores en Python?","type":"posts"},{"content":"","date":"7 de abril de 2023","externalUrl":null,"permalink":"/tags/concepto/","section":"Tags","summary":"","title":"Concepto","type":"tags"},{"content":"","date":"7 de abril de 2023","externalUrl":null,"permalink":"/tags/decoradores/","section":"Tags","summary":"","title":"Decoradores","type":"tags"},{"content":"","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/tags/colab/","section":"Tags","summary":"","title":"Colab","type":"tags"},{"content":"","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/tags/deepnote/","section":"Tags","summary":"","title":"Deepnote","type":"tags"},{"content":"Sin duda alguna, los cuadernos de Jupyter son una de las herramientas m√°s √∫tiles en el arsenal de un cient√≠fico de datos. Ayudan en el prototipado r√°pido de soluciones, as√≠ como en la documentaci√≥n y reproducibilidad de modelos, gracias a que permiten trabajar simult√°neamente con celdas de c√≥digo y celdas de texto usando Markdown.\nEn este post quiero contarte sobre dos herramientas que me gusta usar para trabajar con cuadernos de Jupyter: Google Colab y Deepnote. Adem√°s de permitir la ejecuci√≥n de tus cuadernos en servidores remotos, tienen varias funcionalidad espec√≠ficas que puedes encontrar de utilidad.\nIntroducci√≥n # Google Colab, es un servicio de Google que te permite ejecutar cuadernos de Jupyter en sus servidores. Dado que est√° inmerso en la suite de productos de Google, puedes hacer interactuar con gran facilidad el cuaderno con archivos que tengas en la nube de Google Drive. Arrancar a trabajar con Colab es muy f√°cil, dado que te provee un ambiente de trabajo que tiene instalados Python 3.8, as√≠ como muchas librer√≠as que se usan a menudo en el campo de la ciencia de datos, como Plotly, Numpy, Pandas, Matplotlib o Tensorflow.\nPor su parte, Deepnote es un producto que consiste en cuadernos de Jupyter que te permiten trabajar de forma colaborativa. Los cuadernos de Deepnote permiten la conexi√≥n con fuentes de datos como Google BigQuery, Snowflakle, PostgreSQL, Amazon RedShift, entre otros. Adem√°s de varias versiones de Python, los cuadernos de Deepnote tambi√©n incluyen ambientes con varias versiones de R.\nT√©cnicamente, Google Colab tambi√©n tiene la opci√≥n de trabajar con ambientes de R. No obstante, la interfaz de Colab no permite seleccionar este ambiente; es necesario entrar a trav√©s de un enlace como este https://colab.research.google.com/notebook#create=true\u0026amp;language=r. E incluso en ese escenario, Deepnote ofrece mayor facilidad para cambiar entre versiones de Python y R.\nFunciones y caracter√≠sticas # Google Colab te ofrece la experiencia m√°s parecida a los cuadernos de Jupyter est√°ndar. Te permite crear celdas de texto y c√≥digo, en los que puedes incluir im√°genes, videos, enlaces a otros cuadernos, etc. Asimismo, incluye todas las funciones de magics de jupyter. Estas son l√≠neas de c√≥digo que puedes escribir el inicio de la celda para cambiar la manera como se ejecuta. Algo as√≠ como decoradores para el contenido de la celda.\nPor ejemplo, si escribes %%timeit al inicio de una celda en Colab, la salida te mostrar√° el tiempo de ejecuci√≥n del c√≥digo que est√° en ella.\nLa cosa se pone m√°s interesante con Deepnote. Adem√°s de las celdas de texto y c√≥digo, Deepnote incluye celdas de SQL, de Gr√°ficos y de Entrada. Veamos qu√© hace cada una de ellas.\nSQL: Para proyectos en los que tienes enlazada una base de datos SQL, Deepnote te permite interactuar directamente con queries desde el cuaderno y trabajar con el resultado como si fuera un DataFrame de Pandas. Por lo pronto, esta funci√≥n sirve √∫nicamente para los cuadernos con Python. Fuente: Documentaci√≥n de Deepnote\nGr√°ficos: Las celdas de gr√°ficos permiten crear visualizaciones de datos de DataFrames de pandas sin usar una l√≠nea de c√≥digo. En vez de tener que buscar la documentaci√≥n de matplotlib o seaborn, Deepnote te ofrece una interfaz m√°s parecida a los programas de inteligencia de negocios, en la que puedes seleccionar el tipo de gr√°fico, las variables y los atributos que quieres mapear. Fuente: Documentaci√≥n de Deepnote\nEntrada: Con Deepnote tambi√©n se pueden hacer tableros de visualizaci√≥n b√°sicos. Estas celdas contienen entradas de texto, selecci√≥n, sliders y fechas que interact√∫an con variables del ambiente de trabajo para volverlos interactivos. ¬°Puedes prototipar tableros antes de pasarlos a Shiny o Dash! Fuente: Documentaci√≥n de Deepnote\nComparaci√≥n de precios # Tanto Google Colab como Deepnote incluyen planes gratuitos y pagos. La diferencia est√° en el enfoque con el que cada servicio diferencia los niveles de pago: el precio de Google Colab depende en mayor medida de la capacidad de computaci√≥n que requieres y el de Deepnote, de las funcionalidades de colaboraci√≥n que requieras.\nPlanes gratuitos # El plan gratuito de Google Colab es el plan por defecto cuando abres un cuaderno en esta plataforma. Este te permite ejecutar el c√≥digo en tus cuadernos, tanto en CPU como GPU y TPU de Google, sujeto a dispinibilidad. Esto significa que en momentos de alta demanda te puedes encontrar con que no puedes usar tarjetas gr√°ficas. No obstante, puedes crear un n√∫mero ilimitado de cuadernos de Colab con tu cuenta.\nEn Deepnote, el plan gratuito incluye la creaci√≥n de hasta 5 proyectos en los que puedes invitar a colaborar a m√°ximo 3 personas. Adem√°s, en este nivel tienes acceso ilimitado CPU con 5GB de RAM, pero no a tarjetas de video. Este uso est√° sujeto a pol√≠ticas de fair use, por lo que Deepnote puede apagar el cuaderno si detecta alg√∫n tipo de actividad sospechosa.\nPlanes pagos # Google Colab ofrece 2 suscripciones y un plan Pay as you go para acceder a computadores m√°s poderosos y funcionalidades extra en la ejecuci√≥n de los cuadernos:\nColab Pro: La suscripci√≥n mensual cuesta USD $9.99 (o COP $43.165 al momento de escribir este post accediendo desde Colombia). Obtienes 100 unidades de c√≥mputo al mes, as√≠ como acceso a m√°quinas con m√°s memoria (hasta 32GB) y una terminal en la m√°quina virtual. Colab Pro+: Esta opci√≥n cuesta USD $49.99 (o COP $215.996). Incluye todo lo que viene en Colab Pro, con 400 unidades de c√≥mputo adicionales, acceso a m√°quinas con a√∫n m√°s memoria (hasta 52GB) y permite la ejecucu√≥n de los cuadernos por hasta 24 horas sin que tengas que tener la ventana del navegador abierta. Pay as you go: En este caso pagas solamente por las unidades de computaci√≥n que necesites. Y los precios est√°n acorde con lo que te ofrecen las dos suscripciones anteriores: 100 unidades te cuestan USD $9.99 y 500 te cuestan USD $49.99. Las unidades de computaci√≥n permiten la ejecuci√≥n del cuaderno en las m√°quinas virtuales de Google Cloud. Son una especie de medida de tu acceso a sus servidores. Para las suscripciones mensuales, estas unidades de computaci√≥n expiran luego de 90 d√≠as desde la compra.\nPor su parte, Deepnote ofrece dos suscripciones dise√±adas para equipos y empresas, con funciones avanzadas para la colaboraci√≥n:\nDeepnote Team: Este plan cuesta USD $39 por editor por mes. Contempla la creaci√≥n de un n√∫mero ilimitado de proyectos en los que pueden colaborar cualquier n√∫mero de editores. Adem√°s, te da acceso a m√°quinas virtuales de hasta 16GB de RAM ‚Äìy de hasta 128GB bajo el modelo pay as you go‚Äì e integraciones con servicios como Snowflake, SQL Server, BigQuery, Redshift, entre otras; que no se encuentran disponibles en la versi√≥n gratuita. Adem√°s, permite la ejecuci√≥n de cuadernos por hasta 24 horas sin que tengas que interactuar con el navegador. Deepnote Enterprise: No hay un precio fijo para este plan, sino que tienes que cotizar con el equipo de ventas de Deepnote. Adem√°s de las opciones incluidas en el plan anterior, este incluye un historial ilimitado de versiones de los cuadernos, soporte dedicado y la opci√≥n de construir m√°quinas personalizadas seg√∫n tu necesidad. Incluso es posible la instalaci√≥n de una nube privada on-premise en tu organizaci√≥n. Conclusi√≥n # Tanto Google Colab como Deepnote son herramientas muy interesantes para ejecutar cuadernos de Jupyter en servidores remotos. Y afortunadamente, cuentan con versiones gratuitas para que pruebes sus funcionalidades y te des cuenta cu√°l se adec√∫a mejor a tu flujo de trabajo. Google Colab puede ser m√°s √∫til si eres un entusiasta de la ciencia de datos y quieres poner en marcha proyectos de peque√±a escala. Mientras que Deepnote puede ser una soluci√≥n m√°s adecuada si el tama√±o de tu operaci√≥n es mucho m√°s grande y necesitas acceder a soporte especializado.\n¬øConoces otra herramienta que permite la ejecuci√≥n de cuadernos de Jupyter en la Nube? Cu√©ntame en los comentarios o en mis redes sociales.\n","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/posts/google-colab-vs-deepnote/","section":"Publicaciones","summary":"Sin duda alguna, los cuadernos de Jupyter son una de las herramientas m√°s √∫tiles en el arsenal de un cient√≠fico de datos.","title":"Google Colab vs Deepnote","type":"posts"},{"content":"","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/tags/herramientas/","section":"Tags","summary":"","title":"Herramientas","type":"tags"},{"content":"","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/categories/jupyter/","section":"Categories","summary":"","title":"Jupyter","type":"categories"},{"content":"","date":"10 de marzo de 2023","externalUrl":null,"permalink":"/tags/jupyter/","section":"Tags","summary":"","title":"Jupyter","type":"tags"},{"content":"El trabajo con fechas tiene numerosas complejidades, entre las que se cuentan el formato de escritura de las fechas, las zonas horarias y las diferentes formas de hablar de duraciones de tiempo.\nEn este post quiero explicarte c√≥mo leer, manipular y hacer aritm√©tica con fechas usando pandas. Si buscas un tutorial para el m√≥dulo datetime, dir√≠gete a este enlace. Si te interesa aprender a trabajar con fechas en R, te invito a leer esta publicaci√≥n.\npandas # Pandas es una de las librer√≠as m√°s usadas para trabajar con datos tabulares en Python. Esta incluye un gran n√∫mero de funciones para leer, limpiar, modificar, hacer an√°lisis descriptivo y exportar tablas; entre ellas, algunas dise√±adas para optimizar tu trabajo con fechas y horas.\nVeamos los tipos de objetos relacionados con fechas con los que te vas a encontrar en pandas.\nTipos de objetos # Pandas te permite capturar 4 conceptos relacionados con el tiempo:\nMomentos puntuales. Periodos: Una duraci√≥n de tiempo que consiste en un punto de partida y una frecuencia. Diferencias de tiempo absolutas: que no tienen en cuenta la aritm√©tica de los calendarios. Por ejemplo, a√±os bisiestos. Diferencias de tiempo relativas: que si tienen en cuenta la aritm√©tica de los calendarios. Cada uno de estos conceptos est√° asociado a una funci√≥n espec√≠fica que crea objetos de distinta clase, dependiendo de si el argumento que se le pasa es un escalar, un array o un objeto de Python (Series o DataFrames). La siguiente tabla describe estas relaciones:\nConcepto Funci√≥n asociada Clase escalar Clase Array Clase Pandas Momento puntual to_datetime() Timestamp DatetimeIndex datetime64[ns] o datetime64[ns, tz] Periodos Period() Period PeriodIndex period[freq] Diferencias absolutas to_timedelta() Timedelta TimedeltaIndex timedelta64[ns] Diferencias relativas DateOffset() DateOffset None None Lectura de fechas # Por lo pronto, veamos c√≥mo funciona la lectura de fechas desde strings para los momentos puntuales, es decir, los objetos que est√°n asociados con la funci√≥n to_datetime(). En el siguiente bloque de c√≥digo voy a crear un string, una lista y una serie de pandas con texto en formato ISO 8601:\nimport pandas as pd mi_string = \u0026#34;2022-11-06\u0026#34; mi_array = [\u0026#34;2022-11-06\u0026#34;, \u0026#34;2022-12-06\u0026#34;, \u0026#34;2023-01-06\u0026#34;] mi_serie = pd.Series([\u0026#34;2022-11-06\u0026#34;, \u0026#34;2022-12-06\u0026#34;, \u0026#34;2023-01-06\u0026#34;]) El formato ISO 8601 es un est√°ndar internacional para escribir fechas y horas, que elimina ambig√ºedades entre las distintas maneras de escribir fechas. En general, este est√°ndar consiste en escribir primero las unidades m√°s grandes (p.e. a√±os) y luego las unidades m√°s peque√±as (p.e. meses o d√≠as). Los componentes de la fecha se separan con un gui√≥n (-) y los componentes de la hora con dos puntos (:).\nLos siguientes son los resultados de aplicar la funci√≥n to_datetime() a los 3 tipos de objetos. Como te dar√°s cuenta, estos corresponden a la tabla que mencion√© con anterioridad:\n#¬†String pd.to_datetime(mi_string) # Timestamp(\u0026#39;2022-11-06 00:00:00\u0026#39;) # Array pd.todatetime(mi_array) # DatetimeIndex([\u0026#39;2022-11-06\u0026#39;, \u0026#39;2022-12-06\u0026#39;, \u0026#39;2023-01-06\u0026#39;], dtype=\u0026#39;datetime64[ns]\u0026#39;, freq=None) # Serie pd.to_datetime(mi_serie) # 0 2022-11-06 #¬†1 2022-12-06 #¬†2 2023-01-06 # dtype: datetime64[ns] Ahora bien, ¬øqu√© sucede cuando el formato de los strings en los que tienes tus fechas no coincide con el est√°ndar ISO 8601? En estos casos, debes proveer la estructura de la fecha en el argumento format. Esta estructura se escribe con un string especial compuesto por caracteres que representan cada uno de los elementos. Estos caracteres son los mismos que funcionan con el paquete datetime de Python base:\nMedida de tiempo Ejemplo Caracter asociado A√±o con siglo \u0026quot;1987\u0026quot; \u0026quot;%Y\u0026quot; A√±o sin siglo \u0026quot;87\u0026quot; \u0026quot;%y\u0026quot; Mes en n√∫mero \u0026quot;02\u0026quot; \u0026quot;%m\u0026quot; Mes en palabra larga \u0026quot;Febrero\u0026quot; \u0026quot;%B\u0026quot; Mes en palabra corta \u0026quot;Feb\u0026quot; \u0026quot;%b\u0026quot; D√≠a del mes \u0026quot;04\u0026quot; \u0026quot;%d\u0026quot; Hora (formato 24 horas) \u0026quot;19\u0026quot; \u0026quot;%H\u0026quot; Hora (formato 12 horas) \u0026quot;07\u0026quot; \u0026quot;%h\u0026quot; Identificador de ma√±ana o tarde \u0026quot;PM\u0026quot; \u0026quot;%p\u0026quot; Minuto \u0026quot;30\u0026quot; \u0026quot;%M\u0026quot; Segundo \u0026quot;00\u0026quot; \u0026quot;%S\u0026quot; Sup√≥n que tienes un string en tu DataFrame que contiene una columna con las fechas en las que alg√∫n registro se actualiz√≥, con el siguiente formato \u0026quot;Updated on 09 Dec 2022 at 13:30:05\u0026quot;. Al ejecutar la funci√≥n to_datetime() sin ning√∫n argumento adicional, Python te devolver√° un error porque pandas no sabe c√≥mo interpretar ese string:\npd.to_datetime(\u0026#34;Updated on 09 December 2022 at 13:30:05\u0026#34;) # ParserError: Unknown string format: Updated on 09 Dec 2022 at 13:30:05 Ahora intentemos con el argumento format. En este caso, puedes ver que el string contiene el n√∫mero del d√≠a (%d), el nombre largo del mes (%bB), el a√±o incluyendo los d√≠gitos del siglo (%Y), la hora en formato 24 horas (%H), los minutos (%M) y los segundos (%S). Con esta informaci√≥n puedes construir el string que ir√≠a en format as√≠:\npd.to_datetime(\u0026#34;Updated on 09 December 2022 at 13:30:05\u0026#34;, format = \u0026#34;Updated on %d %B %Y at %H:%M:%S\u0026#34;) #¬†Timestamp(\u0026#39;2022-12-09 13:30:05\u0026#39;) Sin embargo, el c√≥digo anterior s√≥lo funciona para fechas que est√©n escritas en ingl√©s, dado que contiene el nombre del mes en ese idioma. Si quisieras leer directamente el string \u0026quot;Actualizado el 09 de Diciembre de 2022 a las 13:30:05\u0026quot;, pandas te devolver√≠a un error porque no reconoce Diciembre como el nombre de un mes:\npd.to_datetime(\u0026#34;Actualizado el 09 de Diciembre de 2022 a las 13:30:05\u0026#34;, format = \u0026#34;Actualizado el %d de %B de %Y a las %H:%M:%S\u0026#34;) # ValueError: time data \u0026#39;Actualizado el 09 de Diciembre de 2022 a las 13:30:05\u0026#39; does not match format \u0026#39;Actualizado el %d de %B de %Y a las %H:%M:%S\u0026#39; (match) Para corregir este error, tienes que definir el idioma en el que va a correr tu ambiente de Python usando la funci√≥n setlocale del m√≥dulo locale. Como queremos que Python lea los nombres de los meses en espa√±ol tenemos que usar el locale \u0026quot;es_ES\u0026quot; as√≠:\nimport locale # Cambiar el idioma a espa√±ol locale.setlocale(locale.LC_TIME, \u0026#34;es_ES\u0026#34;) # Leer la fecha pd.to_datetime(\u0026#34;Actualizado el 09 de Diciembre de 2022 a las 13:30:05\u0026#34;, format = \u0026#34;Actualizado el %d de %B de %Y a las %H:%M:%S\u0026#34;) # Timestamp(\u0026#39;2022-12-09 13:30:05\u0026#39;) Unidades de tiempo # Puedes acceder a una gran cantidad de elementos de los objetos Timestamp y DatetimeIndex llamando los atributos que se describen en la siguiente tabla. Si quieres m√°s informaci√≥n, puedes ver la lista completa de atributos en el siguiente enlace.\nAtributo Descripci√≥n year A√±o month Mes day D√≠a del mes hour Hora minute Minuto Second Segundo date Fecha sin informaci√≥n de zona horaria time Hora sin informaci√≥n de zona horaria timetz Hora incluyendo informaci√≥n de zona horaria dayofyear D√≠a del a√±o dayofweek D√≠a de la semana (0 es lunes y 6 es domingo) daysinmonth N√∫mero de d√≠as del mes actual Veamos un ejemplo. Sup√≥n que tienes un objeto Timestamp como el que se presenta a continuaci√≥n. Puedes extraer los elementos f√°cilmente as√≠:\nmi_ejemplo = pd.to_datetime(\u0026#39;2022-12-09 14:20:35\u0026#39;) # Imprimir los componentes de la fecha print(\u0026#34;A√±o:\u0026#34;, mi_ejemplo.year) print(\u0026#34;Mes:\u0026#34;, mi_ejemplo.month) print(\u0026#34;D√≠a:\u0026#34;, mi_ejemplo.day) print(\u0026#34;Hora:\u0026#34;, mi_ejemplo.hour) print(\u0026#34;Minuto:\u0026#34;, mi_ejemplo.minute) print(\u0026#34;Segundo:\u0026#34;, mi_ejemplo.second) print(\u0026#34;D√≠a del a√±o:\u0026#34;, mi_ejemplo.dayofyear) # A√±o: 2022 # Mes: 12 # D√≠a: 9 # Hora: 14 # Minuto: 20 # Segundo: 35 # D√≠a del a√±o: 343 Te habr√°s dado cuenta que en los objetos que mencion√© hace falta la Serie de datetime64[ns]. Esto es porque la forma de acceder a los componentes de la fecha es ligeramente diferente. En vez de llamar directamente el nombre del atributo como en la tabla, lo que tienes que hacer es poner primero el atributo dt. Es decir, si quieres extraer la hora de una Serie de fechas, deber√≠as escribir algo como:\nmi_serie = pd.to_datetime(pd.Series([\u0026#39;2022-12-09 14:20:35\u0026#39;, \u0026#39;2022-12-15 15:30:14\u0026#39;, \u0026#39;2023-01-04 09:55:22\u0026#39;])) # Extraer la hora print(mi_serie.dt.hour) # 0 14 #¬†1 15 #¬†2 9 #¬†dtype: int64 Zonas horarias # Detr√°s de c√°maras, pandas usa las librer√≠as pytz y dateutil para manejar zonas horarias. Por defecto, los objetos que creas no tienen informaci√≥n de zona horaria. Pero esto se puede modificar f√°cilmente con las mismas l√≥gicas de pytz. Veamos las operaciones m√°s comunes que tendr√°s que realizar:\nDefinir la zona horaria de la fecha: Si comienzas con un objeto que no tiene informaci√≥n de zona horaria, puedes definirla con el con el m√©todo tz_localize(). mi_fecha_hora = pd.to_datetime(\u0026#39;2022-12-09 14:20:35\u0026#39;) #¬†Timestamp(\u0026#39;2022-12-09 14:20:35\u0026#39;) # Definir la zona horaria de Bogot√° mi_fecha_hora.tz_localize(\u0026#34;America/Bogota\u0026#34;) # Timestamp(\u0026#39;2022-12-09 14:20:35-0500\u0026#39;, tz=\u0026#39;America/Bogota\u0026#39;) Es muy importante que guardes este resultado en un variable ‚Äìo sobreescribas la existente‚Äì. De lo contrario, no se guardar√°n los cambios a la zona horaria.\nCambiar de una zona horaria a otra: Para esto, puedes usar el m√©todo tz_convert(), escribiendo como argumento la zona horaria que quieres como resultado. # Definir un objeto en hora de Bogot√° mi_fecha_hora_bog = pd.to_datetime(\u0026#39;2022-12-09 14:20:35\u0026#39;).tz_localize(\u0026#34;America/Bogota\u0026#34;) # Timestamp(\u0026#39;2022-12-09 14:20:35-0500\u0026#39;, tz=\u0026#39;America/Bogota\u0026#39;) # Transformarlo a hora de Madrid mi_fecha_hora_mad = mi_fecha_hora_bog.tz_convert(\u0026#34;Europe/Madrid\u0026#34;) # Timestamp(\u0026#39;2022-12-09 20:20:35+0100\u0026#39;, tz=\u0026#39;Europe/Madrid\u0026#39;) # Transformarlo a hora de Tokyo mi_fecha_hora_tok = mi_fecha_hora_bog.tz_convert(\u0026#34;Asia/Tokyo\u0026#34;) # Timestamp(\u0026#39;2022-12-10 04:20:35+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;) Forzar una zona horaria sin cambiar la hora original: Primero tienes que eliminar la informaci√≥n de zona horaria de tu objeto de inter√©s usando tz_localize(None) y luego, incluyes la zona horaria que desees usando de nuevo tz_localize(). # Definir un objeto en hora de Bogot√° mi_fecha_hora_bog = pd.to_datetime(\u0026#39;2022-12-09 14:20:35\u0026#39;).tz_localize(\u0026#34;America/Bogota\u0026#34;) # Timestamp(\u0026#39;2022-12-09 14:20:35-0500\u0026#39;, tz=\u0026#39;America/Bogota\u0026#39;) # Forzar el objeto a hora de Madrid mi_fecha_hora_mad2 = mi_fecha_hora_bog.tz_localize(None).tz_localize(\u0026#34;Europe/Madrid\u0026#34;) # Timestamp(\u0026#39;2022-12-09 14:20:35+0100\u0026#39;, tz=\u0026#39;Europe/Madrid\u0026#39;) # Forzar el objeto a la hora de Tokyo mi_fecha_hora_tok2 = mi_fecha_hora_bog.tz_localize(None).tz_localize(\u0026#34;Asia/Tokyo\u0026#34;) #¬†Timestamp(\u0026#39;2022-12-09 14:20:35+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;) Periodos # Es momento de hablar de los tipos de objetos que quedaron pendientes. Los periodos representan duraciones de tiempo con una fecha espec√≠fica de inicio. Esto se traduce en una diferencia sutil frente a los objetos tipo Timestamp: mientras que los Timestamp representan un momento espec√≠fico en el tiempo, los objetos tipo Period describen una ventana de tiempo que comienza en un momento espec√≠fico. En otras palabras, en vez de referirnos a un punto arbitrario en el tiempo como el 10 de diciembre de 2022, hablamos del d√≠a, semana o mes que comienzan a partir del 10 de diciembre de 2022.\nDe manera similar a los momentos puntuales, podemos crear objetos distintos dependiendo de si partimos de un escalar, un vector o un objeto de pandas. Dado su prop√≥sito, la funci√≥n Period contiene un argumento llamado freq, que define el tama√±o de la ventana de tiempo que queremos definir. Algunas de las periodicidades m√°s comunes son:\nCaracter Descripci√≥n D D√≠a calendario B D√≠a h√°bil W Semana M Mes Q Trimestre Y A√±o H Hora T Minuto S Segundo Puedes consultar el resto de duraciones en el siguiente link\nA modo de ejemplo, puedes crear objetos de la familia de Period as√≠:\nimport pandas as pd mi_string = \u0026#34;2022-11-06\u0026#34; mi_array = [\u0026#34;2022-11-06\u0026#34;, \u0026#34;2022-12-06\u0026#34;, \u0026#34;2023-01-06\u0026#34;] mi_serie = pd.Series([\u0026#34;2022-11-06\u0026#34;, \u0026#34;2022-12-06\u0026#34;, \u0026#34;2023-01-06\u0026#34;]) # Period con duraci√≥n de 2 d√≠as. pd.Period(mi_string, freq=\u0026#34;2D\u0026#34;) #¬†Period(\u0026#39;2022-11-06\u0026#39;, \u0026#39;2D\u0026#39;) # PeriodIndex con duraci√≥n de 1 semana. pd.PeriodIndex(mi_array, freq=\u0026#34;W\u0026#34;) # PeriodIndex([\u0026#39;2022-10-31/2022-11-06\u0026#39;, \u0026#39;2022-12-05/2022-12-11\u0026#39;, # \u0026#39;2023-01-02/2023-01-08\u0026#39;], # dtype=\u0026#39;period[W-SUN]\u0026#39;, freq=\u0026#39;W-SUN\u0026#39;) # period[freq] con duraci√≥n de 1 semana pd.to_datetime(mi_serie).dt.to_period(\u0026#34;W\u0026#34;) # 0 2022-10-31/2022-11-06 # 1 2022-12-05/2022-12-11 # 2 2023-01-02/2023-01-08 dtype: period[W-SUN] Nota que para crear una serie de objetos tipo period[freq] necesitas partir de un array que ya sea un Timestamp o un DatetimeIndex. Por tal motivo, antes de usar el m√©todo to_period(), fue necesario convertir la serie con la funci√≥n pd.to_datetime().\nTimedeltas # Los objetos tipo Timedelta funcionan muy similar a los timedelta del m√≥dulo datetime. En resumen, describen un intervalo de tiempo exacto, medido en unidades como d√≠as, horas, minutos, segundos etc. Puedes crear estos objetos con la funci√≥n Timedelta() y ajustar su duraci√≥n con par√°metros comp days, hours, etc. Aqu√≠ puedes ver un ejemplo de c√≥mo usarlos para hacer aritm√©tica con fechas.\n# Crear un Timedelta mi_timedelta = pd.Timedelta(days=30) # Timedelta(\u0026#39;30 days 00:00:00\u0026#39;) # Usar un timedelta para conseguir una nueva fecha mi_timestamp = pd.to_datetime(\u0026#34;2022-12-21\u0026#34;) # Timestamp(\u0026#39;2022-12-21 00:00:00\u0026#39;) mi_timestamp + mi_timedelta # Timestamp(\u0026#39;2023-01-20 00:00:00\u0026#39;) Dada su construcci√≥n, no puedes usar Timedelta para representar duraciones de tiempo variables como las que usamos en nuestro lenguaje cotidiano. Para eso est√°n los objetos tipoDateOffset, que ver√°s a continuaci√≥n.\nDateOffsets # Por su parte, los objetos de tipo DateOffset tambi√©n se usan para describir intervalos de tiempo; pero en vez de hacerlo en t√©rminos de unidades exactas de tiempo, lo hacen siguiendo las reglas del calendario. Por ejemplo, un DateOffset con una duraci√≥n de 1 mes, puede tener duraciones reales de 29, 29, 30 o 31 d√≠as dependiendo del mes y el a√±o desde el que se calcule.\nComo argumentos de la funci√≥n DateOffset() puedes incluir duraciones como a√±os (years), meses (months), semanas(weeks), d√≠as(days), entre otros. Encontrar√°s los dem√°s argumentos en este enlace. A continuaci√≥n ver√°s un ejemplo de trabajo con objetos DateOffset.\n# Crear un DateOffset mi_dateoffset = pd.DateOffset(months=1) # Crear una fecha de inicio: mi_timestamp = pd.to_datetime(\u0026#34;2023-01-21\u0026#34;) # Timestamp(\u0026#39;2023-01-21 00:00:00\u0026#39;) # Calcular la fecha m√°s un mes mi_timestamp2 = mi_timestamp + mi_dateoffset # Timestamp(\u0026#39;2023-02-21 00:00:00\u0026#39;) # ¬øCu√°ntos d√≠as de diferencia tienen las dos fechas? (mi_timestamp + mi_dateoffset) - mi_timestamp # Timedelta(\u0026#39;31 days 00:00:00\u0026#39;) Como puedes ver, al calcular la diferencia entre dos fechas obtienes un objeto tipo Timedelta. Intenta cambiar los argumentos de DateOffset() y calcula la diferencia entre las fechas para que veas la variabilidad en su duraci√≥n.\nConclusiones # ¬°Felicidades, ya sabes usar pandas para trabajar con fechas! Con las herramientas que aprendiste en este blog podr√°s desarrollar un gran n√∫mero de tareas relacionadas con fechas. Como recursos adicionales, te dejo los enlaces a un par de tutoriales que escrib√≠ para que aprendas a hacer tareas similares en R y en Python.\nTe invito a dejar un comentario abajo si tienes alg√∫n truco sobre el manejo de datetime y, si te pareci√≥ √∫til este post, a compartirlo en tus redes sociales.\n","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/posts/como-trabajar-con-fechas-en-pandas/","section":"Publicaciones","summary":"El trabajo con fechas tiene numerosas complejidades, entre las que se cuentan el formato de escritura de las fechas, las zonas horarias y las diferentes formas de hablar de duraciones de tiempo.","title":"¬øC√≥mo trabajar con fechas en Pandas?","type":"posts"},{"content":"","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/tags/datetimes/","section":"Tags","summary":"","title":"Datetimes","type":"tags"},{"content":"","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/tags/fechas/","section":"Tags","summary":"","title":"Fechas","type":"tags"},{"content":"","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/tags/lubridate/","section":"Tags","summary":"","title":"Lubridate","type":"tags"},{"content":"","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/tags/pandas/","section":"Tags","summary":"","title":"Pandas","type":"tags"},{"content":"","date":"21 de diciembre de 2022","externalUrl":null,"permalink":"/tags/r/","section":"Tags","summary":"","title":"R","type":"tags"},{"content":"En una publicaci√≥n anterior te habl√© sobre las dificultades que te puedes encontrar cuando trabajes con fechas en tus proyectos de ciencia de datos. Para que puedas resolverlas, estoy escribiendo una serie de turoriales para que aprendas a trabajar con algunas de las herramientas m√°s poderosas.\nAl final de este post, sabr√°s como leer, manipular y hacer aritm√©tica con fechas usando datetime. Si buscas un tutorial de pandas, te lo dejo en este enlace. Si te interesa aprender a trabajar con fechas en R, te invito a leer esta publicaci√≥n.\ndatetime # datetime es un m√≥dulo que viene en la instalaci√≥n base de Python y que contiene todas las herramientas necesitar√°s para trabajar con fechas y horas.\nAntes de entrar en las tareas que puedes hacer con este m√≥dulo, veamos algunos de los objetos con los que vas a trabajar. Estos depender√°n de qu√© tanta informaci√≥n contiene tu campo de fecha.\nTipos de objetos # Si √∫nicamente tienes informaci√≥n sobre el a√±o, mes y d√≠a, vas a utilizar el tipo datetime.date. Veamos un ejemplo sencillo creando una fecha con la funci√≥n date(), que recibe como argumentos el a√±o, el mes y el d√≠a:\nfrom datetime import date mi_fecha = date(2022,12,10) # datetime.date(2022, 12, 10) type(mi_fecha) # datetime.date Si adem√°s tienes informaci√≥n del momento preciso ‚Äìhoras, minutos y segundos‚Äì, vas a trabajar con datetime.datetime. Podemos crear un objeto de este tipo con la funci√≥n datetime(), que recibe como argumentos el a√±o, mes, d√≠a, hora, minuto y segundo:\nfrom datetime import datetime mi_fecha_hora = datetime(2022,12,10,19,30,0) # datetime.datetime(1022, 12, 10, 19, 30) type(mi_fecha_hora) #¬†datetime.datetime M√°s adelante ver√°s otro tipo de objeto de datetime: timedelta, que se encarga de las diferencias entre dos fechas.\nLectura de fechas # En la vida real, te vas a encontrar con fechas que est√°n en formato str. Veamos c√≥mo las puedes leer usando el m√≥dulo datetime. Empecemos con el caso en el que tienes una fecha escrita en formato ISO 8601: \u0026quot;2022-12-10\u0026quot;.\nEn el est√°ndar ISO 8601 se escriben las fechas de la mayor unidad a la menor unidad, separando a√±o, d√≠a y mes con un gui√≥n (-); y hora, mes y a√±o con dos puntos (:). Esto evita la ambig√ºedad a la hora de interpretar a qu√© unidad pertenece cada n√∫mero.\nPara leerla como datetime.date, puedes ejecutar el siguiente c√≥digo:\nfrom datetime import date mi_fecha = date.fromisoformat(\u0026#34;2022-12-10\u0026#34;) # datetime.date(2022, 12, 10) Desde la versi√≥n de Python 3.11 en adelante, puedes aplicar esta funci√≥n incluso cuando no se separan las fechas con gui√≥n. Por ejemplo:\nfrom datetime import date mi_fecha1 = date.fromisoformat(\u0026#34;2022/12/10\u0026#34;) # datetime.date(2022, 12, 10) mi_fecha2 = date.fromisoformat(\u0026#34;20221210\u0026#34;) # datetime.date(2022, 12, 10) mi_fecha3 = date.fromisoformat(\u0026#34;2022:12:10\u0026#34;) # datetime.date(2022, 12, 10) Esto mismo aplica para los datetime. Lo √∫nico que tenemos que cambiar es el tipo de objeto desde el que corremos el m√©todo:\nfrom datetime import datetime mi_fecha_hora = datetime.fromisoformat(\u0026#34;2022-12-10 19:30:00\u0026#34;) # datetime.datetime(2022, 12, 10, 19, 30) ¬øQu√© pasa cuando el str de la fecha no est√° en formato ISO 8601? Aqu√≠ deber√°s usar el m√©todo strptime(), que recibe dos argumentos: el texto que contiene la fecha y un texto especial que le dice al m√©todo c√≥mo leer esa fecha.\nEste texto especial funciona con caracteres que describen cada elemento de la fecha, los m√°s comunes se describen en la siguiente tabla:\nMedida de tiempo Ejemplo Caracter asociado A√±o con siglo \u0026quot;1987\u0026quot; \u0026quot;%Y\u0026quot; A√±o sin siglo \u0026quot;87\u0026quot; \u0026quot;%y\u0026quot; Mes en n√∫mero \u0026quot;02\u0026quot; \u0026quot;%m\u0026quot; Mes en palabra larga \u0026quot;Febrero\u0026quot; \u0026quot;%B\u0026quot; Mes en palabra corta \u0026quot;Feb\u0026quot; \u0026quot;%b\u0026quot; D√≠a del mes \u0026quot;04\u0026quot; \u0026quot;%d\u0026quot; Hora (formato 24 horas) \u0026quot;19\u0026quot; \u0026quot;%H\u0026quot; Hora (formato 12 horas) \u0026quot;07\u0026quot; \u0026quot;%h\u0026quot; Identificador de ma√±ana o tarde \u0026quot;PM\u0026quot; \u0026quot;%p\u0026quot; Minuto \u0026quot;30\u0026quot; \u0026quot;%M\u0026quot; Segundo \u0026quot;00\u0026quot; \u0026quot;%S\u0026quot; Entonces, sup√≥n que tienes un str de texto as√≠: \u0026quot;Created on Dec 10/2022 at 19:30\u0026quot;. Con los caracteres de la tabla anterior, puedes leerlo as√≠:\nfrom datetime import datetime mi_fecha_texto = datetime.strptime(\u0026#34;Created on Dec 10/2022 at 19:30\u0026#34;, \u0026#34;Created on %b %d/%Y at %H:%M\u0026#34;) # datetime.datetime(2022, 12, 10, 19, 30) Ahora bien, esto no funciona para nombres de meses que est√©n escritos en otro idioma distinto a ingl√©s. Para ello, debes configurar el idioma de tu ambiente ejecutando la funci√≥n locale.set_locale(), con el segundo argumento ajustado al c√≥digo del idioma y el pa√≠s. Para espa√±ol puedes usar \u0026quot;es_ES\u0026quot;:\nimport locale # Cambiar el idioma a espa√±ol locale.setlocale(locale.LC_TIME, \u0026#34;es_ES\u0026#34;) # Leer la fecha mi_fecha_texto_es = datetime.strptime(\u0026#34;Creado en Dic 10/2022 a las 19:30\u0026#34;, \u0026#34;Creado en %b %d/%Y a las %H:%M\u0026#34;) # datetime.datetime(2022, 12, 10, 19, 30) Unidades de tiempo # Leer las fechas es apenas el principio. Usualmente tienes que extraer elementos puntuales de las fechas para hacer comparaciones o filtrar bases de datos. Esto lo puedes hacer usando distintos atributos y m√©todos que tienen los objetos date y datetime.\nPara los objetos date, puedes extraer el a√±o, el mes y el d√≠a con los atributos year, month y date, respectivamente. Adem√°s, puedes extraer el d√≠a de la semana con el m√©todo isoweekday():\nmi_fecha = date(2022,12,10) # datetime.date(2022, 12, 10) mi_fecha.year # 2022 mi_fecha.month #¬†12 mi_fecha.day # 10 mi_fecha.isoweekday() # 6 Para el caso de objetos tipo datetime, tambi√©n puedes acceder a la hora, minuto, segundo con los atributos hour, minute y second:\nmi_fecha_hora = datetime(2022,12,10,19,30,0) # datetime.datetime(2022, 12, 10, 19, 30) mi_fecha_hora.hour # 19 mi_fecha_hora.minute #¬†30 mi_fecha_hora.second # 0 Las funciones que incluye el m√≥dulo datetime son relativamente limitadas. Tambi√©n puedes consultar los objetos de clase datetime64 y timedelta64 de Numpy para conocer lo que pueden hacer. Adicionalmente, en los pr√≥ximos d√≠as voy a subir un tutorial para el manejo de fechas con pandas.\nZonas horarias # Es muy importante que sepas lidiar con zonas horarias, especialmente porque te puedes encontrar con datasets cuyo alcance vaya m√°s all√° de la jurisdicci√≥n de un pa√≠s o se desarrollen en una zona geogr√°fica muy amplia. Para las operaciones que ver√°s m√°s abajo, necesitas instalar la librer√≠a pytz, ya que esta contiene informaci√≥n √∫til sobre zonas horarias y algunos m√©todos √∫tiles para modificar los objetos datetime.\nDefinir la zona horaria de la fecha: Si est√°s partiendo de un datetime que no tiene informaci√≥n de zona horaria ‚Äìdatetime.tzinfo es None‚Äì, necesitas crear un objeto pytz.timezone con un str que indique la zona horaria de tu inter√©s. Posteriormente, ejecutas el m√©todo localize(), usando como argumento el datetime que quieres convertir: import pytz mi_fecha_hora = datetime(2022,12,10,19,30,0) # datetime.datetime(1022, 12, 10, 19, 30) #¬†Hora de Bogot√° mi_fecha_hora_bog = pytz.timezone(\u0026#34;America/Bogota\u0026#34;).localize(mi_fecha_hora) # datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;America/Bogota\u0026#39; -05-1 day, 19:00:00 STD\u0026gt;) # Hora de Madrid mi_fecha_hora_mad = pytz.timezone(\u0026#34;Europe/Madrid\u0026#34;).localize(mi_fecha_hora) # datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Europe/Madrid\u0026#39; CET+1:00:00 STD\u0026gt;) # Hora de Tokyo mi_fecha_hora_mad = pytz.timezone(\u0026#34;Asia/Tokyo\u0026#34;).localize(mi_fecha_hora) #datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Asia/Tokyo\u0026#39; JST+9:00:00 STD\u0026gt;) Es muy importante que guardes este resultado en un variable ‚Äìo sobreescribas la existente‚Äì. De lo contrario, no se guardar√°n los cambios a la zona horaria.\nCambiar una zona horaria a otra: Para cambiar tu hora a una hora local de otra ubicaci√≥n, puedes usar el m√©todo astimezone() del objeto datetime, usando como argumento la zona horaria de pytz: import pytz # Hora de Bogot√° en hora local de Madrid mi_fecha_hora_mad2 = mi_fecha_hora_bog.astimezone(pytz.timezone(\u0026#34;Europa/Madrid\u0026#34;)) # datetime.datetime(2022, 12, 11, 1, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Europe/Madrid\u0026#39; CET+1:00:00 STD\u0026gt;) # Hora de Bogot√° en hora local de Tokyo mi_fecha_hora_tok2 = mi_fecha_hora_bog.astimezone(pytz.timezone(\u0026#34;Europa/Madrid\u0026#34;)) # datetime.datetime(2022, 12, 11, 9, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Asia/Tokyo\u0026#39; JST+9:00:00 STD\u0026gt;) Forzar una zona horaria sin cambiar la hora original: Si tu datetime ya tiene una zona horaria asociada, lo primero que tienes que hacer es eliminar el atributo tzinfo, usando el m√©todo replace(), para luego seguir los pasos para un datetime sin zona horaria: import pytz mi_fecha_hora_bog # datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;America/Bogota\u0026#39; -05-1 day, 19:00:00 STD\u0026gt;) # Extraer la fecha y hora sin la zona horaria mi_fecha_hora_sin_tz = mi_fecha_hora_bog.replace(tzinfo=None) # datetime.datetime(2022, 12, 10, 19, 30) #¬†Forzar la hora a hora de Madrid mi_fecha_hora_mad3 = pytz.timezone(\u0026#34;Europe/Madrid\u0026#34;).localize(mi_fecha_hora_sin_tz) # datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Europe/Madrid\u0026#39; CET+1:00:00 STD\u0026gt;) # Forzar la hora a hora de Tokyo mi_fecha_hora_tok3 = pytz.timezone(\u0026#34;Asia/Tokyo\u0026#34;).localize(mi_fecha_hora_sin_tz) #datetime.datetime(2022, 12, 10, 19, 30, tzinfo=\u0026lt;DstTzInfo \u0026#39;Asia/Tokyo\u0026#39; JST+9:00:00 STD\u0026gt;) Timedeltas # Los objetos de tipo timedelta representan una diferencia entre dos fechas o tiempos, en unidades fijas de d√≠as, segundos y microsegundos. Esto significa que el timedelta no tiene en cuenta caracter√≠sticas del uso ordinario de las fechas como horarios de verano, el n√∫mero de d√≠as de los meses o a√±os bisiestos.\nfrom datetime import timedelta # Crear un timedelta mi_delta = timedelta(days = 30) # datetime.timedelta(days=30) # Aplicar un timedelta a una fecha mi_fecha_hora = datetime(2022,12,10,19,30,0) # datetime.datetime(2022, 12, 10, 19, 30) mi_fecha_hora + mi_delta # datetime.datetime(2023, 1, 9, 19, 30) A la funci√≥n tambi√©n se le pueden pasar argumentos como milisegundos, minutos, horas y semanas, pero estos siempre se van a convertir en t√©rminos de d√≠as, segundos y microsegundos.\nConclusiones # ¬°Felicidades, ya sabes usar datetime! Con las herramientas que aprendiste en este blog podr√°s desarrollar un gran n√∫mero de tareas relacionadas con fechas. Como recurso adicional, te dejo estos posts donde aprender√°s a trabajar con fechas en R y en pandas\nTe invito a dejar un comentario abajo si tienes alg√∫n truco sobre el manejo de datetime y, si te pareci√≥ √∫til este post, a compartirlo en tus redes sociales.\n","date":"19 de diciembre de 2022","externalUrl":null,"permalink":"/posts/como-trabajar-con-fechas-en-python/","section":"Publicaciones","summary":"En una publicaci√≥n anterior te habl√© sobre las dificultades que te puedes encontrar cuando trabajes con fechas en tus proyectos de ciencia de datos.","title":"¬øC√≥mo trabajar con fechas en Python?","type":"posts"},{"content":"Saber trabajar correctamente con fechas es una herramienta fundamental para cualquier cient√≠fico de datos, ya que es muy com√∫n encontrarse con columnas de este tipo en los datasets. Sin embargo, como lo explico en esta publicaci√≥n, no es algo trivial dadas algunas complejidades propias de las fechas.\nAl final de este post, sabr√°s como leer, manipular y hacer aritm√©tica con fechas usando el paquete lubridate. Si te interesa aprender a trabajar con fechas en Python, te invito s leer los posts correspondientes a datetime y pandas.\nTipos de datos primitivos en R # Antes de empezar, es √∫til hacer un repaso de los tipos de datos que utiliza R base para trabajar con fechas. Lubridate crea un tipo de objeto nuevo, sino que te ofrece un conjunto de funciones para trabajar con ellos.\nDependiendo de qu√© tanta informaci√≥n contiene tu campo de fecha, vas a trabajar con distintos tipos de objetos en R. Cuando s√≥lo se tiene a√±o, mes y d√≠a, R trabaja con el tipo de dato Date. Internamente, este consiste en un conteo de los d√≠as que han pasado desde el primero de enero de 1970.\nPuedes leer una fecha desde un character usando la funci√≥n as.Date(). A modo de ejemplo:\nmi_fecha \u0026lt;- as.Date(\u0026#34;2022-12-10\u0026#34;) Ahora bien, si adem√°s tienes informaci√≥n del momento preciso ‚Äìhoras, minutos y segundos‚Äì, R va a trabajar con el tipo de dato POSIXct. Este consiste en un conteo de segundos desde el 1 de enero de 1970 a media noche.\nR no cuenta con una clase nativa que guarde √∫nicamente horas, minutos y segundos. El paquete hms incluye la clase hms que habilita esta funcionalidad.\nPara leer una fecha de este estilo desde un character, puedes usar la funci√≥n as.POSIXct() as√≠:\nmi_fecha_hora \u0026lt;- as.POSIXct(\u0026#34;2022-12-10 19:30:00\u0026#34;) El formato en el que est√°n escritas la fechas anteriores se conoce como ISO 8601. En este est√°ndar se escriben las fechas de la mayor unidad a la menor unidad: A√±o antes que mes, mes antes que d√≠a, y as√≠ sucesivamente. De esta manera, se elimina la ambig√ºedad a la hora de interpretar a qu√© unidad pertenece cada n√∫mero.\nLubridate # Lubridate es un paquete que te ofrece funciones que aplican sobre fechas en formato Date y POSIXct, que te facilitar√°n mucho tu trabajo. Adicionalmente, este paquete funciona muy bien con otros paquetes del tidyverse, por lo que lo puedes incorporar sin mayores problemas en tu c√≥digo existente. Veamos algunas tareas que puedes hacer con lubridate.\nLectura de fechas # El primer paso es leer un character que contiene una fecha en tu dataset. Si bien podr√≠as hacerlo como lo mostr√© en un ejemplo anterior con las funciones as.Date() y as.POSIXct(), no siempre tendr√°s la fortuna de que las fechas est√©n en el formato ISO 8601.\nPor esta raz√≥n, lubridate te ofrece una familia de funciones que puedes usar para leer configuraciones comunes. Estas se basan en una letra para denotar cada unidad: \u0026ldquo;y\u0026rdquo;\u0026quot; para a√±o, \u0026ldquo;m\u0026rdquo; para mes, \u0026ldquo;d\u0026rdquo; para d√≠a, \u0026ldquo;h\u0026rdquo; para hora, \u0026ldquo;m\u0026rdquo; para minuto y \u0026ldquo;s\u0026rdquo; para segundo.\nEs cierto que la \u0026ldquo;m\u0026rdquo; se repite en esta asignaci√≥n. Sin embargo, esto no es un problema porque las funciones de lubridate separan el componente de fecha y el de hora con un gui√≥n bajo (_), como lo ver√°s m√°s adelante.\nCon esta l√≥gica, se construyen funciones como ymd(), que te permite leer un character en el que el orden es A√±o-Mes-D√≠a, sin importar el caracter que las separe. Tambi√©n funciones como mdy(), que espera un orden Mes-D√≠a-A√±o, dym(), que espera D√≠a-A√±o-Mes, y dem√°s combinaciones de esas letras.\nA modo de ejemplo, al ejecutar las siguientes l√≠neas de c√≥digo tendr√°s exactamente el mismo objeto Date:\nlibrary(lubridate) # Estas l√≠neas devuelven la misma fecha: mi_fecha1 \u0026lt;- ymd(\u0026#34;2022-12-10\u0026#34;) mi_fecha2 \u0026lt;- mdy(\u0026#34;12/10/2022\u0026#34;) mi_fecha3 \u0026lt;- dym(\u0026#34;10:2022:12\u0026#34;) #\u0026gt; \u0026#34;2022-12-10\u0026#34; Lo mismo sucede si a√±adimos datos de hora. Con las mismas letras se construyen funciones como ymd_hms(), que puede crear un objeto POSIXct a partir de un texto en orden A√±o-Mes-D√≠a-Hora-Minuto-Segundo. Ya te podr√°s imaginar qu√© hacen funciones como mdy_hm() o dmy_h().\nVeamos qu√© resulta de ejecutar las siguientes funciones:\nlibrary(lubridate) # A√±o-Mes-D√≠a Hora-Minuto-Segundo mi_fecha_hora1 \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 UTC\u0026#34; # Mes-D√≠a-A√±o Hora-Minuto mi_fecha_hora2 \u0026lt;- mdy_hm(\u0026#34;12/10/2022_19_30\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 UTC\u0026#34; # D√≠a-Mes-A√±o Hora mi_fecha_hora3 \u0026lt;- dmy_h(\u0026#34;10:12:2022 19\u0026#34;) #\u0026gt;¬†\u0026#34;2022-12-10 19:00:00 UTC\u0026#34; Tambi√©n puedes cargar una fecha que aparezca como una combinaci√≥n entre a√±o y trimestre (p.e. \u0026quot;2022:4\u0026quot;) usando la funci√≥n yq().\nUnidades de tiempo # ¬°Perfecto! Ya sabes cargar una fecha con lubridate. Ahora vas a aprender a extraer los elementos individuales de las fechas. Puedes acceder al a√±o, mes, d√≠a, hora, minuto, segundo y m√°s unidades de tiempo de tu objeto tipo Date o POSIXct, con las siguientes funciones:\nmi_fecha_hora \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) # A√±o year(mi_fecha_hora) #\u0026gt; 2022 # Mes month(mi_fecha_hora) #\u0026gt; 12 # D√≠a day(mi_fecha_hora) #\u0026gt; 10 # Hora hour(mi_fecha_hora) #\u0026gt; 19 # Minuto minute(mi_fecha_hora) #\u0026gt; 30 # Segundo second(mi_fecha_hora) #\u0026gt; 0 # Trimeste quarter(mi_fecha_hora) #\u0026gt; 4 # Semestre semester(mi_fecha_hora) #\u0026gt;¬†2 # D√≠a de la semana wday(mi_fecha_hora, week_start = 1) #\u0026gt; 6 En la funci√≥n wday() es necesario poner el argumento week_start = 1 para que el lunes sea el primer d√≠a de la semana ‚Äìy no el domingo, que es la funci√≥n por defecto‚Äì. Esto hace que el valor que devuelve la funci√≥n sea 6, dado que la fecha del ejemplo es un s√°bado. Si no lo haces, la funci√≥n te devuelve el 7, ya que es el s√©ptimo d√≠a de la semana si comienzas a contar desde el domingo.\nHasta el momento, todos los campos de fecha que hemos revisado se devuelven como un integer. Sin embargo, tambi√©n puedes hacer que la funci√≥n month() devuelva el nombre del mes o wday() el nombre del d√≠a. Hay dos argumentos que intervienen en esta operaci√≥n: el primero es label, que le indica a lubridate que debe imprimir un nombre y no un n√∫mero, y el segundo es abbr, que define si quieres una representaci√≥n larga o corta del nombre. Veamos.\nmi_fecha_hora \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) # Nombre del mes sin abreviar month(mi_fecha_hora, label = TRUE, abbr = FALSE) #\u0026gt; diciembre # Nombre del mes sin abreviar month(mi_fecha_hora, label = TRUE, abbr = TRUE) #\u0026gt; dic Dependiendo de la configuraci√≥n de idioma de tu computador, as√≠ como el sistema operativo que est√©s usando, puede que la funci√≥n te devuelva el nombre del mes o del d√≠a en otro idioma. Para forzar un idioma de salida de la funci√≥n, debes usar el argumento locale con un c√≥digo de idioma y pa√≠s. Para espa√±ol puedes usar \u0026quot;es_ES\u0026quot;.\nZonas horarias # Otro aspecto que debes saber manejar son las zonas horarias. Si est√°s trabajando con un set de datos que escapa a la jurisdicci√≥n de un pa√≠s o que se desarrolla en una zona geogr√°fica muy amplia, puedes encontrarte con fechas que est√°n en distintos husos horarios. Hay 3 operaciones que vas a aprender:\nDefinir la zona horaria de la fecha apenas la lees: Para hacerlo, simplemente debes agregar a cualquiera de las funciones vistas con anterioridad el argumento tz, con el c√≥digo de la zona horaria de tu inter√©s. Puedes consultar una lista de zonas horarias en este enlace. #¬†Hora de Bogot√° mi_fecha_hora_bog \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;, tz = \u0026#34;America/Bogota\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 -05\u0026#34; # Hora de Madrid mi_fecha_hora_mad \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;, tz = \u0026#34;Europe/Madrid\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 CET\u0026#34; # Hora de Tokyo mi_fecha_hora_tok \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;, tz = \u0026#34;Asia/Tokyo\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 JST\u0026#34; Por defecto, la zona horaria que se incluye en las fechas es UTC, el Tiempo Universal Coordinado, que para efectos pr√°cticos corresponde al tiempo del Meridiano de Greenwich.\nCambiar una fecha de una zona horaria a otra: La funci√≥n with_tz() permite cambiar una fecha de una zona horaria a otra en horario local. Esta funci√≥n tiene dos argumentos principales: la fecha que queremos convertir y la zona horaria objetivo. #¬†Hora de Bogot√° mi_fecha_hora_bog \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;, tz = \u0026#34;America/Bogota\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 -05\u0026#34; # Hora de Bogot√° en hora local de Madrid mi_fecha_hora_mad2 \u0026lt;- with_tz(mi_fecha_hora_bog, tz = \u0026#34;Europe/Madrid\u0026#34;) #\u0026gt; \u0026#34;2022-12-11 01:30:00 CET\u0026#34; # Hora de Bogot√° en hora local de Tokyo mi_fecha_hora_tok2 \u0026lt;- with_tz(mi_fecha_hora_bog, tz = \u0026#34;Asia/Tokyo\u0026#34;) #\u0026gt; \u0026#34;2022-12-11 09:30:00 JST\u0026#34; Forzar una zona horaria sin cambiar la hora original: La funci√≥n force_tz() permite cambiar la zona horaria de una fecha sin hacer la transformaci√≥n anterior. Es decir, conservando intacta la hora. #¬†Hora de Bogot√° mi_fecha_hora_bog \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;, tz = \u0026#34;America/Bogota\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 -05\u0026#34; # Forzar la hora de Bogot√° a hora de Madrid mi_fecha_hora_mad3 \u0026lt;- force_tz(mi_fecha_hora_bog, tz = \u0026#34;Europe/Madrid\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 CET\u0026#34; # Forzar la hora de Bogot√° a hora de Tokyo mi_fecha_hora_tok3 \u0026lt;- force_tz(mi_fecha_hora_bog, tz = \u0026#34;Asia/Tokyo\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 JST\u0026#34; Periodos # Los periodos corresponden a los espacios de tiempo en unidades que usamos en el d√≠a a d√≠a, como a√±os, meses, semanas o d√≠as. Es decir que incorporan caracter√≠sticas como horarios de verano, n√∫mero de d√≠as de los meses o a√±os bisiestos. Estos objetos te pueden servir para ubicar fechas que ocurren con cierta periodicidad espec√≠fica en t√©rminos humanos.\nLa siguiente tabla resume las funciones que puedes usar para crear periodos. No incluyo una columna de unidad porque, por construcci√≥n, los periodos no tienen siempre la misma duraci√≥n en segundos.\nPeriodo Funci√≥n de lubridate A√±os years() Meses months() Semanas weeks() D√≠as days() Horas hours() Minutos minutes() Segundos seconds() Milisegundos milliseconds() Microsegundos microseconds() Puedes obtener el mismo d√≠a del pr√≥ximo a√±o de la siguiente manera:\nmi_fecha_hora \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 UTC\u0026#34; #¬†Misma fecha en el pr√≥ximo a√±o mi_fecha_hora + years(1) #\u0026gt; \u0026#34;2023-12-10 19:30:00 UTC\u0026#34; Duraciones # Por el contrario, las duraciones corresponden a espacios de tiempo exactos, medidos en segundos. A las duraciones no les interesan las reglas de los calendarios ‚Äìhorarios de verano, n√∫mero de d√≠as de los meses, a√±os bisiestos‚Äì, por lo que pueden ser muy √∫tiles cuando quieres automatizar procesos en tus scripts o guardar informaci√≥n sobre experimentos.\nLa siguiente tabla resume las unidades de tiempo que puedes manejar y a cu√°ntos segundos equivalen:\nDuraci√≥n # segundos Funci√≥n de lubridate A√±os 31536000 dyears() Meses 2629800 dmonths() Semanas 604800 dweeks() D√≠as 86400 ddays() Horas 3600 dhours() Minutos 60 dminutes() Segundos 1 dseconds() Milisegundos 0.001 dmilliseconds() Microsegundos 0.000001 dmicroseconds() A modo de ejemplo, para obtener una fecha m√°s una duraci√≥n de un a√±o puedes escribir lo siguiente:\nmi_fecha_hora \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 UTC\u0026#34; #¬†Fecha + Duraci√≥n de 1 a√±o (31536000 segundos) mi_fecha_hora + dyears(1) #\u0026gt; \u0026#34;2023-12-11 01:30:00 UTC\u0026#34; Intervalos # Los intervalos representan la diferencia de tiempo entre dos fechas y se pueden dividir entre periodos y duraciones para obtener su longitud en estas medidas. Estos se pueden calcular de dos maneras: llamando la funci√≥n interval() con las dos fechas o escribiendo los caracteres %--% entre las dos fechas.\nPor ejemplo, usando los casos anteriores podemos escribir algo como:\nmi_fecha_inicio \u0026lt;- ymd_hms(\u0026#34;2022-12-10 19:30:00\u0026#34;) #\u0026gt; \u0026#34;2022-12-10 19:30:00 UTC\u0026#34; mi_fecha_final \u0026lt;- ymd_hms(\u0026#34;2023-02-10 19:30:00\u0026#34;) #\u0026gt; \u0026#34;2023-02-10 19:30:00 UTC\u0026#34; #¬†Intervalo calculado con la funci√≥n interval() mi_intervalo \u0026lt;- interval(mi_fecha_inicio, mi_fecha_final) #\u0026gt; 2022-12-10 19:30:00 UTC--2023-02-10 19:30:00 UTC # Intervalo calculado con %--% mi_intervalo2 \u0026lt;- mi_fecha_inicio %--% mi_fecha_final #\u0026gt; 2022-12-10 19:30:00 UTC--2023-02-10 19:30:00 UTC # Periodos del intervalo mi_intervalo / months(1) #\u0026gt; 2 # Duraciones del intervalo mi_intervalo / dmonths(1) #\u0026gt; 2.036961 Integraci√≥n con el Tidyverse # Como lo mencion√© anteriormente, lubridate est√° dise√±ado desde el comienzo para trabajar muy bien con las funciones del tidyverse. Esto significa que puedes ejecutar todas las funciones que viste con anterioridad con funciones como group_by(), mutate(), filter(), sort(), summarise(), etc.\nPor ejemplo si tienes una columna con fechas POSIXct que registre alg√∫n evento, podr√≠as agrupar por el a√±o y el trimestre con un c√≥digo as√≠:\ndataframe |\u0026gt; group_by(anio = year(fecha), trimestre = quarter(fecha)) |\u0026gt; summarise(promedio = mean(variable_interes)) ¬°Int√©ntalo! Ver√°s que es muy f√°cil extrapolar todos los conceptos que vimos a tu flujo de trabajo ordinario.\nConclusi√≥n # ¬°Felicidades, ya sabes usar lubridate! Con las herramientas que aprendiste en este blog podr√°s desarrollar un gran n√∫mero de tareas relacionadas con fechas. Como recursos adicionales, te dejo este cheat sheet elaborado por Posit, que te ayudar√° a recordar las funciones de este paquete cuando las necesites. Cuando se publiquen, pondr√© los enlaces de los posts sobre c√≥mo trabajar con fechas en datetime y pandas en Python.\nTe invito a dejar un comentario abajo si tienes alg√∫n truco sobre el manejo de lubridate y, si te pareci√≥ √∫til este post, a compartirlo en tus redes sociales.\n","date":"17 de diciembre de 2022","externalUrl":null,"permalink":"/posts/como-trabajar-con-fechas-en-r/","section":"Publicaciones","summary":"Saber trabajar correctamente con fechas es una herramienta fundamental para cualquier cient√≠fico de datos, ya que es muy com√∫n encontrarse con columnas de este tipo en los datasets.","title":"¬øC√≥mo trabajar con fechas en R?","type":"posts"},{"content":"","date":"17 de diciembre de 2022","externalUrl":null,"permalink":"/categories/r/","section":"Categories","summary":"","title":"R","type":"categories"},{"content":"Una de las tareas m√°s habituales en el trabajo de un cient√≠fico de datos tiene que ver con el manejo de fechas. Asumiendo que tus datos ya est√°n ordenados, los campos que describen fechas te van a permitir hacer agrupaciones de tus observaciones de acuerdo con periodos de tiempo espec√≠ficos, encontrar patrones √∫tiles para la toma de decisiones y ayudarte a dise√±ar visualizaciones de datos llamativas y f√°ciles de entender.\nSin embargo, el trabajo con fechas no es tan evidente. En este post quiero hablar sobre por qu√© es complejo trabajar con fechas y al final encontrar√°s el enlace para aprender a usar lubridate en R, as√≠ como datetime y pandas en Python.\n1. Formato de escritura # Dependiendo del lugar de origen de tu dataset o la organizaci√≥n que lo elabora, te vas a encontrar con que las fechas tienen una gran cantidad de formatos distintos. Para ilustrar este punto, veamos las formas en las que podr√≠as escribir el 5 de octubre de 2022.\nEmpecemos con representaciones de esa fecha que usan √∫nicamente n√∫meros. Con esta restricci√≥n, podr√≠amos modificar el orden en el que aparecen los elementos de la fecha, as√≠ como los caracteres que los separan. Frente al orden, podr√≠amos escribir esta fecha as√≠:\nA√±o/Mes/D√≠a: 2022/10/05 D√≠a/Mes/A√±o: 05/10/2022 Mes/D√≠a/A√±o: 10/05/2022 Por otra parte, no es necesario que escribas el a√±o de la fecha con cuatro d√≠gitos. Los siguientes ejemplos usan una notaci√≥n m√°s corta:\nD√≠a/Mes/A√±o corto: 05/10/22 Mes/D√≠a/A√±o corto: 10/05/22 Con respecto a los caracteres, tambi√©n podr√≠as representar esa fecha sin usar el \u0026ldquo;/\u0026rdquo;, reemplaz√°ndolo por caracteres como:\n2022-10-05 2022_10_05 2022 10 05 20221005 Si permitimos que los elementos de la fecha est√©n escritos como palabras, el universo de posibilidades se amplia a√∫n m√°s. Ac√° puedes ver algunas formas alternativas en las que podr√≠as escribir la fecha del ejemplo:\n5 Oct 2022 5 de Octubre de 2022 Octubre 5 2022 A este √∫ltimo caso le podemos a√±adir una complejidad adicional. Dado que las fechas est√°n escritas en lenguaje natural, tambi√©n te puedes encontrar con fechas en otros idiomas: 5th October 5, 2022, Octobre 5 2022, u Outubro 5, 2022.\n2. Zonas horarias # Todo lo anterior asume que las fechas con las que est√°s trabajando tienen la misma zona horaria, pero este no siempre es el caso. Imagina que tienes un dataset con las salidas y llegadas de los vuelos de una aerol√≠nea, expresadas en hora local. En este caso, dos vuelos que tengan 2022/03/01 05:43:00 AM en la columna de hora de llegada pueden hacer referencia a dos momentos completamente distintos.\nEsto sin contar las modificaciones especiales a la hora, como el Horario de Verano ‚Äìo Daylight Savings Time‚Äì, que adelanta la hora del reloj durante los meses m√°s calientes del a√±o y que se utiliza en partes de Estados Unidos, Canad√°, varios pa√≠ses de Europa, Chile, Paraguay, entre otros.\nMapa de lugares que emplean el horario de verano: en az√∫l los que lo usan en el verano boreal, en naranja en el verano austral, en gris claro donde ya no se emplea y en gris oscuro donde nunca se emple√≥. Fuente: Wikipedia.\n3. Intervalos de tiempo # Sup√≥n que est√°s creando un evento en tu calendario que deber√≠a repetirse en un d√≠a espec√≠fico de cada mes; digamos que el quinto d√≠a. Muy probablemente, lo que har√≠as es ir a tu calendario y marcar el 5 de octubre, el 5 de noviembre, el 5 de diciembre y as√≠ sucesivamente. F√°cil, ¬øverdad?\nCambiemos un poco la ejemplo: ahora el evento se deber√≠a repetir cada 30 d√≠as. Siguiendo la instrucci√≥n, lo que deber√≠as hacer es navegar en tu calendario contando los d√≠as a partir del d√≠a inicial y cuando llegues al d√≠a 30, marcar√≠as la siguiente ocurrencia del evento. Es un poco m√°s complejo, pero nada que no pudieras hacer a mano.\nSin embargo, lo que estos ejemplos quieren ilustrar es que no hay una √∫nica manera de hacer aritm√©tica con fechas y horas. En el primer caso, estamos tomando una interpretaci√≥n cotidiana de las fechas, que tiene espacios de tiempo irregulares. Siguiendo el ejemplo, algunas veces vamos a tener 30 d√≠as entre los eventos y otras 31. En el segundo caso, estamos tomando una interpretaci√≥n un poco m√°s precisa, pero que no corresponde con nuestro d√≠a a d√≠a. Muy probablemente, a partir del siguiente mes el n√∫mero del d√≠a no coincida.\nConclusi√≥n # Como te puedes dar cuenta, en contra de lo que podr√≠a parecer a simple vista, la representaci√≥n de una fecha no es algo trivial. Afortunadamente, lenguajes de programaci√≥n como R y Python contienen paquetes que te permiten lidiar con todos estos aspectos f√°cilmente.\nSi quieres aprender a trabajar con lubridate en R, te invito a que leas este post que escrib√≠. Tambi√©n te dejo los posts que escrib√≠ sobre datetime y pandas.\nSi te pareci√≥ √∫til, d√©jame un comentario abajo o comparte este post en tus redes. ¬°√âxitos en tu aprendizaje!\n","date":"15 de diciembre de 2022","externalUrl":null,"permalink":"/posts/3-razones-que-dificultan-el-trabajo-con-fechas/","section":"Publicaciones","summary":"Una de las tareas m√°s habituales en el trabajo de un cient√≠fico de datos tiene que ver con el manejo de fechas.","title":"3 razones que dificultan el trabajo con fechas","type":"posts"},{"content":"","date":"15 de diciembre de 2022","externalUrl":null,"permalink":"/categories/conceptos/","section":"Categories","summary":"","title":"Conceptos","type":"categories"},{"content":"","date":"15 de diciembre de 2022","externalUrl":null,"permalink":"/tags/python/","section":"Tags","summary":"","title":"Python","type":"tags"},{"content":"Hace varias semanas compart√≠ una entrada en el blog en la que hablaba sobre c√≥mo escribir ecuaciones en Jupyter con LaTeX, en la que expliqu√© c√≥mo escribir fracciones, super√≠ndices, sumas, integrales y otras expresiones comunes. En esta ocasi√≥n, te quiero explicar algunas funciones avanzadas de MathJax usando el problema cl√°sico de maximizaci√≥n de utilidad de econom√≠a.\nSi tienes dudas sobre el ejemplo que voy a expicar a continuaci√≥n, te invito a revisar el post en el que explico elementos b√°sicos de MathJax, la implementaci√≥n de LaTeX que funciona en Jupyter.\nMaximizaci√≥n de la Utilidad # En los cursos de econom√≠a, econometr√≠a o machine learning es normal encontrarnos con el planteamiento de problemas de optimizaci√≥n, en los que se pretende maximizar o minimizar una funci√≥n objetivo ‚Äìpor ejemplo una funci√≥n de utilidad o una funci√≥n de costos‚Äì usando alg√∫n argumento de esa funci√≥n y sujeto a alguna condici√≥n.\nEn este ejemplo vas a aprender a escribir la maximizaci√≥n de una funci√≥n de utilidad Cobb-Douglas sujeta a una restricci√≥n presupuestaria, muy com√∫n en los cursos introductorios de microeconom√≠a:\n$$\\begin{align}\u0026amp;\\underset{x_1,x_2}{\\operatorname{max}};U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\\u0026amp;\\mathrm{s.a.};p_1x_1+p_2x_2=w\\end{align}$$\nAntes de seguir, quiero que notes varias cosas de esta expresi√≥n:\nLa palabra $\\operatorname{max}$ y las letras $\\mathrm{s.a.}$ tienen un estilo sin cursiva, a diferencia del resto de letras de la ecuaci√≥n. Los argumentos $x_1,x_2$ aparecen justo debajo de $\\operatorname{max}$ y con un tama√±o de fuente un poco m√°s peque√±o. La restricci√≥n presupuestaria ($p_1x_1+p_2x_2=w$) est√° alineada al operador $\\operatorname{max}$ y no a la funci√≥n de utlidad $U$. Veamos c√≥mo implementar cada uno de estos comportamientos.\nEstilos de fuente # Por defecto, los caracteres que aparecen en las ecuaciones de MathJax aparecen en cursiva. Sin embargo, no en todos los casos vas a querer trabajar de esta manera, como en el caso del ejemplo del problema de maximizaci√≥n de utilidad.\nEn estos casos, es necesario usar la familia de funciones \\math_ incluidas en MathJax, que se resume en la siguiente tabla:\nEstilo Expresi√≥n Salida Cursiva ABCDEFabcdef o \\mathit{ABCDEFabcdef} $ABCDEFabcdef$ Negrilla \\mathbf{ABCDEFabcdef} $\\mathbf{ABCDEFabcdef}$ Redonda con serifas \\mathrm{ABCDEFabcdef} $\\mathrm{ABCDEFabcdef}$ Redonda sin serifas \\mathsf{ABCDEFabcdef} $\\mathsf{ABCDEFabcdef}$ M√°quina de escribir \\mathtt{ABCDEFabcdef} $\\mathtt{ABCDEFabcdef}$ Caligraf√≠a \\mathcal{ABCDEFabcdef} $\\mathcal{ABCDEFabcdef}$ Script \\mathscr{ABCDEFabcdef} $\\mathscr{ABCDEFabcdef}$ Fraktur \\mathfrak{ABCDEFabcdef} $\\mathfrak{ABCDEFabcdef}$ Negrilla de tablero \\mathbb{ABCDEFabcdef} $\\mathbb{ABCDEFabcdef}$ Para caracteres que se esceriben con una expresi√≥n ‚Äìcomo \\alpha ‚Äì hay que usar la funci√≥n \\boldsymbol{} para ponerlas en negrilla. Por ejemplo, \\boldsymbol{\\alpha} devuelve $\\boldsymbol{\\alpha}$.\nAhora bien, no siempre usar \\mathrm{} es la mejor opci√≥n para quitar la fuente cursiva a las ecuaciones. En particular, en lo que se refiere a operadores o nombres de funciones, es una buena idea usar la expresi√≥n \\operatorname{}, dado que incluye espacios antes y despu√©s del operador entre otros comportamientos espec√≠ficos. Mientras que a\\mathrm{operador}b devuelve $a\\mathrm{operador}b$, a\\operatorname{operador}b devuelve $a\\operatorname{operador}b$.\nUnderset y Overset # MathJax incluye varios operadores para lidiar con elementos ubicados encima o debajo de la l√≠nea principal, tal como en el ejemplo de maximizaci√≥n de la utilidad.\nSimilar a las fracciones, para usar estos operadores tenemos que usar la palabra clave \\underset (u \\overset) seguido de dos pares de corchetes. El primero denota el elemento que va debajo (o encima) y el segundo el elemento principal. Es decir:\nExpresi√≥n Salida \\underset{b}{A} $\\underset{b}{A}$ \\overset{b}{A} $\\overset{b}{A}$ Alineaci√≥n # Para la alineaci√≥n horizontal de expresiones, tal como lo que sucede con la restricci√≥n presupuestaria, es necesario usar las expresiones \\begin{align}...\\end{align}, en conjunto con los caracteres \u0026amp; y \\\\. Veamos c√≥mo funciona.\nPara empezar, s√≥lo lo que va dentro de \\begin{align} y \\end{align} va a seguir el comportamiento de alineaci√≥n horizontal. Esto es √∫til porque como te vas a dar cuenta las expresiones en MathJax se pueden volver complejas con facilidad, por lo que es √∫til limitar los comportamientos especiales √∫nicamente al lugar en el que los necesitamos.\nEl caracter \u0026amp; va a indicar los lugares de la expresi√≥n a donde se van a anclar cada una de las l√≠neas para alinearse. Por su parte, \\\\ va a marcar el final de cada l√≠nea (algo parecido a oprimir Enter en tu teclado en Word).\nSopongamos que tenemos la siguiente expresi√≥n, escrita en MathJax como w + x + y + z:\n$$w + x + y + z$$\nAl encerrarla as√≠ \\begin{align} w + x + y + z \\end{align}, no vas a ver ning√∫n comportamiento especial, porque no le hemos indicado hasta d√≥nde van las lineas y d√≥nde tienen que alinease.\n$$\\begin{align} w + x + y + z \\end{align}$$\nSin embargo, si incluimos \\\\, podemos separar las l√≠neas de distintas formas:\n\\begin{align} w \\\\+ x + y + z \\end{align} devuelve: $$\\begin{align} w \\+ x + y + z \\end{align}$$\n\\begin{align} w + x\\\\ + y + z \\end{align} devuelve: $$\\begin{align} w + x \\ + y + z \\end{align}$$\n\\begin{align} w + x + y +\\\\ z \\end{align} devuelve $$\\begin{align} w + x + y + \\z \\end{align}$$\nNota que por defecto las l√≠neas se acomodan de tal forma que las l√≠neas quedan con una justificaci√≥n a la derecha. Puedes cambiar este comportamiento con el caracter \u0026amp;.\nTomemos el √∫ltimo ejemplo. Ouedes acomodar el lugar en el que aparece $+z$ de la siguiente manera:\n\\begin{align} \u0026amp;w + x + y +\\\\ \u0026amp;z \\end{align} devuelve $$\\begin{align} \u0026amp;w + x + y + \\\u0026amp;z \\end{align}$$\n\\begin{align} w + \u0026amp;x + y +\\\\ \u0026amp;z \\end{align} devuelve $$\\begin{align} w + \u0026amp;x + y + \\\u0026amp;z \\end{align}$$\n\\begin{align} w + x + \u0026amp;y +\\\\ \u0026amp;z \\end{align} devuelve $$\\begin{align} w + x + \u0026amp;y + \\\u0026amp;z \\end{align}$$\nJuntemos todo # Pongamos en pr√°ctica todo lo anterior. ¬øRecuerdas los tres puntos que resalt√© al inicio del post? Vamos a implementarlos uno por uno. Comencemos por una expresi√≥n que no tenga el formato deseado. Algo como\nmax\\;x_1,x_2\\;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\;s.a.\\;p_1x_1+p_2x_2=w\n$$max;x_1,x_2;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha};s.a.;p_1x_1+p_2x_2=w$$\nPuedes ver que us√© \\; varias veces en la expresi√≥n. Esta combinaci√≥n de caracteres inserta un espacio en blanco entre las letras, que inclu√≠ para facilitar la legibilidad. Intenta escribirlo t√∫ mismo sin estos caracteres para ver qu√© pasa.\nLo primero es quitarle el formato en cursiva a $max$ y $s.a.$. Para el primero voy a usar la funci√≥n \\operatorname y para el segundo \\mathrm as√≠:\n\\operatorname{max}\\;x_1,x_2\\;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\;\\mathrm{s.a.}\\;p_1x_1+p_2x_2=w.\n$$\\operatorname{max};x_1,x_2;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha};\\mathrm{s.a.};p_1x_1+p_2x_2=w$$\nLo siguiente es hacer que $x_1,x_2$ aparezcan debajo de $\\operatorname{max}$. Para ello, voy a usar \\underset de la siguiente manera:\n\\underset{x_1,x_2}{\\operatorname{max}}\\;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\;\\mathrm{s.a.}\\;p_1x_1+p_2x_2=w\n$$\\underset{x_1,x_2}{\\operatorname{max}};U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha};\\mathrm{s.a.};p_1x_1+p_2x_2=w$$\nAhora vamos a dejar la funci√≥n objetivo y la restricci√≥n en l√≠neas distintas, con \\begin{align}...\\end{align} y \\\\ as√≠:\n\\begin{align}\\underset{x_1,x_2}{\\operatorname{max}}\\;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\;\\\\\\mathrm{s.a.}\\;p_1x_1+p_2x_2=w\\end{align}\n$$\\begin{align}\\underset{x_1,x_2}{\\operatorname{max}};U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha};\\\\mathrm{s.a.};p_1x_1+p_2x_2=w\\end{align}$$\nFinalmente, vamos a alinear la restricci√≥n al operador $\\operatorname{max}$ con el caracter \u0026amp;:\n$$\\begin{align}\u0026amp;\\underset{x_1,x_2}{\\operatorname{max}}\\;U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha}\\;\\\\\u0026amp;\\mathrm{s.a.}\\;p_1x_1+p_2x_2=w\\end{align}$$\n$$\\begin{align}\u0026amp;\\underset{x_1,x_2}{\\operatorname{max}};U(x_1,x_2)=x_1^{\\alpha}x_2^{1-\\alpha};\\\u0026amp;\\mathrm{s.a.};p_1x_1+p_2x_2=w\\end{align}$$\nConclusi√≥n # Aprendiste a cambiar el estilo de fuente, a poner elementos sonre otros y a alinear las l√≠neas de tus expresiones con MathJax. Te invito a que experimentes con nuevas ecuaciones y veas qu√© tipo de comportamientos complejos logras escribir.\nSi te pareci√≥ √∫til, d√©jame un comentario abajo o comparte este post en tus redes. ¬°√âxitos en tu aprendizaje!\n","date":"21 de noviembre de 2022","externalUrl":null,"permalink":"/posts/como-escribir-un-problema-de-optimizacion-en-jupyter/","section":"Publicaciones","summary":"Hace varias semanas compart√≠ una entrada en el blog en la que hablaba sobre c√≥mo escribir ecuaciones en Jupyter con LaTeX, en la que expliqu√© c√≥mo escribir fracciones, super√≠ndices, sumas, integrales y otras expresiones comunes.","title":"¬øC√≥mo escribir un problema de optimizaci√≥n en Jupyter?","type":"posts"},{"content":"","date":"21 de noviembre de 2022","externalUrl":null,"permalink":"/tags/ecuaciones/","section":"Tags","summary":"","title":"Ecuaciones","type":"tags"},{"content":"","date":"21 de noviembre de 2022","externalUrl":null,"permalink":"/tags/latex/","section":"Tags","summary":"","title":"Latex","type":"tags"},{"content":"","date":"21 de noviembre de 2022","externalUrl":null,"permalink":"/tags/markdown/","section":"Tags","summary":"","title":"Markdown","type":"tags"},{"content":"","date":"21 de noviembre de 2022","externalUrl":null,"permalink":"/tags/mathjax/","section":"Tags","summary":"","title":"Mathjax","type":"tags"},{"content":"","date":"20 de septiembre de 2022","externalUrl":null,"permalink":"/tags/args/","section":"Tags","summary":"","title":"Args","type":"tags"},{"content":"Uno de los primeros temas que probablemente abordaste al aprender a programar fue la creaci√≥n de tus propias funciones. Estas ayudan a ordenar las instrucciones que plasmas en el c√≥digo, a ahorrar espacio al no tener que repetir los mismos comandos varias veces, a disminuir la probabilidad de errores de tipeo porque s√≥lo tienes que hacer la correcci√≥n en un lugar, etc. Sin embargo, puede que no hayas trabajado con los argumentos *args y **kwargs, que te van a ayudar cuando no sabes a ciencia cierta cu√°l ser√° el n√∫mero de argumentos de tu funci√≥n.\nUn repaso # Antes que nada, recordemos r√°pidamente c√≥mo se crean funciones en Python. En su versi√≥n m√°s b√°sica, la definici√≥n de una funci√≥n consiste en 3 elementos: la palabra clave def, seguida del nombre que le vas a asignar a la funci√≥n; una lista de par√°metros separados con coma dentro de un par√©ntesis, a su vez seguidos por el caracter de dos puntos, y el bloque de la funci√≥n, que va a contener las instrucciones que quieres que realice. De manera esquem√°tica, la creaci√≥n de una funci√≥n se ve algo como:\ndef mi_funcion(lista_de_argumentos): # Bloque de c√≥digo que describe su funcionamiento. A modo de ejemplo, si quisieras escribir una funci√≥n que tome un input num√©rico y le sume 5, escribir√≠as algo de la forma:\ndef sumar_cinco(mi_numero): salida = mi_numero + 5 return salida Nota que en el ejemplo anterior a√±ad√≠ la palabra clave return, porque quiero que la funci√≥n devuelva el resultado a mi entorno de trabajo y poder trabajar con √©l.\nLo anterior se refiere √∫nicamente a las funciones nombradas. En Python existen las funciones lambda, que son funciones an√≥nimas y que generalmente se reservan para operaciones simples porque s√≥lo pueden tener una expresi√≥n. Si quisieras escribir una funci√≥n lambda para el ejemplo anterior, ser√≠a algo como:\nlambda x: x+5 Para a√±adir un n√∫mero determinado de argumentos a la funci√≥n, basta con separar los argumentos adicionales con coma. Por ejemplo, si quisieramos una funci√≥n que multiplicara cuatro n√∫meros que damos como input, podr√≠amos hacer algo como:\ndef multiplicacion_de_cuatro(arg1, arg2, arg3, arg4): return arg1 * arg2 * arg3 * arg4 No obstante, esta funci√≥n servir√≠a √∫nicamente para las multiplicaciones en las que conoces de antemano que vas a tener exactamente 4 factores. En caso de no tenerlos, Python te devolver√≠a un error al momento de llamar la funci√≥n. En escenarios como estos, *args y **kwargs muestran su utilidad.\n*args # El argumento *args sirve para referirse a una lista de longitud variable de argumentos en la definici√≥n de una funci√≥n. Es decir, no importa si son 2, 5, 10 o 100 argumentos; la funci√≥n podr√° lidiar con esa lista sin que sea necesario definir expl√≠citamente el n√∫mero de argumentos al momento de su creaci√≥n.\nSigamos con el ejemplo de la multiplicaci√≥n. Ya viste en el caso en que defin√≠amos una multiplicaci√≥n con un n√∫mero determinado de argumentos. Para crear una funci√≥n productoria, tenemos que emplear una lista variable de argumentos con *args. Una opci√≥n ser√≠a escribir algo as√≠:\ndef productoria(*args): salida = 1 for arg in args: salida *= arg return salida Por si no lo hab√≠as visto, el operador *= que uso en el bloque de la funci√≥n sirve para abreviar la operaci√≥n de asignaci√≥n y de multiplicaci√≥n. Pude haber escrito esa misma l√≠nea como: salida = arg * salida.\nQuiero que veas dos cosas. Primero, que si bien incluimos la menci√≥n a *args con el asterisco al interior de los par√©ntesis, cuando nos referimos a esta lista arbitraria en el bloque de la funci√≥n no tenemos que hacerlo; podemos escribir √∫nicamente args.\nEsto es porque cuando se usa un asterisco antes de un elemento iterable ‚Äìcomo una lista‚Äì, este se convierte en su propio operador: el unpacking operator u operador de desempacado. El comportamiento de este operador da para un post aparte, pero si quieres leer m√°s al respecto puedes revisar este art√≠culo\nSegundo, que trabajar con una lista variable de argumentos implica cambiar la forma en la que construyes tu funci√≥n. Ya no puedes definir directamente la multiplicaci√≥n, justamente porque no conoces de antemano el n√∫mero de factores. En este caso, tienes que determinar un punto de partida en 1 e iterar a lo largo de los elementos de la lista de longitud variable de argumentos. Si bien este puede no ser el ejemplo m√°s complejo, sirve para ilustrar este cambio de l√≥gica.\n**kwargs # La l√≥gica del argumento **kwargs es muy parecida, s√≥lo que cambia un poco la sintaxis. En vez de definir la lista como antes, ahora se va a definir a trav√©s de parejas key = value. De ah√≠ el kw de **kwargs; es por que son argumentos que van con su palabra clave o keyword.\nEn estricto sentido, mientras lo que va en el lugar de *args se comportaba como una lista o una tupla de Python, por lo que se puede iterar de la manera anterior; lo que va en lugar de **kwargs se comporta como un diccionario. Es decir, que podemos acceder a los elementos usando los m√©todos .items(), .keys() o .values().\nVeamos un ejemplo. Supongamos que queremos una funci√≥n que imprima una serie de atributos para una persona: nombre, apellido y edad. Si sabemos que es exactamente ese n√∫mero de elementos, podemos escribir algo como:\ndef imprimir_caracteristicas(nombre, apellido, mascota): print(\u0026#34;Nombre:\u0026#34;, nombre) print(\u0026#34;Apellido:\u0026#34;, apellido) print(\u0026#34;Mascota:\u0026#34;, mascota) imprimir_caracteristicas(\u0026#34;Camilo\u0026#34;, \u0026#34;Martinez\u0026#34;, \u0026#34;Gato\u0026#34;) Ahora bien, si tenemos un n√∫mero variable de atributos nos enfrentamos con el mismo problema de antes. No los podemos definir expl√≠citamente porque no sabemos cu√°ntos son. Aqu√≠ podemos usar **kwargs.\ndef imprimir_caracteristicas_v2(**kwargs): for (key, value) in kwargs.items(): print(f\u0026#39;{key}: {value}\u0026#39;) imprimir_caracteristicas_v2(nombre = \u0026#34;Camilo\u0026#34;, apellido = \u0026#34;Mart√≠nez\u0026#34;, mascota = \u0026#34;Gato\u0026#34;, nacionalidad = \u0026#34;Colombia\u0026#34;, color_favorito = \u0026#34;Azul\u0026#34;) Todo junto # Por supuesto, todo lo que has visto se puede usar a la vez, incluso con los argumentos tradicionales sin el operador *. Veamos un ejemplo m√°s complejo.\nSupongamos que quieres crear una funci√≥n que me imprima a la consola la descripci√≥n de un curso en un colegio espec√≠fico. Esa funci√≥n tendr√° como inputs el nombre del Colegio, el nombre del curso, los alumnos que est√°n matriculados en ese curso y las clases que tienen que ver en el d√≠a. Vamos a construirla por partes.\nPrimero, creemos una funci√≥n simple que imprima en consola el nombre del colegio y el nombre del curso:\ndef descripcion_curso(nombre_colegio, nombre_curso): print(f\u0026#39;Este es el resumen del curso {nombre_curso} del {nombre_colegio}.\u0026#39;) descripcion_curso(\u0026#34;Colegio Pepito P√©rez\u0026#34;, \u0026#34;4B\u0026#34;) Ahora continuemos escribiendo una lista de longitud arbitraria de estudiantes que est√°n matriculados en ese curso usando *args:\ndef descripcion_curso(nombre_colegio, nombre_curso, *args): print(f\u0026#39;Este es el resumen del curso {nombre_curso} del {nombre_colegio}.\u0026#39;) print(f\u0026#39;Estas son las personas matriculadas: {\u0026#34;, \u0026#34;.join(args)}\u0026#39;) descripcion_curso(\u0026#34;Colegio Pepito P√©rez\u0026#34;, \u0026#34;4B\u0026#34;, \u0026#34;Ana\u0026#34;, \u0026#34;Juan\u0026#34;, \u0026#34;Maria\u0026#34;, \u0026#34;Carlos\u0026#34;) Finalmente, incluyamos las clases que tienen que ver en el d√≠a usando **kwargs:\ndef descripcion_curso(nombre_colegio, nombre_curso, *args, **kwargs): print(f\u0026#39;Este es el resumen del curso {nombre_curso} del {nombre_colegio}.\u0026#39;) print(f\u0026#39;Estas son las personas matriculadas: {\u0026#34;, \u0026#34;.join(args)}\u0026#39;) print(\u0026#39;Estas son las clases del d√≠a:\u0026#39;) for (key, value) in kwargs.items(): print(f\u0026#39;{key}: {value}\u0026#39;) descripcion_curso(\u0026#34;Colegio Pepito Perez\u0026#34;, \u0026#34;4B\u0026#34;, \u0026#34;Ana\u0026#34;, \u0026#34;Juan\u0026#34;, \u0026#34;Carlos\u0026#34;, \u0026#34;Maria\u0026#34;, ma√±ana = \u0026#34;Biolog√≠a\u0026#34;, tarde = \u0026#34;Matem√°ticas\u0026#34;) No necesariamente te vas a encontrar con un ejemplo de este estilo en la vida real. Sin embargo, cuando est√©s utilizando esos tres tipos de argumentos es muy importante preservar el orden: Primero argumentos posicionales, luego *args y luego **kwargs.\nAdicionalmente, para este ejemplo espec√≠fico, no puedes llamar el nombre de los argumentos posicionales ‚Äìp.e. escribiendo descripcion_curso(nombre_colegio = \u0026quot;Colegio Pepito P√©rez\u0026quot;)‚Äì porque te generar√° un error al tener argumentos posicionales despu√©s de argumentos con palabra clave. Puedes leer m√°s al respecto ac√°.\nConclusi√≥n # Espero que te hayan quedado m√°s claros los conceptos de *args y **kwargs. Te dejo la tarea de experimentar y crear funciones m√°s complejas que hagan uso de estas listas de par√°metros de tama√±o variable. Si te gust√≥, te invito a dejarme un comentario y a compartir este art√≠culo en tus redes sociales.\n","date":"20 de septiembre de 2022","externalUrl":null,"permalink":"/posts/args-y-kwargs-en-python/","section":"Publicaciones","summary":"Uno de los primeros temas que probablemente abordaste al aprender a programar fue la creaci√≥n de tus propias funciones.","title":"Args y Kwargs en Python","type":"posts"},{"content":"","date":"20 de septiembre de 2022","externalUrl":null,"permalink":"/tags/kwargs/","section":"Tags","summary":"","title":"Kwargs","type":"tags"},{"content":"","date":"3 de septiembre de 2022","externalUrl":null,"permalink":"/categories/dataviz/","section":"Categories","summary":"","title":"Dataviz","type":"categories"},{"content":"","date":"3 de septiembre de 2022","externalUrl":null,"permalink":"/tags/estructura/","section":"Tags","summary":"","title":"Estructura","type":"tags"},{"content":"","date":"3 de septiembre de 2022","externalUrl":null,"permalink":"/tags/ggplot/","section":"Tags","summary":"","title":"Ggplot","type":"tags"},{"content":"","date":"3 de septiembre de 2022","externalUrl":null,"permalink":"/tags/gram%C3%A1tica/","section":"Tags","summary":"","title":"Gram√°tica","type":"tags"},{"content":"En diversas aplicaciones de visualizaci√≥n de datos, la creaci√≥n de un gr√°fico se limita a dar clic a un bot√≥n que te muestra directamente el resultado final. Si bien esto es muy conveniente desde el punto de vista de un usuario ocasional, tambi√©n te puede quitar la posibilidad de entender con m√°s detalle los elementos que hacen que un gr√°fico funcione. Por esta raz√≥n, hoy quiero hablarte de la Gram√°tica de los Gr√°ficos.\nLa gram√°tica de los gr√°ficos # La gram√°tica de los gr√°ficos es un esquema desarrollado por Claus Wilke en un libro hom√≥nimo, en el que detalla los elementos que constituyen un gr√°fico. Si has trabajado con {ggplot2} en R, ver√°s que ya tienes un entendimiento intuitivo de estos elementos, dado que este paquete se construy√≥ con base en las l√≥gicas de este esquema ‚Äìde ah√≠ el \u0026lsquo;gg\u0026rsquo; de \u0026lsquo;ggplot\u0026rsquo;, Grammar of Graphics‚Äì.\nEn lo que sigue de esta entrada de blog, voy a seguir la explicaci√≥n que hacen en el libro de ggplot2: Elegant Graphics for Data Analysis, porque considero que tiene una explicaci√≥n un poco m√°s sencilla y menos t√©cnica que el libro de Wilke.\nDatos y mapeo # De acuerdo con este esquema, los gr√°ficos se componen de dos elementos clave: datos y mapeo.\nLos datos son la informaci√≥n que se va a transformar en un formato visual para que tu audiencia los pueda consumir. Si lo pensamos como una pregunta, los datos son el ¬øqu√©?.\nPor su parte, el mapeo ‚Äìo mapping en ingl√©s‚Äì es la forma en la que se va a realizar esa transformaci√≥n. Es decir, son el ¬øc√≥mo? El mapeo se compone de los siguientes 5 elementos: capas, escalas, coordenadas, facetas y tema.\na. Capas # Las capas son las geometr√≠as que ves directamente en el gr√°fico, que est√°n asociadas a un estad√≠stico construido a partir de los datos: una identidad, una media, una mediana, un conteo de observaciones, etc.\nPor ejemplo, la capa que caracteriza a un gr√°fico de dispersi√≥n es un conjunto de puntos que muestran un valor que est√° en los datos originales, mientras que la capa que caracteriza a un gr√°fico de columnas es un conjunto de barras que pueden est√°r asocadas al conteo de observaciones en ciertos rangos de valores de una variable.\nb. Escalas # Las escalas describen la forma en que se presentan las capas de manera visual en el gr√°fico. Puedes tener escalas de posici√≥n (ejes x, y, o z), de color, de tama√±o, de forma, de tipo de l√≠nea, etc. Estas escalas pueden ser discretas o cont√≠nuas, dependiendo de los datos y del mensaje que quieras enviar con el gr√°fico.\nSiguiendo el ejemplo anterior, en un gr√°fico de dispersi√≥n se suele trabajar con unos ejes x e y cont√≠nuos, mientras que en el gr√°fico de columnas suele aparece un eje x discreto y un eje y cont√≠nuo. Lo anterior, al margen de que quieras a√±adir m√°s informaci√≥n coloreando los elementos del gr√°fico seg√∫n una variable adicional.\nc. Coordenadas # El sistema de coordenadas describe la forma c√≥mo esas escalas y esas geometr√≠as se pintan en el plano del gr√°fico, asumiendo uno en dos dimensiones. En general, el sistema de coordenadas que te vas a encontrar es el de las coordenadas cartesianas, pero cuando lidies con mapas y otras visualizaciones especiales, trendr√°s otros tipos de coordenadas.\nd. Facetas # Las facetas definen la manera como se pueden dividir los elementos anteriores en gr√°ficos m√°s peque√±os. Es decir, cuando pasas de tener un gran lienzo donde se pintas todos los datos a lienzos m√°s peque√±os, separados de acuerdo con alguna variable categ√≥rica.\nPor ejemplo, si tienes una variable asociada al continente para el gr√°fico de dispersi√≥n, podr√≠as presentar toda la informaci√≥n en un s√≥lo gr√°fico, o separarlo en varios gr√°ficos del mismo tipo de acuerdo con dicha variable.\ne. Tema # Por √∫ltimo, el tema controla todos los dem√°s elementos est√©ticos que intervienen en la manera como se ve el gr√°fico. Colores de los t√≠tulos, tama√±o del texto, si el gr√°fico tiene o no un borde, etc.\nSi estamos hablando de un gr√°fico de tiplo exploratorio, quiz√°s el tema no es el elemento m√°s importante. Sin embargo, para un gr√°fico con fines de publicaci√≥n o divulgaci√≥n, este cobra m√°s importacia para capturar la atenci√≥n de tu audiencia y transmitir los mensajes correctos.\nNo te preocupes si estos conceptos no te quedaron claros con una primera le√≠da. Te voy a mostrar algunos ejemplos para que sea un poco m√°s evidente.\nEjemplos # Todos los ejemplos que te muestro a continuaci√≥n los extraje del blog de Datawrapper. Este es un excelente recurso para que revises si quieres un poco de inspiraci√≥n para armar tus gr√°ficos.\nEjemplo 1 # Este gr√°fico muestra las respuestas de las personas encuestadas por Pew Research Center en varios pa√≠ses, con respecto a los aspectos que le dan sentido a sus vidas. Te invito a que, antes de seguir, le des una mirada al gr√°fico y trates de extraer los elementos que se describen con anterioridad.\nFuente: https://blog.datawrapper.de/meaning-of-life-international-survey/\nVeamos cada uno de los elementos por separado:\nCapas. Como puedes ver, la geometr√≠a que se usa para mostrar los datos es un conjunto de puntos. Escalas. Tenemos 3 escalas que conviven en el gr√°fico: La escala x cont√≠nua que muestra el porcentaje de respuestas que incluyeron cada uno de los asuntos. La escala y discreta con los pa√≠ses en los que se realiz√≥ la encuesta y, La escala de color discreto que describe los asuntos puntuales como mascotas, pareja, etc. Coordenadas. En este caso, el sistema de coordenadas es cartesiano. Facetas. Tenemos un solo lienzo, es decir s√≥lo una faceta. Tema. Todos los elementos adicionales, como que el t√≠tulo sea m√°s grande que el resto de texto y est√© en negrilla, que el fondo sea blanco, que la nota al ginal del gr√°fico est√© en color gris, etc. Fuente: Elaboraci√≥n propia con base en https://blog.datawrapper.de/meaning-of-life-international-survey/\nEjemplo 2 # Este gr√°fico muestra la red de ciclorrutas en 6 ciudades del mundo. Repite el ejercicio anterior y abajo te muestro el resultado.\nFuente: https://blog.datawrapper.de/international-bike-lanes-maps/\nVeamos:\nCapas. Este pudo ser un poco m√°s dificil de abstraer, pero en general los mapas usan puntos, l√≠neas y pol√≠gonos para mostrar los datos georreferenciados. En este caso, ignorando el mapa de fondo, el borde de cada ciudad es un pol√≠gono y las ciclorrutas se representan con l√≠neas. Escalas. A pesar de que ya no estamos trabajando con un gr√°fico como el de arriba, las escalas son de posici√≥n: ejes x e y cont√≠nuos. Podr√≠amos pensar tambi√©n que los colores del pol√≠gono (gris) y de las l√≠neas (morado) son una escapa de color, aunque no parecen estar asociadas a una variable espec√≠fica en los datos. Coordenadas. Como lo mencionaba con anterioridad, cuando hablamos de mapas las coordenadas ya no son cartesianas sino alguna proyecci√≥n espec√≠fica del vol√∫men tridimensional de la tierra, que no conocemos. Facetas. En este caso, tenemos un mapa similar para 6 ciudades distintas. Entonces podemos hablar de que tenemos 6 facetas separadas. Tema. Tenemos el color de fondo en blanco, el nombre de las ciudades un poco m√°s grande que el resto de texto y el subt√≠tulo para cada ciudad en morado. Fuente: Elaboraci√≥n propia con base en https://blog.datawrapper.de/international-bike-lanes-maps/\nEjemplo 3 # Vamos con el √∫ltimo. Los dos gr√°ficos muestran el recorrido de las rutas de avi√≥n de Tokyio a Londres y Par√≠s, y c√≥mo se redirigieron para no pasar por espacio a√©reo Ruso. Ambos gr√°ficos contienen la misma informaci√≥n pero diferen en s√≥lo uno de los elementos del mapeo. ¬øCu√°l crees que es?\nFuente: https://blog.datawrapper.de/flight-routes-map-projections/\nCapas. Estos mapas emplean las 3 geometr√≠as b√°sicas de los mapas: puntos, l√≠neas y pol√≠gonos. Escalas. Al igual que el ejemplo anterior, se est√°n pintando los mapas en unas escalas x e y cont√≠nuas. Coordenadas. Esta es la principal diferencia entre los dos. Mientras el primero utiliza una proyecci√≥n llamada Mercator Web, el segundo usa una proyecci√≥n ortogr√°fica. Facetas. Como ambos mapas est√°n por separado, podemos decir que tienen 1 faceta cada uno. Tema. No podemos decir mucho del tema m√°s all√° del color de fondo y el formato de la letra de las etiquetas de las ciudades y los vuelos. Conclusi√≥n # Con esto, ya deber√≠as poder identificar los elementos de la Gram√°tica de los Gr√°ficos en las visualizaciones que te encuentres. Pensar expl√≠citamente en la estructura de un gr√°fico te va a ayudar a mejorar su dise√±o y, por qu√© no, romper algunas reglas para generar productos a√∫n m√°s interesantes.\nTe invito a compartir este post en tus redes si te pareci√≥ √∫til y a que practiques los ejercicios de los ejemplos con gr√°ficos que te encuentres en tu d√≠a a d√≠a.\n","date":"3 de septiembre de 2022","externalUrl":null,"permalink":"/posts/la-anatomia-de-un-grafico/","section":"Publicaciones","summary":"En diversas aplicaciones de visualizaci√≥n de datos, la creaci√≥n de un gr√°fico se limita a dar clic a un bot√≥n que te muestra directamente el resultado final.","title":"La anatom√≠a de un gr√°fico","type":"posts"},{"content":" Conoce algunos de los proyectos en los que he trabajado üòé ","date":"1 de septiembre de 2022","externalUrl":null,"permalink":"/portfolio/","section":"Portafolio","summary":" Conoce algunos de los proyectos en los que he trabajado üòé ","title":"Portafolio","type":"portfolio"},{"content":"","date":"1 de septiembre de 2022","externalUrl":"https://github.com/camartinezbu/tidytuesday","permalink":"/portfolio/tidytuesday/","section":"Portafolio","summary":"Una din√°mica de la comunidad de R4DS que consiste en la elaboraci√≥n de un gr√°fico semanal usando un dataset espec√≠fico.","title":"TidyTuesday","type":"portfolio"},{"content":" Escribir ecuaciones como las que puedes encontrar en un libro de texto o una publicaci√≥n acad√©mica parece un asunto complejo. Sin embargo, con MathJax esta tarea se vuelve muy sencilla y al final de este post podr√°s crear ecuaciones para tus cuadernos de Jupyter y tus documentos de Markdown.\n¬øQu√© es MathJax? # MathJax es un motor para la visualizaci√≥n de ecuaciones en Javascript que funciona con la notaci√≥n de LaTeX, que funciona en todos los navegadores de internet modenos. De acuerdo con la documentaci√≥n de este motor:\n\u0026ldquo;Uno s√≥lo debe incluir MathJax y matem√°ticas en una p√°gina web, y MathJax se encarga del resto.\u0026rdquo;\nEste motor se usa tanto en Jupyter como en el Markdown usado por Github, as√≠ que sin duda va a ser una herramienta muy √∫til para que aprendas a usarla.\nAntes de entrar en detalle sobre las expresiones que te permitir√°n escribir s√≠mbolos para tus ecuaciones, tienes que saber dos cosas: qu√© es lo que procesa MathJax en ecuaciones y c√≥mo agrupa los elementos en una expresi√≥n que escribas.\nDelimitar una ecuaci√≥n # Lo primero que hay que indicarle a MathJax es cu√°les caracteres corresponden a una ecuaci√≥n que queremos mostrar en pantalla. Para ello, tenemos dos opciones: ecuaciones en la misma l√≠nea o ecuaciones en l√≠nea propia.\nEn el primer caso, vamos a mostrar la ecuaci√≥n siguiendo el mismo rengl√≥n, lo que puede servir para mostrar alg√∫n s√≠mbolo en espec√≠fico o una ecuaci√≥n corta. Esto lo hacemos encerrando los caracteres entre s√≠mbolos de pesos $. Por ejemplo, podemos escribir la ecuaci√≥n $x=0$ al digitar $x=0$.\nEn el segundo, mostramos la ecuaci√≥n en un rengl√≥n aparte, lo que es especialmente √∫til para ecuaciones grandes. Lo √∫nico que tenemos que hacer es crear una nueva l√≠nea y encerrar los caracteres en doble s√≠mbolo de pesos $$. Entonces, el resultado de escribir la misma ecuaci√≥n de arriba digitando $$x=0$$ es:\n$$x=0$$\nSi no dejas estos caracteres encerrados por doble par√©ntesis en una nueva l√≠nea, no se mostrar√° la ecuaci√≥n como arriba.\nGrupos # Lo otro que es importante aprender es la forma en que MathJax lidia con grupos de caracteres. Dado que necesitamos escribir ecuaciones de manera precisa, este motor agrupa elementos usando los corchetes: {}. Veamos un ejemplo.\nSup√≥n que quieres escribir una constante a elevada a una potencia de 20. Lo primero que se te puede venir a la cabeza es escribir algo como $a^20$. No obstante, lo que mostrar√≠a MathJax ser√≠a esto $a^20$. Esto sucede porque el motor lidia con los caracteres uno por uno.\nPara mostrar correctamente la potencia, tienes que agrupar los caracteres del 20 de la siguiente manera $a^{20}$ para tener lo que esperabas: $a^{20}$.\nPor este motivo, de ahora en adelante vas a ver de manera recurrente el uso de los corchetes en muchas f√≥rmulas. Ahora si, veamos c√≥mo construir ecuaciones m√°s complejas.\nOperadores b√°sicos # MathJax cuenta con un gran n√∫mero de s√≠mbolos para denotar operadores. Ac√° te dejo una lista no exhaustiva de ellos, la mayor√≠a de los cuales se escriben con un \\, seguido de una secuencia espec√≠fica de caracteres.\nAritm√©ticos # Expresi√≥n Salida a + b $a + b$ a - b $a-b$ a \\times b $a \\times b$ a \\pm b $a \\pm b$ a ^ b $a ^ b$ a \\pm b $a \\pm b$ Comparaci√≥n # Expresi√≥n Salida a \\lt b $a \\lt b$ a \\gt b $a \\gt b$ a \\le b $a \\le b$ a \\ge b $a \\ge b$ a = b $a = b$ a \\neq b $a \\neq b$ Conjuntos # Expresi√≥n Salida A \\cup B $A \\cup B$ A \\cap B $A \\cap B$ A \\setminus B $A \\setminus B$ A \\subset B $A \\subset B$ A \\subseteq B $A \\subseteq B$ A \\subsetneq B $A \\subsetneq B$ A \\supset B $A \\supset B$ A \\supseteq B $A \\supseteq B$ A \\supsetneq B $A \\supsetneq B$ A \\in B $A \\in B$ A \\notin B $A \\notin B$ \\emptyset $\\emptyset$ \\varnothing $\\varnothing$ L√≥gicos # Expresi√≥n Salida p \\land q $p \\land b$ p \\lor q $p \\lor b$ \\lnot p $\\lnot p$ \\foraall b $\\forall p$ \\exists p $\\exists p$ \\top $\\top$ \\bot $\\bot$ \\vdash $\\vdash$ \\Vdash $\\Vdash$ Subindices y Super√≠ndices # Cuando escribes ecuaciones te puedes encontrar con una notaci√≥n que implique a√±adir informaci√≥n adicional a una variable, como $a_i$, $b^2$ o $\\hat{c}$. Los elementos que van sobre la variable se llaman super√≠ndices y los que van debajo sub√≠ndices.\nPara escribir un sub√≠ndice necesitas poner la variable seguida de un _ y el caracter o caracteres que hacen parte del sub√≠ndice. La expresi√≥n $a_i$ es el resultado de $a_i$.\nPor su parte, para los super√≠ndices, debes escribir la variable principal seguida de ^ y el caracter o caracteres que hacen parte de tu super√≠ndice. Para mostrar $b^2$ escrib√≠ $b^2$.\nNo olvides usar correctamente los corchetes. Si tienes varios caracteres en el mismo sub√≠ndice o super√≠ndice, es necesario que los encierres con {}.\nPor √∫ltimo, hay algunas funciones que te permiten escribir caracteres especiales como $\\hat{c}$ sobre las variables. En la siguiente tabla encuentras algunos de ellos:\nExpresi√≥n Salida \\hat{x} o \\widehat{x} $\\hat{x}$ \\bar{x} o \\overline{x} $\\bar{x}$ \\dot{x} $\\dot{x}$ \\ddot{x} $\\ddot{x}$ \\vec{x} $\\vec{x}$ \\overtightarrow{x} $\\overrightarrow{xy}$ \\overleftarrow{x} $\\overleftarrow{xy}$ \\overleftrightarrow{x} $\\overleftrightarrow{xy}$ La diferencia entre \\hat{x} y \\widehat{x} es que el primero s√≥lo funciona para un caracter y el segundo para varios. Esto mismo aplica para \\bar{x} o \\overline{x}.\nFracciones # Te voy a mostrar dos formas para escribir fracciones de este estilo:\n$${a\\over b}$$\nLa primera es usando la forma \\frac{a}{b}, que te permite poner en corchetes aparte el numerador y el denominador.\nLa segunda es incluyendo tanto el numerador como el denominador en el mismo grupo con la estructura {a\\over b}.\nEn algunos casos puede ser m√°s f√°cil trabajar de la sergunda forma, especialmente cuando tienes ecuaciones complejas.\nTema aparte son las fracciones cont√≠nuas como esta\n$$x = a_0 + \\cfrac{b_1}{a_1 + \\cfrac{b_2}{a_2 + \\cfrac{b_3}{\u0026hellip;}}}$$\nque tienen su propia funci√≥n: \\cfrac{}{}. La ecuaci√≥n anterior la gener√© usando:\n$$x = a_0 + \\cfrac{b_1}{a_1 + \\cfrac{b_2}{a_2 + \\cfrac{b_3}{...}}}$$ Las ecuaciones con fracciones cont√≠nuas se pueden volver complejas muy r√°pido. Ten mucho cuidado con el uso de los corchetes y c√≥mo est√°s encadenando las expresiones \\cfrac{}{}.\nPar√©ntesis # La manera de escribir par√©ntesis va a depender de si lo que quieres hacer es envolver elementos que ocupan una o m√°s l√≠neas.\nPara una sola l√≠nea, basta con escribir los caracteres normales (), [] o para el caso de los corchetes \\{ y \\}. Estos s√≠mbolos adicionales son para indicarle a MathJax que queremos mostrar un corchete y no que estamos armando un grupo. As√≠ podemos cosntruir cosas como $(a+b)$.\nSi hablamos de varias l√≠neas - por ejemplo para fracciones - tenemos que a√±adir \\left y \\right a esos s√≠mbolos. Sup√≥n que quieres escribir siguiente fracci√≥n entre par√©ntesis:\n$${x+1\\over 2}$$\nSi escribes √∫nicamente $({x+1\\over 2})$ vas a tener el siguiente resultado.\n$$({x+1\\over 2})$$\nPero si escribes $\\left({x+1\\over 2}\\right)$ tendr√°s:\n$$\\left({x+1\\over 2}\\right)$$\nAqu√≠ algunos s√≠mbolos adicionales que se comportan con la misma l√≥gica de los par√©ntesis:\nExpresi√≥n Salida ` x \\vert x \\vert $\\vert x \\vert$ \\Vert x \\Vert $\\Vert x \\Vert$ \\langle x \\rangle $\\langle x\\rangle$ \\lceil x \\rceil $\\lceil x \\rceil$ \\lfloor x \\rfloor $\\lfloor x \\rfloor$ Funciones nombradas # Si bien podr√≠as pensar que s√≥lo necesitas escribir algo como $sin(x)$, usualmente las letras de estas funciones no se escriben en cursiva. Por tal motivo, hay expresiones especiales para \\sin, \\cos, \\tan y otras como \\ln, \\max y \\min. Mira la diferencia entre escribir $sin(x)$ - $sin(x)$ - y $\\sin(x)$ - $\\sin(x)$ -.\nLimites # Algo similar sucede con los l√≠mites -tienen la expresi√≥n \\lim-, s√≥lo que en este caso es necesario a√±adir el elemento que va debajo con _. Por ejemplo, si quieres escribir la definici√≥n del n√∫mero de Euler\n$$\\lim_{x\\to\\infty} \\left(1 + {1\\over n}\\right)^n$$\ndeber√≠as escribir algo como:\n$$\\lim_{x\\to\\infty} \\left(1 + {1\\over n}\\right)^n$$ Como pouedes ver, la flecha hacia la derecha que indica hasta d√≥nde va el l√≠mite ($\\to$) se escribe \\to y el s√≠mbolo de infinito ($\\infty$) con \\infty.\nSumas e Integrales # Estos s√≠mbolos usualmente incluyen unos elementos arriba y abajo, por lo que tienes que usar de manera simult√°nea los operadores de sub√≠ndice (_) y super√≠ndice (^).\nPor ejemplo, escribir $\\sum_{n = 1}^{100} n$ te dar√° como resultado:\n$$\\sum_{n = 1}^{100} n$$\nEn la siguiente tabla hay una lista de s√≠mbolos que se comportan de la misma manera.\nExpresi√≥n Salida \\int $\\int$ \\iint $\\iint$ \\iint $\\iiint$ \\prod $\\prod$ \\bigcup $\\bigcup$ \\bigcap $\\bigcap$ Conclusi√≥n # Ya tienes una gu√≠a para empezar a escribir ecuaciones tan complejas como quieras, y as√≠ complementar tus documentos de Markdown o tus cuadernos de Jupyter.\nPor supuesto, hay muchos m√°s s√≠mbolos y ajustes que puedes hacer que no cubr√≠ en este post. Te invito a consultar este art√≠culo de referencia en el que se entra m√°s en detalle sobre MathJax.\nSi te pareci√≥ √∫til, d√©jame un comentario abajo o comparte este post en tus redes. ¬°√âxitos en tu aprendizaje!\n","date":"19 de julio de 2022","externalUrl":null,"permalink":"/posts/la-guia-definitiva-para-escribir-ecuaciones-en-jupyter/","section":"Publicaciones","summary":"Escribir ecuaciones como las que puedes encontrar en un libro de texto o una publicaci√≥n acad√©mica parece un asunto complejo.","title":"La gu√≠a definitiva para escribir ecuaciones en Jupyter","type":"posts"},{"content":"","date":"11 de julio de 2022","externalUrl":null,"permalink":"/categories/cookiecutter/","section":"Categories","summary":"","title":"Cookiecutter","type":"categories"},{"content":"","date":"11 de julio de 2022","externalUrl":null,"permalink":"/tags/cookiecutter/","section":"Tags","summary":"","title":"Cookiecutter","type":"tags"},{"content":"En una entrada de blog anterior te compart√≠ dos plantillas para proyectos de ciencia de datos que hice en Cookiecutter. En esta ocasi√≥n quiero ense√±arte c√≥mo puedes crear tus propias plantillas y ajustarlas a tu flujo de trabajo espec√≠fico.\nAntes de empezar, debes tener Python y Cookiecutter instalado tu computador. Para ver c√≥mo se hace puedes ir a la secci√≥n correspondiente del post original o consultar la documentaci√≥n de Cookiecutter.\nSintaxis # Lo primero que debes saber es que Cookiecutter usa una sintaxis especial que viene de Jinja, el motor de plantillas en el que est√° escrito. Dado que el c√≥digo de la plantilla tiene que convivir con c√≥digo en otros lenguajes de programaci√≥n, es muy importante poder diferenciar lo que est√° escrito en Jinja de lo que no.\nPor tal raz√≥n, las lineas con las que vas a personalizar tu plantilla est√°n encerradas en corchetes ({}). En adelante me voy a referir a las l√≠neas de Jinja como bloques.\nDependiendo los caracteres que delimiten esos bloques, vas a lograr distintas funciones:\nPara imprimir el contenido en la salida de la plantilla, vas a encerrar el c√≥digo en doble corchete: {% raw %}{{...}}{% endraw %}. Por ejemplo, si quieres llamar la variable autor de la plantilla, tienes que escribir algo como {% raw %}{{ cookiecutter.autor }}{% endraw %}.\nPara usar estructuras de control como if o for, encierras el c√≥digo en corchetes y signos de porcentaje: {% raw %}{%...%}{% endraw %}. Dependiendo de la estructura de control, tambi√©n vas a tener que cerrar con un {% raw %}{% endif %}{% endraw %} o {% raw %}{% endfor %}{% endraw %}. Por ejemplo:\n{% raw %}\n{% if cookiecutter.condicion %} ¬°Muestra esto! {% endif %} {% endraw %}\nPara incluir un comentario, encierras el contenido en corchetes y numerales: {% raw %}{#...#}{% endraw %}: {% raw %}{# Esto es un comentario #}{% endraw %}.\nCreaci√≥n de la plantilla # Teniendo lo anterior, vas a crear una nueva carpeta, que en adelante llamar√© la carpeta madre, y dentro de ella una con este nombre: {% raw %}{{ cookiecutter.project_slug }}{% endraw %}. Ahora que entiendes la sintaxis de Jinja, ya puedes intuir que esta √∫ltima se va a llamar seg√∫n el contenido de la variable project_slug. M√°s adelante veremos la configuraci√≥n de esta y otras variables.\nAhora, dentro de esa carpeta {% raw %}{{ cookiecutter.project_slug }}{% endraw %} que creaste vas a organizar la estructura de tu espacio de trabajo: carpetas y subcarpetas, .gitignore, un README.md, cuadernos de jupyter, etc. A partir de √©sta es que se generar√° tu proyecto.\nAl interior de los archivos que crees vas a poder trabajar con los bloques de Jinja que viste antes. Por ejemplo, para que el README.md de tu proyecto tenga un nombre y una descripci√≥n personalizada, puedes escribir en ese archivo algo como:\n{% raw %}\n# {{ cookiecutter.project_title }} Autor: {{ cookiecutter.project_author_name }} {{ cookiecutter.project_description }} {% endraw %}\nConfiguraci√≥n de variables # Naturalmente, para que la plantilla funcione todas las variables que llamas tienen que existir. Para ello, en la carpeta {% raw %}{{ cookiecutter.project_slug }}{% endraw %} tienes que crear un archivo llamado cookiecutter.json. Usando l√≠neas como las que est√°n a continuaci√≥n vas a enumerar las variables para tu proyecto, que a su vez ser√°n las que la consola te va a preguntar cuando generes un proyecto a partir de la plantilla.\n{% raw %}\n{ \u0026#34;project_title\u0026#34;: \u0026#34;Mi plantilla\u0026#34;, \u0026#34;project_slug\u0026#34;: \u0026#34;{{ cookiecutter.project_title.lower().replace(\u0026#39; \u0026#39;, \u0026#39;_\u0026#39;).replace(\u0026#39;-\u0026#39;, \u0026#39;_\u0026#39;) }}\u0026#34;, \u0026#34;project_description\u0026#34;: \u0026#34;Ac√° va la descripci√≥n.\u0026#34;, \u0026#34;project_author_name\u0026#34;: \u0026#34;Tu nombre\u0026#34; } {% endraw %}\nEn esta configuraci√≥n, tenemos una variable para el t√≠tulo del proyecto, una variable para un apodo del proyecto que se genera autom√°ticamente con un par de funciones de Python, una descripci√≥n para el proyecto y el nombre de quien lo cre√≥. Si no a√±ades informaci√≥n en la consola, √©ste tomar√° los valores por defecto que aparecen arriba.\nCon lo anterior, puedes configurar comportamientos tan complejos como quieras. Por ejemplo, podr√≠as crear una variable que pregunte si quieres incluir ciertas librer√≠as de Python en tu proyecto e incluir unos bloques {% raw %}{% if ... %} {% endif %}{% endraw %} en un archivo environment.yml para luego instalarlas con Conda.\nEl l√≠mite es tu creatividad y lo granular que quieras llegar a ser con el comportamiento de la plantilla.\nHooks # Finalmente, Cookiecutter tambi√©n incluye una funcionalidad para ejecutar c√≥digo antes y despu√©s de generar el proyecto con base en la plantilla. A esto se le llama Hooks.\nEn s√≠ntesis, son l√≠neas de c√≥digo de Python que incluyes en scripts llamados pre_gen_project.py o post_gen_project.py - dependiendo el comportamiento que quieras que hagan - y que se alojan en una carpeta llamada hooks en la carpeta madre.\n¬°Ojo! Estos scripts NO van en la carpeta {% raw %}{{ cookiecutter.project_slug }}{% endraw %}.\nUsando hooks, puedes hacer cosas como generar autom√°ticamente un repositorio de Git:\nimport subprocess subprocess.call([\u0026#39;git\u0026#39;, \u0026#39;init\u0026#39;]) subprocess.call([\u0026#39;git\u0026#39;, \u0026#39;add\u0026#39;, \u0026#39;*\u0026#39;]) subprocess.call([\u0026#39;git\u0026#39;, \u0026#39;commit\u0026#39;, \u0026#39;-m\u0026#39;, \u0026#39;Initial commit\u0026#39;]) Conclusi√≥n # Luego de configurar tu plantilla, puedes conservar la carpeta madre en tu m√°quina local o subirla a un repositorio de github para llamarla de manera remota. Si la plantilla qued√≥ creada correctamente, vas a poder crear un proyecto con base en ella corriendo el siguiente comando en consola:\n# Si est√° en tu m√°quina local cookiecutter \u0026lt;Ruta de Archivo\u0026gt; # Si est√° en Gitub cookiecutter \u0026lt;URL del repositorio\u0026gt; Espero que te animes a crear tus propias plantillas y te deseo buena suerte experimentando con esta herramienta. Si te pareci√≥ de utilidad esta entrada no olvides compartir o dejarme un comentario.\n","date":"11 de julio de 2022","externalUrl":null,"permalink":"/posts/crea-tu-propia-plantilla-en-cookiecutter/","section":"Publicaciones","summary":"En una entrada de blog anterior te compart√≠ dos plantillas para proyectos de ciencia de datos que hice en Cookiecutter.","title":"Crea tu propia plantilla en Cookiecutter","type":"posts"},{"content":"","date":"11 de julio de 2022","externalUrl":null,"permalink":"/tags/plantilla/","section":"Tags","summary":"","title":"Plantilla","type":"tags"},{"content":"","date":"11 de julio de 2022","externalUrl":null,"permalink":"/tags/proyecto/","section":"Tags","summary":"","title":"Proyecto","type":"tags"},{"content":"Hace algunos meses decid√≠ participar en el #30DayChartChallenge, un desaf√≠o propuesto por Dominic Roy√© y C√©dric Scherer que consist√≠a en realizar un gr√°fico durante cada d√≠a de Abril con una tem√°tica espec√≠fica.\nAunque no logr√© completar los 30 d√≠as, durante este desaf√≠o pude potenciar mis conocimientos en ggplot2, y de paso, conoc√≠ varios paquetes que permiten extender la funcionalidad de este maravilloso paquete para crear gr√°ficos a√∫n m√°s interesantes.\nEn este blog quiero compartir contigo 4 paquetes que me utilic√© y que espero que te gusten. Encontrar√°s los enlaces a la documentaci√≥n de los paquetes al final del post.\n1. ggtext # ggtext es un paquete que aumenta las posibilidades para dar formato a textos en ggplot2, al incluir funcionalidades propias de Markdown y HTML. La funcionalidad que m√°s utilic√© durante el desaf√≠o fue definir colores y estilos para palabras espec√≠ficas, cosa que no se puede hacer usando la funci√≥n theme(). Por ejemplo:\nFigura 1. Ejemplo ggtext.\nPara ello, debes usar tambi√©n el paquete glue(), incluir un par de etiquetas de HTML a tu texto normal y definir el texto que modificaste como un element_markdown() en la funci√≥n theme().\nlibrary(ggtext) library(glue) #¬†Gr√°fico b√°sico ggplot(iris, aes(x=Petal.Length, y = Petal.Width)) + geom_point() + labs( title = \u0026#34;Longitud vs Ancho de p√©talo\u0026#34;, x = \u0026#34;Longitud\u0026#34;, y = \u0026#34;Ancho\u0026#34; ) # Gr√°fico con ggtext ggplot(iris, aes(x=Petal.Length, y = Petal.Width)) + geom_point() + labs( title = glue(\u0026#34;\u0026lt;i style=\u0026#39;color:\\\u0026#34;red\\\u0026#34;\u0026#39;\u0026gt;Longitud\u0026lt;/i\u0026gt; vs \u0026lt;b style=\u0026#39;color:\\\u0026#34;blue\\\u0026#34;\u0026#39;\u0026gt;ancho\u0026lt;/b\u0026gt; del \u0026lt;b style=\u0026#39;color:\\\u0026#34;darkgreen\\\u0026#34;\u0026#39;\u0026gt;p√©talo\u0026lt;/b\u0026gt;\u0026#34;), x = glue(\u0026#34;**Longitud**\u0026#34;), y = glue(\u0026#34;*Ancho*\u0026#34;) ) + theme( plot.title = element_markdown(), axis.title.x = element_markdown(), axis.title.y = element_markdown() ) En la versi√≥n m√°s reciente de R (4.2.0), ggtext tiene problemas para mostrar los textos en negrilla y cursiva. Si encuentras este problema, instala la versi√≥n m√°s reciente de gridtext con el comando remotes::install_github(\u0026quot;wilkelab/gridtext\u0026quot;)\n2. ggrepel # ¬øTe ha pasado que intentas poner etiquetas en un gr√°fico pero aparecen demasiadas y muy cerca unas de otras? Este paquete tambi√©n se centra en el trabajo con textos y mejora la ubicaci√≥n de las etiquetas en el gr√°fico, al definir una fuerza que las repele entre si.\nFigura 2. Ejemplo ggrepel.\nComo se puede ver, ggrepel autom√°ticamante oculta las etiquetas que est√©n muy cerca, de acuerdo con los par√°metros asociados a la fuerza descrita y otdena las etiquetas restantes de tal manera que no se sobrelapen entre si. Lo √∫nico que se necesita es reemplazar la funci√≥n geom_label() por geom_label_repel(). Este paquete tambi√©n permite cambiar geom_text() por geom_text_repel().\nEl c√≥digo para generar estos gr√°ficos es el siguiente:\nlibrary(ggrepel) library(gapminder) gapminder_2007 \u0026lt;- gapminder %\u0026gt;% filter(year == 2007) # Gr√°fico b√°sico ggplot(gapminder_2007 ,aes(lifeExp, gdpPercap, label = country)) + geom_point() + geom_label() + labs( title = \u0026#34;Expectativa de vida vs GDP per c√°pita\u0026#34;, x = \u0026#34;Expectativa de vida\u0026#34;, y = \u0026#34;GDP per c√°pita\u0026#34; ) # Gr√°fico con ggrepel ggplot(gapminder_2007 ,aes(lifeExp, gdpPercap, label = country)) + geom_point() + geom_label_repel() + labs( title = \u0026#34;Expectativa de vida vs GDP per c√°pita\u0026#34;, x = \u0026#34;Expectativa de vida\u0026#34;, y = \u0026#34;GDP per c√°pita\u0026#34; ) 3. patchwork # Si bien ggplot2 tiene herramientas poderosas para modificar granularmente cada uno de los componentes de un gr√°fico, no es tan f√°cil generar una salida que contenga m√∫ltiples gr√°ficos a la vez. Especialmente cuando quieres ir m√°s all√° de las funciones facet_grid() o facet_wrap().\nEl paquete patchwork entra a llenar este vac√≠o y te permite unir cuantos gr√°ficos quieras, en la distribuci√≥n que quieras. S√≥lo basta guardar cada uno de los gr√°ficos en un objeto distinto, y luego con una sintaxis sencilla ordenarlos en el lienzo. A continuaci√≥n algunos ejemplos:\ngrafico_ggrepel + grafico_ggtext Figura 3. patchwork: izquierda y derecha.\ngrafico_ggrepel / grafico_ggtext Figura 4. patchwork: arriba y abajo.\ngrafico_ggrepel / (grafico_ggtext | grid::textGrob(\u0026#39;Este es un texto muy importante\u0026#39;)) Figura 5. patchwork: formas m√°s complejas.\n4. gganimate # Usualmente pensamos en los gr√°ficos de ggplot2 como elementos est√°ticos, y le dejamos visualizaciones m√°s interesantes a herramientas como plotly o d3.js. Sin embargo, muchas personas no saben que podemos generar animaciones y gifs a trav√©s del paquete gganimate, tal como si estuvieramos trabajando con facetas.\nLa explicaci√≥n de c√≥mo funciona gganimate amerita su propia entrada de blog. Por ahora, para mostrar este paquete en todo su esplendor, te comparto un gr√°fico que hice para el desaf√≠o con la evoluci√≥n de la pir√°mide poblacional en Colombia desde 1950.\nFigura 6. Animaci√≥n de la pir√°mide poblacional en Colombia.\nEl c√≥digo con el que gener√© este gr√°fico lo puedes encontrar ac√°.\nConclusi√≥n # Es hora de subir el nivel de los gr√°ficos que haces con ggplot2. Te invito que integres estos paquetes en tu flujo de trabajo normal en ggplot2 y que explores sus funcionalidades. La documentaci√≥n de los paquetes la podr√°s encontrar en los siguientes links:\nggtext ggrepel patchwork gganimate Recuerda compartir este post si te pareci√≥ interesante y si tienes alguna pregunta que me quieras hacer, dejarla en los comentarios.\n","date":"26 de junio de 2022","externalUrl":null,"permalink":"/posts/4-paquetes-para-mejorar-tus-graficos-en-ggplot2/","section":"Publicaciones","summary":"Hace algunos meses decid√≠ participar en el #30DayChartChallenge, un desaf√≠o propuesto por Dominic Roy√© y C√©dric Scherer que consist√≠a en realizar un gr√°fico durante cada d√≠a de Abril con una tem√°tica espec√≠fica.","title":"4 paquetes para mejorar tus gr√°ficos en ggplot2","type":"posts"},{"content":"","date":"26 de junio de 2022","externalUrl":null,"permalink":"/tags/dataviz/","section":"Tags","summary":"","title":"Dataviz","type":"tags"},{"content":"","date":"26 de junio de 2022","externalUrl":null,"permalink":"/tags/extensiones/","section":"Tags","summary":"","title":"Extensiones","type":"tags"},{"content":"","date":"26 de junio de 2022","externalUrl":null,"permalink":"/tags/ggplot2/","section":"Tags","summary":"","title":"Ggplot2","type":"tags"},{"content":"","date":"26 de junio de 2022","externalUrl":null,"permalink":"/tags/paquetes/","section":"Tags","summary":"","title":"Paquetes","type":"tags"},{"content":"","date":"1 de abril de 2022","externalUrl":"https://github.com/camartinezbu/30DayChartChallenge2022","permalink":"/portfolio/30daychartchallenge/","section":"Portafolio","summary":"Una colecci√≥n de gr√°ficos hechos en R con los paquetes {ggplot2} y {rayshader}, usando datos abiertos de Colombia.","title":"#30DayChartChallenge","type":"portfolio"},{"content":"","date":"27 de marzo de 2022","externalUrl":null,"permalink":"/tags/bash/","section":"Tags","summary":"","title":"Bash","type":"tags"},{"content":"En tu camino de aprendizaje de ciencia de datos, seguro has visto art√≠culos o tutoriales en los que se emplean comandos de texto para navegar a trav√©s de las carpetas de tu computador, crear o eliminar archivos, descargar archivos de internet, interactuar con git, entre otras.\nAl principio estos comandos pueden parecer muy complejos, pero en el post de hoy quiero compartir contigo una gu√≠a b√°sica para su utilizaci√≥n y que puedas desbloquear el potencial de tu computador.\n¬øQu√© es el shell? # Un shell o l√≠nea de comandos, es el programa en tu computador que te permite comunicarte a trav√©s de comandos con el sistema operativo. El shell se puede acceder a trav√©s de una interfaz gr√°fica que se denomina terminal.\nDependiendo del sistema operativo vas a encontrar distitos tipos de shell:\nPara Linux y versiones de MacOS anteriores a Catalina, el shell por defecto es Bash. Para versiones de MacOS desde Catalina, el shell es Z Shell (o Zsh). Para Windows, el shell predeterminado es PowerShell. Windows Susbsystem for Linux te permite ejecutar de manera nativa comandos de bash en windows. Puedes encontrar m√°s informaci√≥n sobre su instalaci√≥n aqui.\nEn este tutorial me voy a enfocar espec√≠ficamente en algunos comandos b√°sicos de Bash y Zsh, cuyo uso es muy parecido. Todos los comandos que se mencionan abajo se van a ejecutar desde la Terminal, por lo que deber√≠as abrirla antes de empezar.\nNavegar entre carpetas # Al igual que cuando trabajas normalmente en tu computador a trav√©s de el Explorador de arvhicos o Finder, en el shell puedes desplazarte entre carpetas, crear carpetas nuevas, crear archivos, entre otras. Vamos a ver los comandos para hacer lo anterior.\nLo primero es preguntarle al sistema operativo en qu√© carpeta estamos actualmente. Esto lo podemos hacer ejecutando el comando pwd, o present working directory. la Terminal te va a devolver una ruta de archivo cuando ejecutas este comando, que por defecto ser√° el directorio de Inicio. En mi caso, este es /Users/camilomartinez.\nAhora sigue cambiar ese directorio de trabajo. Usando el comando cd seguido de una ruta de archivo, podr√°s moverte de carpeta en carpeta. Por ejemplo, estando en el directorio de inicio, si ejecutas el comando cd Downloads vas a pasar a tu carpeta de descargas.\nUna nota sobre las rutas de archivos # El ejemplo anterior es ilustrativo de lo que puedes hacer con los comandos, pero en la mayor√≠a de los casos no te vas a encontrar con turas de archivo tan simples. Por lo anterior, hay algunas cosas clave que tienes que saber antes de continuar.\nLo primero es que las rutas de archivo se definen separando los nombres de la carpeta con la barra o slash (/). La ruta de archivos que mencion√© arriba es entonces la carpeta camilomartinez dentro de la carpeta Users. Estas rutas pueden ser tan largas o tan cortas como quieras, teniendo m√∫ltiples carpetas dentro de carpetas.\nLo segundo es que existen dos s√≠mbolos especiales para hacer referencias relativas a carpetas. Cuando estamos escribiendo una ruta de archivo, . hace referencia al directorio actual en el que estamos trabajando y .. al directorio padre.\nA modo de ejemplo, supongamos que estoy en la ruta por defecto /Users/camilomartinez. Si hay un comando que me pide definir la ruta de archivo - como los que ver√°s m√°s adelante-, . hace referencia a la ruta /Users/camilomartinez y .. har√° referencia a /Users, porque es la carpeta que contiene a /camilomartinez.\nPor √∫ltimo, arriba mencion√© que existe un directorio por defecto. El caracter ~ te permitir√° hacer una referencia a ese directorio sin importar donde te encuentres.\nPor ejemplo, sup√≥n que est√°s en la ruta /Users/camilomartinez/Downloads/mi_carpeta y quieres ir a la carpeta de documentos de tu directorio principal. En vez de escribir varias veces .. despu√©s del comando cd, basta con que escribas cd ~/Documents.\nVer el contenido de una carpeta # Ahora que sabes navegar entre las carpetas de tu computador, el paso siguiente es ver el contenido de dichas carpetas. Para ello, ubicandote en la carpeta deseada, vas a ejecutar el comando ls -lh. La Terminal te devolver√° una lista de carpetas y archivos con sus respectvos nombres y peso.\nNotar√°s que hay algo nuevo en este comando: las dos letras precedidas por un gui√≥n. Esto es algo que ver√°s de manera recurrente en los comandos y son opciones adicionales para modificar su comportamiento. Estas se denominan banderas o flags.\nEn este caso, la bandera l hace que la salida del comando sea en una lista y la bandera h a que los pesos de los archivos sean m√°s f√°ciles de leer.\nComo te puedes dar cuenta, -lh no hace referencia a una s√≥la bandera sino a dos separadas. Sin embargo, el shell permite abreviar varias banderas usando un s√≥lo gui√≥n como te lo mostr√© anteriormente. En estricto sentido, podr√≠as escribir ls -l -h y el comando funcionar√≠a igual.\nCrear carpetas y archivos # Ahora que sabes navegar entre las carpetas de tu computador, el paso siguiente es manipular el contenido de dichas carpetas.\nPara crear una nueva carpeta en la ubicaci√≥n deseada, ejecutas el comando mkdir seguido el nombre de la carpeta. Por ejemplo mkdir mi_carpeta.\nTambi√©n puedes crear un archivo usando el comando touch, seguido del nombre y extensi√≥n que quieras. Es decir, si quieres crear un archivo de texto plano, debes ejecutar el comando touch mi_archivo.txt.\nIntenta crear una carpeta y un archivo dentro, y luego usar el comando ls -lh para ver si tuviste √©xito.\nBorrar carpetas y archivos # Puedes hacer ambas operaciones usando el comando rm. Para el caso de los archivos, s√≥lo tienes que ir a la ruta donde est√° el archivo y ejecutar el comando mencionado, seguido del nombre del archivo. Es decir, si quieres eliminar el archivo que creaste arriba, puedes escribir algo como rm mi_archivo.txt.\nPara las carpetas debes a√±adir la bandera -r, de lo contrario no la podr√°s eliminar. A modo de ejemplo, para eliminar la carpeta que creaste arriba tienes que ejecutar rm -r mi_carpeta. Ten cuidado con la ejecuci√≥n de este comando. Si eliminas una carpeta se eliminar√° todo su contenido. Por esta raz√≥n, la Terminal te va a preguntar si de verdad quieres eliminar la carpeta antes de hacerlo.\nConclusi√≥n # ¬°Espero que te haya gustado este post! Con lo que viste, ya puedes navegar f√°cilmente en las carpetas de tu computador sin necesidad de usar la interfaz gr√°fica de tu sistema operativo.\nEn las siguientes semanas voy a publicar una serie de entradas sobre c√≥mo modificar los permisos de los archivos, crear tus propios scripts y modificar variables de entorno en shell.\nTe invito a compartir este post si te pareci√≥ √∫til y que sigas aprendiendo a trabajar con el shell.\n","date":"27 de marzo de 2022","externalUrl":null,"permalink":"/posts/la-guia-para-manipular-archivos-con-shell/","section":"Publicaciones","summary":"En tu camino de aprendizaje de ciencia de datos, seguro has visto art√≠culos o tutoriales en los que se emplean comandos de texto para navegar a trav√©s de las carpetas de tu computador, crear o eliminar archivos, descargar archivos de internet, interactuar con git, entre otras.","title":"La gu√≠a para manipular archivos con shell","type":"posts"},{"content":"","date":"27 de marzo de 2022","externalUrl":null,"permalink":"/tags/shell/","section":"Tags","summary":"","title":"Shell","type":"tags"},{"content":"","date":"27 de marzo de 2022","externalUrl":null,"permalink":"/categories/terminal/","section":"Categories","summary":"","title":"Terminal","type":"categories"},{"content":"","date":"27 de marzo de 2022","externalUrl":null,"permalink":"/tags/zsh/","section":"Tags","summary":"","title":"Zsh","type":"tags"},{"content":"","date":"20 de marzo de 2022","externalUrl":null,"permalink":"/tags/ciencia-datos/","section":"Tags","summary":"","title":"Ciencia-Datos","type":"tags"},{"content":"","date":"20 de marzo de 2022","externalUrl":null,"permalink":"/tags/cookicutter/","section":"Tags","summary":"","title":"Cookicutter","type":"tags"},{"content":"Al iniciar tu proyecto de ciencia de datos seguro te has enfrentado a numerosas decisiones como qu√© carpetas crear, d√≥nde guardar las fuentes de informaci√≥n, c√≥mo organizar scripts y notebooks, d√≥nde guardar los resultados de tu an√°lisis, etc.\nHoy te quiero presentar Cookiecutter, una herramienta para el manejo de plantillas que te ayudar√° a organizar tu proyecto de ciencia de datos y a comenzar a trabajar en lo realmente importante en cuesti√≥n de minutos.\nCookiecutter # Cookiecutter es una herramienta que funciona en la l√≠nea de comandos de tu computador y que te permite crear proyectos basados en plantillas, llamadas cookiecutters.\nEsta herramienta es multiplataforma - funciona en Windows, MacOS y Linux - y no tiene una restricci√≥n sobre los lenguajes para los que puedes crear plantillas.\nSi bien no es necesario saber Python para usar cookiecutter, es algo √∫til cuando quieras dise√±ar tu propia plantilla y trabajar con hooks.\nInstalaci√≥n # Para poder trabajar con Cookicutter debes tener Python instalado en tu computador. Puedes hacerlo directamente desde su p√°gina oficial o usando Conda.\nSi no tienes mucha experiencia trabajando con Python, te sugiero hacerlo con Conda.\nLuego tienes que hacer un ajuste al path de tu computador, procedimiento que va a cambiar dependiendo del sistema operativo que uses. Te recomiendo seguir las instrucciones en la documentaci√≥n de Cookiecutter.\nUna vez hecho lo anterior, dependiendo de la instalaci√≥n que seguiste, en la l√≠nea de comandos de tu computador vas a ejecutar:\n# Si no usaste Conda pip install cookiecutter # Si usaste Conda conda install -c conda-forge cookiecutter Escoge tu plantilla # Ahora que tienes instalado Cookiecutter, lo siguiente es escoger una plantilla que quieres replicar en tu computador. Github es un excelente lugar para buscar, dado que hay un gran n√∫mero de repositorios con plantillas hechas por la comunidad en muchos lenguajes. S√≥lo pones en el buscador algo como cookiecutter template y el lenguaje de tu elecci√≥n.\nPara crear tu primer proyecto con Cookiecutter te invito a trabajar con alguna de las dos plantillas que escrib√≠ para R y Python. Escoje alguna de ellas y copia la URL del repositorio en el portapapeles.\nCrea tu proyecto # Abre la l√≠nea de comandos de tu computador - Command Shell en Windows o Terminal en MacOS y Linux - y ve a la carpeta en la que quieres crear tu proyecto. Una vez all√≠, ejecuta el siguiente comando:\ncookiecutter \u0026lt;URL de Github\u0026gt; Es decir, si quisiera usar la plantilla que escrib√≠ para Python escribir√≠a:\ncookiecutter https://github.com/camartinezbu/cookiecutter-python-project Si Cookiecutter qued√≥ instalado correctamente, la l√≠nea de comandos te pedir√° algunos datos con los que generar tu proyecto. Para la plantilla de Python estos son:\nproject_name: El nombre del proyecto que vas a crear. project_slug: El apodo para tu proyecto. Por defecto incluye una versi√≥n en min√∫sculas separada por gui√≥n bajo del nombre del proyecto, pero lo puedes reemplazar por un apodo de tu elecci√≥n. project_author_name: Tu nombre o el de la organizaci√≥n que elabora el proyecto. project_description: Una descripci√≥n breve del objetivo del proyecto. project_open_source_license: La elecci√≥n de licencia que vas a usar en el proyecto. La plantilla incluye las opciones de no usar licencia, la licencia MIT y la licencia BSD-3-Clause. python_version: La versi√≥n de python para usar en el proyecto. Por defecto se incluye la versi√≥n 3.10. project_packages: Una selecci√≥n de algunos paquetes b√°sicos de ciencia de datos. Si seleccionas Basic se incluir√°n numpy, pandas, matplotlib y seaborn entre otros. Si seleccionas Scikit-learn o Tensorflow se instalar√° adem√°s el paquete corresponidnete. La plantilla de R te pedir√° los mismos datos, excepto python_version y project_packages.\nLuego de introducir los datos anteriores, tu terminal deber√≠a verse similar a esta:\nFigura 1. Captura de pantalla de la Terminal al crear tu proyecto.\nComo resultado, tendr√°s una plantilla de proyecto con carpetas para:\nDatos y su documentaci√≥n: data y references Cuadernos de Jupyter: notebooks Reportes: reports Salidas gr√°ficas: figures El c√≥digo para el proyecto, cargado como un paquete de python: src Adicionalmente, la plantilla generar√° autom√°ticamente:\nun archivo README.md con la informaci√≥n que diligenciaste en la terminal un archivo con la licencia escogida: LICENSE un archivo environment.yml para crear un ambiente de conda un repositorio de git Figura 2. Captura de pantalla de la carpeta creada con la plantilla.\n¬°Y listo! Ya puedes empezar a trabajar en tu proyecto de ciencia de datos.\nConclusi√≥n # Con esta explicaci√≥n breve ya debes poder usar Cookiecutter y crear una carpeta de proyecto en tu computador con base en una plantilla. Te invito a buscar m√°s plantillas en Github y experimentar con ellas para encontrar la que m√°s se ajuste a tu flujo de trabajo. En el siguiente post aprender√°s c√≥mo crear tus propias plantillas y personalizar sus funciones.\nSi te pareci√≥ √∫til te invito a compartir este art√≠culo en tus redes sociales y a dejar tus comentarios al final de la p√°gina.\n","date":"20 de marzo de 2022","externalUrl":null,"permalink":"/posts/plantillas-para-proyectos-de-ciencia-de-datos/","section":"Publicaciones","summary":"Al iniciar tu proyecto de ciencia de datos seguro te has enfrentado a numerosas decisiones como qu√© carpetas crear, d√≥nde guardar las fuentes de informaci√≥n, c√≥mo organizar scripts y notebooks, d√≥nde guardar los resultados de tu an√°lisis, etc.","title":"Plantillas para proyectos de ciencia de datos","type":"posts"},{"content":"","date":"6 de marzo de 2022","externalUrl":null,"permalink":"/tags/condicional/","section":"Tags","summary":"","title":"Condicional","type":"tags"},{"content":"Buena parte del tiempo que pasamos trabajando con el tidyverse lo hacemos usando el operador pipe (%\u0026gt;%). Este operador nos permite f√°cilmente incluir la salida de una funci√≥n como argumento de la siguiente, y de esta manera encadenar comandos para realizar modificaciones complejas a una base de datos con una gran legibilidad.\nSin embargo, ¬øqu√© sucede si quiero supeditar la ejecuci√≥n de alguno de los comandos del pipe a una condici√≥n? Esto es lo que les voy a mostrar en el blog de hoy.\nUn repaso r√°pido de los pipes # El pipe viene del paquete magrittr, que se carga autom√°ticamente cuando llamamos al tidyverse en nuestro c√≥digo. Si ya has trabajado antes en an√°lisis de datos con R, seguro el siguiente c√≥digo es familiar:\ntabla_resumen \u0026lt;- data %\u0026gt;% group_by(columna1) %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) Para un dataframe arbitrario, es claro ver que estoy agrupando por una columna llamada columna1, sumando para cada valor de esa columna los valores de columna2 y asign√°ndolo a la columna total, ordenandola de mayor a menor y asignando las primeras 10 filas a un dataframe llamado tabla_resumen. Si no usaramos el pipe y cre√°ramos objetos intermedios para cada operaci√≥n mencionada, tendr√≠amos que hacer algo del estilo:\ndatos_agrupados \u0026lt;- group_by(data, columna1) datos_resumidos \u0026lt;- summarise(datos_agrupados, total = sum(columna2)) datos_ordenados \u0026lt;- arrange(datos_resumidos, desc(total)) tabla_resumen \u0026lt;- head(datos_ordenados, 10) Como puedes ver, la implementaci√≥n a trav√©s del pipe es m√°s ordenada y f√°cil de leer, y nos ahorra la necesidad de crear y almacenar objetos en memoria que no vamos a necesitar.\n¬øC√≥mo entran los condicionales? # Trabajar con las estructuras de control de if es relativamente sencillo en R base, usando la sintaxis:\nif (condicion) { #comandos } Adicionalmente, el uso de condiciones dentro de los pipes no es ajeno para el tidyverse. Funciones como case_when() permiten aplicar una serie de condiciones de manera abreviada para tareas como modificar una columna de la base de datos. Por ejemplo, si quieremos separar los valores de una columna con base en los cuartiles, podemos hacer algo del estilo:\ndatos %\u0026gt;% mutate(segmento = case_when( columna1 \u0026lt;= quantile(columna1, .25) ~ \u0026#39;segmento1\u0026#39;, columna2 \u0026gt; quantile(columna1, .25) \u0026amp; columna2 \u0026lt;= quantile(columna1, .5) ~ \u0026#39;segmento2\u0026#39;, columna2 \u0026gt; quantile(columna1, .5) \u0026amp; columna2 \u0026lt;= quantile(columna1, .75) ~ \u0026#39;segmento3\u0026#39;, TRUE ~ \u0026#39;segmento4\u0026#39; )) Ahora bien, qu√© pasa si queremos aplicar el condicional sobre la ejecuci√≥n misma de alguno de los comandos dentro de un pipe. Lo primero que se viene a la cabeza es simplemente incluir la estructura de un if dentro del pipe ¬øverdad? Sigamos el ejemplo de la base de datos arbitraria de antes. Supongamos que en vez de agrupar siempre, queremos definir una condici√≥n para decirle al pipe cu√°ndo si y cuando no ejecutar esa l√≠nea de c√≥digo. La idea de aplicar el if directamente ser√≠a algo como:\ntabla_resumen \u0026lt;- data %\u0026gt;% if (condicion == TRUE) { group_by(columna1) } %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) Sin embargo, el paquete magrittr no sabe qu√© hacer con esta manera de escribir la instrucci√≥n y devolver√° un error. En ese sentido, vamos a hacer tres cambios para que funcione y sea f√°cil de leer dentro del pipe.\nif\u0026hellip;else de una l√≠nea # Lo primero es ajustar la manera como est√° escrito el if...else. Si bien la manera en que usualmente se encuentra su sintaxis tiene varias l√≠neas, tambi√©n podemos escribirla en una sola l√≠nea. Los dos comandos siguientes funcionan exactamente igual:\n# Varias l√≠neas if (condicion == TRUE) { print(\u0026#39;La condici√≥n se cumple\u0026#39;) } # Una l√≠nea if(condicion == TRUE) print(\u0026#39;La condici√≥n se cumple\u0026#39;) Nota como el cambio entre los dos es que se ahorra el uso de unos corchetes. S√≥lo por el hecho de que la funci√≥n print no est√° entre los primeros par√©ntesis, R entiende que esa es el comando a ejecutar en caso que la condici√≥n sea cierta y no parte de la condici√≥n.\nLo anterior tambi√©n aplica si tenemos un else:\n# Varias l√≠neas if (condicion == TRUE) { print(\u0026#39;La condici√≥n se cumple\u0026#39;) } else { print(\u0026#39;La condici√≥n no se cumple\u0026#39;) } # Una l√≠nea if(condicion == TRUE) print(\u0026#39;La condici√≥n se cumple\u0026#39;) else print(\u0026#39;La condici√≥n no se cumple\u0026#39;) En estricto sentido, este cambio no va a hacer que el if...else funcione diferente dentro del pipe. Sin embargo, en mi opini√≥n escribirlo en una s√≥la l√≠nea ayudar√° a que se vea mejor en esta serie de comandos y facilitar√° su lectura.\nCorchetes # Lo siguiente es que magrittr necesita saber que ese if...else hace parte del pipe y lo puede encadenar a los dem√°s comandos. Para ello, tenemos que encerrarlo en corchetes. Es decir, con los dos cambios vistos hasta el momento implican que la operaci√≥n de agrupar seg√∫n una condici√≥n se escribir√≠a como:\ntabla_resumen \u0026lt;- data %\u0026gt;% { if (condicion == TRUE) group_by(columna1) } %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) No obstante, esto tambi√©n nos arrojar√° error. Si bien ya magrittr entiende que esto es un comando a encadenar, sigue sin saber qu√© encadenar con los siguientes comandos.\nAjustes finales # Esto sucede por dos motivos. El primero es que no hemos definido qu√© sucede en ambos escenarios posibles: cuando la condici√≥n es cierta como cuando es falsa. El segundo es que internamente los pipes y las funciones del tidyverse tienen una manera de indicarle a las funciones d√≥nde entran los resultados de las operaciones anteriores, que tenemos que llamar expl√≠citamente dentro del if.\nCon respecto al primer motivo, deber√≠amos tener entonces un c√≥digo del siguiente estilo:\ntabla_resumen \u0026lt;- data %\u0026gt;% { if (condicion == TRUE) \u0026#39;salida1\u0026#39; else \u0026#39;salida2\u0026#39; } %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) El segundo motivo merece una explicaci√≥n un poco m√°s detallada. Al revisar la documentaci√≥n de las funciones del tidyverse se puede ver que tienen un argumento que llamado .data. Este le indica a las funciones cu√°l es el dataframe sobre el que tienen que realizar la operaci√≥n espec√≠fica. Cuando no se est√° usando un pipe, tenemos que llamarlo de manera expl√≠cita como el primer argumento. Cuando usamos un pipe, √©ste se encarga de que el dataframe que ven√≠a antes sea ese .data y de esta manera encadenar los comandos. Por tal raz√≥n, estos dos elementos son exactamente iguales:\n# Sin pipe head(data, 10) # Con pipe data %\u0026gt;% head(10) Como ahora tenemos dos posibilidades de qu√© hacer seg√∫n la condici√≥n, para implementar el condicional dentro del pipe tenemos que definir expl√≠citamente el nombre de lo que ir√≠a en ese .data con un placeholder. De esta manera, para ambas posibilidades del if...else, el pipe sabr√° que hacer y podremos seguir con la ejecuci√≥n del comando. Para ello, vamos a usar el caracter de punto ..\nUniendo todo lo anterior, tenemos que la soluci√≥n para implementar el ejemplo anterior ser√≠a algo como:\ntabla_resumen \u0026lt;- data %\u0026gt;% { if (condicion == TRUE) group_by(., columna1) else . } %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) Lo que quiere decir esta nueva sintaxis es que si la condici√≥n es cierta, vamos a tomar el dataframe data -referenciada dentro de la funci√≥n como . y lo vamos a agrupar de acuerdo con la columna1; y si la condici√≥n es falsa, vamos a devolver el mismo dataframe anterior, es decir data. Culquiera que sea la salida de este if...else, ser√° un dataframe que se podr√° inttroducir en la siguiente l√≠nea y ejecutar el resto de c√≥digo con normalidad.\nExtra # Como ejercicio adicional, se podr√≠a incluir esta operaci√≥n al interior de una funci√≥n e incluir la condici√≥n como un argumento de dicha funci√≥n:\ncrear_tabla_resumen \u0026lt;- function(dataframe, agrupar = TRUE) { output \u0026lt;- dataframe %\u0026gt;% { if (agrupar == TRUE) group_by(., columna1) else . } %\u0026gt;% summarise(total = sum(columna2)) %\u0026gt;% arrange(desc(total)) %\u0026gt;% head(10) return output } # Agrupando por la columna 1 tabla_resumen1 \u0026lt;- crear_tabla_resumen(data, agrupar = TRUE) # Sin agrupar por la columna 1 tabla_resumen2 \u0026lt;- crear_tabla_resumen(data, agrupar = TRUE) Espero que te haya servido este tutorial y que puedas utilizar condicionales dentro de los pipes en R. Puedes leer m√°s sobre su funcionamiento en este cap√≠tulo del l√≠bro de R para Ciencia de Datos de Hadley Wickham.\n","date":"6 de marzo de 2022","externalUrl":null,"permalink":"/posts/condicionar-la-ejecucion-de-comandos/","section":"Publicaciones","summary":"Buena parte del tiempo que pasamos trabajando con el tidyverse lo hacemos usando el operador pipe (%\u0026gt;%).","title":"Condicionar la ejecuci√≥n de comandos dentro de pipes","type":"posts"},{"content":"","date":"6 de marzo de 2022","externalUrl":null,"permalink":"/tags/pipe/","section":"Tags","summary":"","title":"Pipe","type":"tags"},{"content":"","date":"6 de marzo de 2022","externalUrl":null,"permalink":"/tags/turorial/","section":"Tags","summary":"","title":"Turorial","type":"tags"},{"content":"","date":"1 de marzo de 2022","externalUrl":"https://github.com/camartinezbu/cookiecutter-r-project","permalink":"/portfolio/cookiecutter/","section":"Portafolio","summary":"Una plantilla para proyectos de ciencia de datos en R usando Cookiecutter","title":"Plantilla de cookiecutter para R","type":"portfolio"},{"content":"","date":"19 de mayo de 2021","externalUrl":null,"permalink":"/tags/calendar/","section":"Tags","summary":"","title":"Calendar","type":"tags"},{"content":"","date":"19 de mayo de 2021","externalUrl":null,"permalink":"/tags/heatmap/","section":"Tags","summary":"","title":"Heatmap","type":"tags"},{"content":"Despu√©s de una pausa de algunas semanas vuelvo a escribir posts semanales en el blog. Para comenzar, quiero compartirles una visualizaci√≥n que me llam√≥ mucho la atenci√≥n al leer el libro Better Data Visualizations de Jonathan Schwabish: Los Heatmap calendars, que ac√° voy a traducir -probablemente mal- como mapas de calor en forma de calendarios. Buena parte del insumo para este post viene de este tutorial de Viet Le.\nPaquetes necesarios # Para este ejercicio voy a usar los siguientes paquetes: readxl para importar la base de datos que se encuentran en un archivo .xls, el tidyverse para la limpieza de los datos y la visualizaci√≥n con ggplot2, y lubridate para un par de operaciones puntuales con las fechas.\nAdicionalmente, usar√© shadowtext para mejorar un poco la legibilidad del texto en el calendario al a√±adir sombras. Sin embargo, esto no es fundamental para hacer el calendar heatmap.\nLos datos # Voy a usar un archivo de excel que contiene los registros de violencia intrafamiliar en Colombia durante 2019, disponibles para descarga en la p√°gina de Estad√≠stica Delictiva de la Polic√≠a Nacional.\nEsta base de datos contiene los siguientes campos de informaci√≥n: Departamento, Municipio, C√≥digo DIVIPOLA del municipio, Arma empleada, Fecha del registro, Sexo de la v√≠ctima, Grupo de edad de la v√≠ctima y un contador de cantidad de hechos. Para este ejercicio s√≥lo nos interesa usar la fecha.\nImportaci√≥n # Lo primero que hay que hacer es cargar los paquetes que vamos a usar. Posteriormente, cargo la base de datos llamando de la funci√≥n read_xlsx() del paquete readxl y la guardo en un objeto llamado vif.\nAdicionalmente, y por buenas pr√°cticas, voy a definir la zona horaria de las fechas registradas en Bogot√° con la funci√≥n tz().\nlibrary(tidyverse) library(readxl) library(lubridate) vif \u0026lt;- read_xlsx(\u0026#34;~/Downloads/violencia_intrafamiliar_2019_0.xlsx\u0026#34;, range = cell_limits(c(11, 1), c(113894, 8))) tz(vif$`FECHA HECHO`) \u0026lt;- \u0026#34;America/Bogota\u0026#34; Ac√° vale la pena mencionar que por alguna raz√≥n escribir el rango de las celdas en el argumento range de read_xslx() en la forma A1:H113894 me generaba un error en la lectura. Una b√∫squeda r√°pida en internet me llev√≥ a escribir el rango dentro de la funci√≥n cell_limits(), lo que corrigi√≥ el problema.\nProcesamiento # Aqu√≠ viene la parte mas importante. En esencia, lo que hacemos para hacer el mapa de calor en forma de calendario es colorear doce grillas de 7x4 -7 d√≠as y 4 semanas-, donde el color de cada celda obedece a un conteo de registros de violencia intrafamiliar.\nSin embargo, como el resultado final debe parecer un calendario, necesitamos definir para cada registro en qu√© semana del mes y en qu√© d√≠a de la semana ocurri√≥. De lo contrario todos los meses empezar√≠an el mismo d√≠a. Lunes o domingo, dependiendo del formato de calendario que se quiera usar.\nPara ello, vamos a ejecutar el siguiente bloque de c√≥digo:\nhistorico_diario \u0026lt;- vif %\u0026gt;% transmute(FECHA = ymd(`FECHA HECHO`), CANTIDAD) %\u0026gt;% group_by(FECHA) %\u0026gt;% summarise(REGISTROS = sum(CANTIDAD)) %\u0026gt;% ungroup() %\u0026gt;% mutate(DIA = wday(FECHA, label = T, week_start = 1, locale = \u0026#34;es_ES\u0026#34;)) %\u0026gt;% mutate(MES = month(FECHA, label = T, locale = \u0026#34;es_ES\u0026#34;)) %\u0026gt;% mutate(SEMANA = isoweek(FECHA)) historico_diario$SEMANA[historico_diario$MES==\u0026#34;dic\u0026#34; \u0026amp; historico_diario$SEMANA == 1] = 53 historico_diario \u0026lt;- historico_diario %\u0026gt;% group_by(MES) %\u0026gt;% mutate(SEMANA_MES = 1 + SEMANA - min(SEMANA)) Vamos por partes. En el primer bloque de c√≥digo creo una variable FECHA que contiene la fecha de la base de datos original en un formato que puede trabajar lubridate y selecciono la columna CANTIDAD. Luego hago una suma de los registros para cada uno de los d√≠as del a√±o y calculo 3 variables nuevas:\nDIA: Una variable que contiene qu√© d√≠a de la semana (lunes, martes, miercoles, \u0026hellip;) es cada fecha. Adicionalente, defino que el idioma para mostrar las etiquetas de los d√≠as sea espa√±ol, usando el argumento locale. MES: Una variable que indica el mes del registro, con las etiquetas en espa√±ol. SEMANA: Una variable que indica la semana del a√±o a la que pertenece cada fecha,de 1 a 52, usando la funci√≥n isoweek(). Ahora bien, como puedes ver, hay una l√≠nea de c√≥digo que modifica manualmente la variable semana. Esto sucede porque isoweek() define autom√°ticamente la √∫ltima semana del a√±o como 1, si contiene alg√∫n d√≠a del a√±o siguiente. Por esta raz√≥n, definimos que si el mes es diciembre y la semana del a√±o es 1, la convierta en la semana 53.\nFinalmente, se crea una variable SEMANA_MES, de tal manera que se tenga a cu√°l semana de cada mes pertenece la fecha (1-4) y no la semana del a√±o como en la variable SEMANA (1-52).\nEl calendario # Ahora si, despu√©s de todo lo anterior, podemos generar el calendario con el siguiente c√≥digo:\nhistorico_diario %\u0026gt;% ggplot(aes(x = DIA, y = -SEMANA_MES, fill = REGISTROS)) + geom_tile(colour = \u0026#34;white\u0026#34;) + geom_text(aes(label = day(FECHA)), size = 2.5, color = \u0026#34;white\u0026#34;) + theme(aspect.ratio = 1/2, legend.position = \u0026#34;right\u0026#34;, axis.title.x = element_blank(), axis.title.y = element_blank(), axis.text.y = element_blank(), panel.grid = element_blank(), axis.ticks = element_blank(), panel.background = element_blank(), legend.title.align = 0.5, strip.background = element_blank(), strip.text = element_text(face = \u0026#34;bold\u0026#34;, size = 15), panel.border = element_rect(colour = \u0026#34;grey\u0026#34;, fill=NA, size=1), plot.title = element_text(hjust = 0.5, size = 18, face = \u0026#34;bold\u0026#34;, margin = margin(0,0,0.5,0, unit = \u0026#34;cm\u0026#34;))) + scale_fill_viridis_c(name = \u0026#34;Registros\u0026#34;, direction = -1, guide = guide_colourbar(title.position = \u0026#34;top\u0026#34;, direction = \u0026#34;vertical\u0026#34;)) + facet_wrap(~MES, nrow = 4, ncol = 3, scales = \u0026#34;free\u0026#34;) + labs(title = \u0026#34;Comportamiento de la violencia intrafamiliar \\nen Colombia durante 2019\u0026#34;, caption = \u0026#34;Fuente: SIEDCO\u0026#34;) Si bien esto puede parecer muy complejo, la mayor√≠a de instrucciones tienen que ver con que no salgan colores ni lineas en el fondo del gr√°fico, como es el comportamiento por defecto de ggplot2, y algunos ajustes del tama√±o y posici√≥n del texto.\nLo m√°s importante est√° en que entiedas el llamado inicial de ggplot(), en el que se usan las variables de DIA y SEMANA_MES para construir la grilla que mencion√© anteriormente, y se mapea el color a la variable de REGISTROS.\nCuando corras ese c√≥digo, vas a tener el siguiente resultado:\nMapa de calor en forma de calendario\nUn ajuste menor al texto # Como te podr√°s dar cuenta, los n√∫meros en color blanco no son f√°ciles de leer cuando el color del d√≠a es m√°s claro. Esto podr√≠as solucionarlo cambiando el color del texto o, como hice yo, usando el paquete shadowtext.\nEste paquete incluye una funci√≥n para ggplot2 que funciona muy parecido a geom_text(), s√≥lo que a√±ade una sombra alrededor del texto: geom_shadowtext(). Reemplazando esta funci√≥n en el c√≥digo de arriba, ¬°queda listo el mapa de calor con forma de calendario!\nMapa de calor en forma de calendario con sombras\nCon esta visualizaci√≥n podemos ver r√°pidamente que parece haber unos picos de registros de violencia intrafamiliar en fechas como navidad, a√±o nuevo y el d√≠a de la madre, y que en t√©rminos generales parece que se registran m√°s casos en los fines de semana. ¬øVes lo f√°cil que es extraer toda esta informaci√≥n con una s√≥la mirada?\nEspero que te haya gustado este post y que ahora puedas experimentar con mapas de calor en forma de calendario para datos de otros temas.\n","date":"19 de mayo de 2021","externalUrl":null,"permalink":"/posts/mapas-de-calor-como-calendarios-en-r/","section":"Publicaciones","summary":"Despu√©s de una pausa de algunas semanas vuelvo a escribir posts semanales en el blog.","title":"Mapas de calor como calendarios en R","type":"posts"},{"content":"","date":"1 de mayo de 2021","externalUrl":"https://github.com/camartinezbu/shakiRa","permalink":"/portfolio/shakira/","section":"Portafolio","summary":"Un paquete de R que contiene paletas de colores para gr√°ficos usando {ggplot2}, basadas en la discograf√≠a de Shakira.","title":"ShakiRa","type":"portfolio"},{"content":"Los strings son uno de los tipos de datos m√°s comunes que te vas a encontrar en el an√°lisis de datos. Ya sea porque te aparecen en un dataset listo, los consigues a trav√©s de ejercicios de webscraping o porque usas un texto completo para hacer procesamiento de lenguaje natural, aprender a trabajar con strings es una herramienta clave.\nUna de las herramientas m√°s √∫tiles para este tema son las expresiones regulares, comunmente abreviadas como regex por su nombre en ingl√©s. En este post quiero darte una introducci√≥n a regex y que al finalizar tengas unas herramientas b√°sicas para trabajar con ellas en tus an√°lisis.\n¬øPara qu√© expresiones regulares? # Seguramente cuando trabajas un documento en word o est√°s navegando en una p√°gina web has usado la herramienta de busqueda. Al usar esta herramienta, el programa busca una correspondencia entre el t√©rmino de b√∫squeda que pusiste y te se√±ala las coincidencias que encontr√≥ en el documento. En algunos casos, incluso puedes se√±alar que no te importa si el texto est√° en mayusculas o min√∫sculas.\nSi bien esta herramienta es sumamente √∫til, se queda corta frente algunas operaciones m√°s avanzadas. Esto pasa porque los textos suelen tener datos no estructurados y no es una opci√≥n realista escribir manualmente todas las posibles combinaciones de caracteres que cumplan una condici√≥n dada. Por ejemplo, encontrar todas las palabras con 4 o menos caracteres en nuestro texto.\nPara estos casos, las expresiones regulares te van a permitir navegar y encontrar patrones en los textos y describirlos a trav√©s de una sintaxis muy sencilla.\nAhora bien, a modo de advertencia, si bien las expresiones regulares son simples en principio , pueden volverse r√°pidamente tan complicadas como lo quieras hacer. Un ejemplo de esto es esta regex para validar direcciones de correo electr√≥nico.\nAntes de seguir, yo tampoco entiendo en su totalidad qu√© hace la expresi√≥n regular de arriba. Y rara vez trabajar√°s con una tan compleja. Al terminar de leer este post, vamos a entender esta expresi√≥n regular un poco m√°s sencilla para detectar direcciones de correo electr√≥nico v√°lidas:\n\u0026#34;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$\u0026#34; ¬øC√≥mo entran en el flujo de trabajo? # Muchos paquetes que trabajan con strings ofrecen funcionalidad para trabajar con expresiones regulares. Para el caso de R, los paquetes stringi o stringr del tidyverse permiten hacer busquedas y reemplazos basados en regex. En python, los m√≥dulos re y regex ofrecen esta funcionalidad.\nPara ambos casos, las expresiones regulares se escriben a su vez en strings, por lo que deben estar dentro de comillas.\nEl objetivo de este post no es hacer una explicaci√≥n de las funciones de estos paquetes, sino que entiendas en general su funcionamiento para utilizarlo en distintas situaciones y lenguajes de programaci√≥n. En todo caso, al final encontrar√°s los enlaces a la documentaci√≥n de estos paquetes.\nB√∫squedas # Para encontrar los patrones en el texto, las regex tienen una estructura muy estricta con algunos caracteres especiales. Vamos a ver c√≥mo funcionan las b√∫squedas b√°sicas y luego algunas funciones m√°s avanzadas.\na. B√∫squedas b√°sicas # Para b√∫squedas muy b√°sicas, las expresiones regulares funcionan de la misma manera que la herramienta de b√∫squeda en tu navegador o procesador de texto. Es decir, un regex de la forma test va a hacer match con todas las ocurrencias de este string en el texto.\nb. Anclas # Las anclas son la primera herramienta clave para las regex. Usando los s√≠mbolos ^ y $ vamos a indicar si queremos que busque los caracteres dependiendo de si est√°n al inicio o al final del string.\nExpresi√≥n Efecto ^El selecciona cualquier string que empiece con The fin$ selecciona cualquier string que termine con end ^El fin$ selecciona exactamente este string c. Cuantificadores # Ahora bien, hasta ahora tenemos que escribir exactamente el n√∫mero de caracteres que queremos encontrar. Con los s√≠mbolos *, +, +, {} vamos a poder indicar si hay repetici√≥n de caracteres, como lo muestra la siguiente tabla:\nExpresi√≥n Efecto abc* selecciona un string que tenga ab seguido por cero o m√°s c abc+ selecciona un string que tenga ab seguido por una o m√°s c abc? selecciona un string que tenga ab seguido por cero o una c abc{2} selecciona un string que tenga ab seguido por exactamente dos c abc{2,} selecciona un string que tenga ab seguido por dos o m√°s c abc{,4} selecciona un string que tenga ab seguido por hasta cuatro c abc{2,5} selecciona un string que tenga ab seguido por de 2 a 5 c Como puedes ver, estos simbolos s√≥lo aplican para el caracter que est√° justo antes en la expresi√≥n regular. Para indicarle a la expresi√≥n regular que queremos que el cuantificador aplique para m√°s caracteres, tenemos que usar par√©ntesis (). A modo de ejemplo:\nExpresi√≥n Efecto a(bc)* selecciona un string que tenga a seguido por cero o m√°s copias de la secuencia bc a(bc){2,5} selecciona un string que tenga a seguido por de 2 a 5 copias de bc d. Operador o # Tal como si estuvieramos armando un condicional, podemos indicarle a la expresi√≥n regular si queremos que un string encuentre en una posici√≥n dada un caracter u otro.\nPara operaciones sencillas, usamos el caracter de l√≠nea vertical |, pero si tenemos que encadenar varios caracteres podemos usar los par√©ntesis cuadrados [] para abreviar. Adicionalmente, si escribimos al inicio de los par√©ntesis cuadrados el s√≠mbolo ^, es como si aplicaramos una negaci√≥n.\nExpresi√≥n Efecto `ab(c d)` ab[cdef] selecciona los strings abc, abd, abe y abf ab[^cdef] selecciona los strings que empiecen con ab seguidos por un caracter, excepto abc, abd, abe y abf e. Clases de caracteres # As√≠ como los cuantificadores nos permiten especificar la b√∫squeda con respecto al n√∫mero de caracteres, existe una sintaxis especial para buscar por el tipo de caracteres. Estos se describen a continuaci√≥n:\nExpresi√≥n Efecto \\d selecciona un d√≠gito \\w selecciona un caracter de palabra (caracter alfanum√©rico o gui√≥n bajo) \\s selecciona un caracter de espacio (incluye espacio, tab y nueva l√≠nea) . selecciona cualquier caracter Tal como cuando usabamos [] ten√≠amos una negaci√≥n, ac√° tambi√©n existe. Para ello, escribimos estos mismos t√©rminos pero en may√∫scula.\nExpresi√≥n Efecto \\D selecciona cualquier caracter excepto un d√≠gito \\W selecciona cualqueir caracter excepto un caracter de palabra (caracter alfanum√©rico o gui√≥n bajo) \\S selecciona cualquier caracter excepto un caracter de espacio (incluye espacio, tab y nueva l√≠nea) Finalmente, vale la pena decir que hay algunas abreviaciones usando los par√©ntesis cuadrados que hacen match con ciertos grupos de caracteres m√°s espec√≠ficos:\nExpresi√≥n Efecto [a-z] selecciona una letra en min√∫cula [A-Z] selecciona una letra en may√∫scula [0-9] selecciona un n√∫mero de 0 a 9 \u0026ldquo;Escapando\u0026rdquo; caracteres # Como te puedes dar cuenta, las regex usan una gran cantidad de s√≠mbolos para buscar ciertos patrones en el texto: ^ $ * + ? {} [] \\ .. Sin embargo, ¬øqu√© sucede cuando queremos buscar espec√≠ficamente estos caracteres en el texto?\nLa respuesta es que tenemos que usar el \\ para escapar a la funcionalidad en expresiones regulares. Por ejemplo, si quiero buscar los puntos en un texto y no cualquier caracter, la expresi√≥n regular correspondiente es \\..\nEsto tambi√©n implica que para efectos pr√°cticos del uso de las clases de caracteres, no vamos a escribir \\d sino \\\\d dentro del string.\nEl ejemplo de los correos electr√≥nicos # Habiendo visto lo anterior, volvamos a la expresi√≥n regular para la detecci√≥n de correos electr√≥nicos:\n\u0026#34;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$\u0026#34; Si bien antes parec√≠a algo muy extra√±o, ya te puedes dar cuenta que en realidad es algo muy sencillo. Separemos la expresi√≥n regular en 3 partes para ver qu√© hace:\n^[a-zA-Z0-9_.+-]+: Ubica los strings que empiecen por y tengan al menos una letra en may√∫scula o min√∫scula, un n√∫mero, un gui√≥n bajo, un punto, un m√°s o un menos. @[a-zA-Z0-9-]+: Seguidos de un arroba y al menos una letra en may√∫scula o min√∫scula, un d√≠gito o un gui√≥n. \\.[a-zA-Z0-9-.]+$: Seguidos de un punto y que terminen en al menos una letra en may√∫scula o min√∫scula, un d√≠gito o un gui√≥n. Como te puedes dar cuenta, una direcci√≥n cualquiera como este_es_un_email_inventado@proveedor.net aparecer√≠a como resultado de la b√∫squeda al usar esta expresi√≥n regular.\nAl combinar todos los elementos descritos con anterioridad, puedes definir b√∫squedas muy poderosas que te van a facilitar el procesamiento de textos.\nLecturas relacionadas # Ya conoces el funcionamiento b√°sico de las expresiones regulares. Te invito a leer sobre la aplicaci√≥n de las expresiones regulares en R y en python, as√≠ como algunos temas m√°s avanzados como agrupaciones y los conceptos de lazy y greedy en los siguientes enlaces:\nEl cap√≠tulo dedicado a strings del libro R for Data Science. La documentaci√≥n stringr. La documentaci√≥n de stringi. La documentaci√≥n de re. La documentaci√≥n de regex. ","date":"28 de febrero de 2021","externalUrl":null,"permalink":"/posts/que-son-las-expresiones-regulares/","section":"Publicaciones","summary":"Los strings son uno de los tipos de datos m√°s comunes que te vas a encontrar en el an√°lisis de datos.","title":"¬øQu√© son las expresiones regulares?","type":"posts"},{"content":"","date":"28 de febrero de 2021","externalUrl":null,"permalink":"/tags/regex/","section":"Tags","summary":"","title":"Regex","type":"tags"},{"content":"","date":"28 de febrero de 2021","externalUrl":null,"permalink":"/tags/strings/","section":"Tags","summary":"","title":"Strings","type":"tags"},{"content":"Dplyr es quiz√°s uno de los paquetes m√°s importantes del Tidyverse pues permite manipular dataframes f√°cilmente en R, a trav√©s de funciones como mutate(), select(), filter(), summarise(), arrange() y group_by().\nCuando se usa con el operador pipe %\u0026gt;%, el c√≥digo hecho con este paquete es muy legible, por lo que hay menos riesgos de olvidar cu√°l fue el procedimiento que aplicamos en nuestra base de datos.\nM√°s all√° de las funciones m√°s comunes, hoy te quiero hablar de 3 funciones de dplyr que probablemente no conoc√≠as.\n1. Transmute # En el trabajo del d√≠a a d√≠a, muchas veces me encuentro con la necesidad de sacar estad√≠sticas de resumen de un dataframe dado, y lo que suele pasar es que llamo la funci√≥n mutate() para computar alguna cifra en espec√≠fico (por ejemplo, la tasa de homicidios por cien mil habitantes usando los registros de homicidios y la poblaci√≥n) y luego tengo que usar select() para dejar √∫nicamente las columnas que me interesan en una tabla final.\nSin embargo, la funci√≥n trasmute() puede ahorrarte estos pasos, pues permite crear nuevas variables en el dataframe y al tiempo borra las que no usaste.\nVeamos un ejemplo. Al instalar dplyr tambi√©n descargas un dataframe llamado starwars que incluye la informaci√≥n de 87 personajes que aparecen entre en Episodio I y el Episodio VII. Entre las caracter√≠sticas de los personajes se incluyen la altura, el peso, el sexo, el planeta en que nacieron, etc.\nSupongamos que -por alguna raz√≥n- queremos calcular el Body Mass Index de todos los personajes. Si lo hicieramos usando mutate() y select() tendr√≠amos que hacer algo de este estilo:\nstarwars %\u0026gt;% mutate(BMI = mass/(height/100)^2) %\u0026gt;% select(name, height, mass, BMI) Ahora bien, usando transmute(), podemos abreviar esta operaci√≥n de la siguiente manera:\nstarwars %\u0026gt;% transmute(name, height, mass, BMI = mass/(height/100)^2) Como puedes ver, s√≥lo basta con llamar el nombre de una columna dentro de transmute() para que salga en la tabla final, y en la misma l√≠nea puedes crear nuevas variables, como si lo hicieras con la funci√≥n mutate().\nY si, el personaje con mayor BMI es Jabba, con un valor de 443.\n2. Coalesce # ¬øAlguna vez te has encontrado con una tabla que quieras importar, en la que una columna est√© separada en varias? Sup√≥n que tenemos una tabla con el resultado final de 5 estudiantes en una materia cualquiera. Sin embargo, en vez de anotar este resultado en una columna, la persona que hizo los registros los separ√≥ de la siguiente manera.\nEjemplo resultados acad√©micos\nPara este tipo de casos, la funci√≥n coalesce() funciona perfectamente. Esta funci√≥n encuentra el primer valor no vac√≠o para cada posici√≥n y tambi√©n permite juntar en una sola columna los valores separados como en el ejemplo anterior. Para este caso, primero vamos a cambiar un poco el contenido de las columnas, de tal manera que no nos quede s√≥lo una columna de x, y luego crearemos la nueva columna usando esta funci√≥n.\nresultados %\u0026gt;% mutate(aprueba = str_replace(aprueba, \u0026#34;x\u0026#34;, \u0026#34;aprueba\u0026#34;)) %\u0026gt;% mutate(reprueba = str_replace(reprueba, \u0026#34;x\u0026#34;, \u0026#34;reprueba\u0026#34;)) %\u0026gt;% mutate(resultado = coalesce(aprueba, reprueba)) Del c√≥digo anterior nos quedar√° la siguiente tabla:\nTabla de resultados acad√©micos modificada\nAqu√≠ pudimos haber usado la funci√≥n transmute() para que no quedaran las columnas aprueba y reprueba.\n3. Slice # Usualmente cuando tenemos que seleccionar algunas filas de un dataframe con dplyr, lo hacemos con la funci√≥n filter(), que recibe como argumento un condicional. A modo de ejemplo, si queremos obtener los paises con un PIB per c√°pita superior a 3.000 USD en 2007 de la base de datos de gapminder, lo que har√≠amos es lo siguiente:\nlibrary(gapminder) gapminder %\u0026gt;% filter(year == 2007, gdpPercap \u0026gt; 3000) Sin embargo, no en todos los casos queremos sacar parte de las filas de esta manera. As√≠ como en R base podemos obtener un subconjunto de filas usando el operador de extracci√≥n [], dplyr contiene la funci√≥n slice(). A modo de ejemplo, supongamos que queremos obtener el pa√≠s con mayor poblaci√≥n para cada continente en 1972. Esto lo podemos hacer de la siguiente manera:\nlibrary(gapminder) gapminder %\u0026gt;% filter(year == 1972) %\u0026gt;% group_by(continent) %\u0026gt;% arrange(continent, desc(pop)) %\u0026gt;% slice(1) Dado que hab√≠a ordenado la tabla en funci√≥n al continente y a la poblaci√≥n, aplicar la funci√≥n slice() devuelve directamente el pa√≠s con mayor poblaci√≥n por cada continente:\nPaises m√°s poblados por continente en 1972\nComo puedes ver, que adem√°s de permitir extraer filas con el n√∫mero asociado a su posici√≥n, la funci√≥n slice()se puede encadenar con el pipe %\u0026gt;% y funciona muy bien con funciones como group_by(). En este caso, en vez de devolver s√≥lo una fila, devolvi√≥ una fila por cada uno de los grupos que definimos. En este caso, los continentes.\nBonus: Crucigrama de dplyr # La inspiraci√≥n de este post me lleg√≥ por un crucigrama que descrubr√≠ hace algunas semanas en el blog de Georgios Karamanis sobre funciones de dplyr. En mi primer intento logr√© llenar s√≥lo 15 de las 34 funciones sin mirar en la documentaci√≥n. ¬°Te invito a que resuelvas este crucigrama e intentes superar mi resultado!\n","date":"21 de febrero de 2021","externalUrl":null,"permalink":"/posts/3-funciones-de-dplyr-que-no-sabias-que-existian/","section":"Publicaciones","summary":"Dplyr es quiz√°s uno de los paquetes m√°s importantes del Tidyverse pues permite manipular dataframes f√°cilmente en R, a trav√©s de funciones como mutate(), select(), filter(), summarise(), arrange() y group_by().","title":"3 funciones de dplyr que no sab√≠as que exist√≠an","type":"posts"},{"content":"","date":"21 de febrero de 2021","externalUrl":null,"permalink":"/tags/dplyr/","section":"Tags","summary":"","title":"Dplyr","type":"tags"},{"content":"","date":"21 de febrero de 2021","externalUrl":null,"permalink":"/tags/funciones/","section":"Tags","summary":"","title":"Funciones","type":"tags"},{"content":"","date":"21 de febrero de 2021","externalUrl":null,"permalink":"/tags/tidyverse/","section":"Tags","summary":"","title":"Tidyverse","type":"tags"},{"content":"Hay numerosas formas en las que podemos encontrar los datos para realizar nuestros an√°lisis. No s√≥lo me refiero a lo que tiene que ver con formatos - no siempre vamos a encontrar √∫nicamente archivos .xlsx -, sino tambi√©n a la organizaci√≥n misma de los datos en una tabla. Justo por esto, la limpieza y organizaci√≥n de los datos es una de las actividades m√°s importantes en la Ciencia de Datos. Hoy les quiero hablar del concepto de Tidy data, c√≥mo y cu√°ndo aplicarlo en tu flujo de trabajo.\nUna claridad # Para empezar, tenemos que partir de la base de que vamos a hablar de datos tabulares, es decir, que se distribuyen en filas y columnas. Puede parecer exagerado hacer esta claridad, despu√©s de todo estamos familiarizados con herramientas como Micosoft Excel o Google Sheets, que claramente cumplen estas caracter√≠sticas.\nSin embargo, tambi√©n existen diversas formas de almacenar datos que no necesariamente cumplen esta condici√≥n. Algunos ejemplos son los datos en formatos XML o JSON.\n¬øTidy data? # Sin haberlo dicho expl√≠citamente, seguro ya tienes una intuici√≥n de qu√© tipos de informaci√≥n se guardan en una base de datos. Lo que almacenamos es un conjunto de valores: pueden ser datos numericos o categ√≥ricos, que corresponden a una variable y una observacion.\nUna variable contiene todas las mediciones de un mismo atributo (por ejemplo la estatura de todas las personas que estudian en un sal√≥n de clases) y una observaci√≥n contiene todos los atributos medidos para la misma unidad (edad, estatura, sexo, etc. para la misma persona).\nEl Tidy data tiene que ver justamente con estos conceptos. Es un conjunto de principios cuyo prop√≥sito es estandarizar la manera en que se mapea la informaci√≥n contenida en las bases de datos con su estructura. Es decir, conseguir tablas en las que se pueda identificar f√°cilmente cuales son las observaciones, las variables y los valores, lo que a su vez facilitar√° su an√°lisis en un lenguaje de programaci√≥n.\nLos principios del Tidy data # De acuerdo con el paper de Hadley Wickham una base de datos est√° ordenada (Tidy) o desordenada (Messy) dependiendo de si las filas, columnas y tablas corresponden con observaciones, variables y tipos. Sin entrar en detalles , esto tiene una explicaci√≥n en las reglas de normalizaci√≥n para las bases de datos relacionales como SQL. Para efectos pr√°cticos, en una base de datos ordenada:\nCada variable forma una columna. Cada observaci√≥n forma una fila. Cada unidad observacional es una tabla. Para los siguientes ejemplos, voy a usar la informaci√≥n del n√∫mero de homicidios en 3 ciudades de Colombia, de acuerdo con la informaci√≥n descargada del Sistema de Informaci√≥n Estad√≠stico, Delincuencial, Contravencional y Operativo de la Polic√≠a Nacional, junto con las proyecciones de poblaci√≥n del DANE con base en el Censo de 2018.\nTabla 1: Una tabla que cumple con los principios de Tidy Data\nComo puedes ver, la tabla anterior obedece a los principios del Tidy data. Cada observaci√≥n - Bogot√°, Medell√≠n y Cali - est√° en una fila, cada variable - el a√±o, la poblaci√≥n, los homicidios y la tasa por 100.000 habitantes - est√° en su propia columna, y s√≥lo tenemos una tabla porque s√≥lo tenemos una unidad observacional - las ciudades -.\nAlgunos ejemplos comunes de datos desordenados # Si las bases de datos ordenadas son las que cumplen con estos principios, las bases de datos desordenadas son las que incumplen al menos uno de ellos. A continuaci√≥n vamos a ver los tipos m√°s comunes de datos desordenados, que obedecen al incumplimiento de los principios 1 y 2 del Tidy data.\nLos nombres de las columnas son valores y no variables # En este ejemplo, seleccion√© √∫nicamente la variable de Homicidios de la tabla. Como puedes ver, en vez de tener una columna con el a√±o y una columna para homicidios, los nombres de las columnas contienen los a√±os observados. De esta manera, hay 3 columnas que se refieren a la misma variable: Homicidios.\nTabla 2: Los nombres de las columnas son valores y no variables\nVarias variables est√°n almacenadas en una columna # Para este caso, filtr√© la tabla para incluir √∫nicamente las observaciones del a√±o 2020. Al mirar la tabla se evidencia que las variables de Poblaci√≥n, Homicidios y Tasa de homicidios se encuentran en una √∫nica columna llamdada Homicidios. F√Øjate c√≥mo se perjudica la legibilidad de la tabla al hacer este cambio.\nTabla 1: Varias variables estan almacenadas en una columna\nLas variables est√°n almacenadas tanto en columnas como filas # Finalmente, este ejemplo mezcla los dos casos anteriores. Por un lado, los valores de la variable a√±o son los t√≠tulos de las columnas y por el otro, las variables de poblaci√≥n, homicidios y tasa est√°n en una misma columna.\nTabla 4: Las variables est√°n almacenadas tanto en columnas como en filas\n¬øSiempre debo usar el tidy data? # Es importante decir que esta no necesariamente es la manera \u0026ldquo;correcta\u0026rdquo; de almacenar los datos en una tabla. Probablemente las tablas que vayas a incluir en un reporte o en una presentaci√≥n no cumplan con estos requisitos y esto no est√° mal per se. No en todas las ocasiones queremos que exista esta correspondencia entre los elementos y la estuctura de las tablas. Simplemente, los principios del Tidy data son √∫tiles para efectos del an√°lisis de datos y la programaci√≥n.\nA modo de ejemplo, ya sabemos que la tabla 1 cumple con estos principios: las variables est√°n en las columnas y las observaciones en las filas. Sin embargo, tambi√©n es cierto que la tabla 2 es un poco m√°s f√°cil de leer si quisieramos ver la evoluci√≥n de los homicidios por ciudad en los √∫ltimos 3 a√±os. Si bien el Tidy data es una herramienta importante para tu trabajo con datos, no necesariamete es una navaja suiza que sirva en todos los contextos.\nEn todo caso, tener una manera est√°ndar de almacenamiento de datos que tenga claras cuales son las observaciones, variables y valores, te puede ayudar a optimizar el flujo de trabajo y crear funciones para limpiar y procesar datos. No hay nada mejor que tener ya la funci√≥n lista para el an√°lisis de una base de datos que no hab√≠as trabajo antes.\nBonus: ¬øY en C√≥digo? # A modo de acompa√±amiento a este post, y para que conozcas algunas de las funciones √∫tiles para organizar las bases de datos seg√∫n lo visto anteriormente, escrib√≠ un script de R y un script de Python para pasar de la Tabla 1 a las tablas de los ejemplos de bases de datos desordenadas y viceversa. Puedes acceder a los scripts y al archivo .csv en el siguiente link.\nEspero que te haya inspirado conocer este concepto. Te invito a revisar el trabajo de Hadley Wickham, sobre el que me bas√© para escribir este post y que puedes encontrar en este link. Es una lectura corta pero amena, que te ayudar√° a profundizar sobre las aplicaciones del Tidy Data.\n","date":"14 de febrero de 2021","externalUrl":null,"permalink":"/posts/que-significa-que-los-datos-esten-ordenados/","section":"Publicaciones","summary":"Hay numerosas formas en las que podemos encontrar los datos para realizar nuestros an√°lisis.","title":"¬øQu√© significa que los datos est√©n ordenados?","type":"posts"},{"content":"","date":"14 de febrero de 2021","externalUrl":null,"permalink":"/tags/data/","section":"Tags","summary":"","title":"Data","type":"tags"},{"content":"","date":"14 de febrero de 2021","externalUrl":null,"permalink":"/tags/estructurados/","section":"Tags","summary":"","title":"Estructurados","type":"tags"},{"content":"","date":"14 de febrero de 2021","externalUrl":null,"permalink":"/tags/reglas/","section":"Tags","summary":"","title":"Reglas","type":"tags"},{"content":"","date":"14 de febrero de 2021","externalUrl":null,"permalink":"/tags/tidy/","section":"Tags","summary":"","title":"Tidy","type":"tags"},{"content":"Ahora que conoces algunos paquetes para visualizar mapas, es importante que entiendas qu√© son las proyecciones, pues te van a servir para hacer an√°lisis espacial m√°s adelante.\nUn problema de geometr√≠a # Puede parecer obvio lo que voy a decir, pero la tierra es un objeto tridimensional que podemos aproximar matem√°ticamente a trav√©s de un geoide. Las ubicaciones en la superficie de este geoide se suelen describir con latidudes y longitudes, que representan las direcciones Norte/Sur y Este/Oeste, tomando como referencia la l√≠nea del Ecuador y el Meridiano de Greenwich.\nAhora bien, no siempre tenemos a nuestra disposici√≥n un modelo tridimensional del globo para acercarnos lo m√°s posible a la ubicaci√≥n de un elemento en su superficie. En general usamos mapas para este prop√≥sito, pero eso introduce una dificutad y es que tenemos que transformar las ubicaciones de esta superficie a un plano. Este no es un asunto menor.\nEn el Theorema Egregium, el matem√°tico Carl Friederich Gauss prob√≥ que la superficie de una esfera no se puede representar en un plano sin distorsi√≥n. En la pr√°ctica, esto quiere decir que cuando hacemos un mapa en un plano, no necesariamente se van a conservar todas sus propiedades como el √°rea, la forma, la direcci√≥n, la distancia, entre otras.\nLas proyecciones # No hay una √∫nica forma de transformar las ubicaciones en la superficie de la tierra en un plano. De hecho, hay una gran cantidad de proyecciones distintas que buscan preservar alguno de los atributos descritos con anterioridad y que, seg√∫n el internet, dicen cosas sobre nuestra personalidad.\nEn vez de pegar im√°genes de las proyecciones, que puedes encontrar f√°cilmente en linea, para este post quiero dibujar algunas proyecciones en R usando el paquete sf. Primero veamos las proyecciones y luego te ense√±ar√© c√≥mo hacer estos mapas.\nLa lista de proyecciones que te voy a mostrar no es para nada exhaustiva y as√≠ como existen sistemas de coordenadas para el mundo, los hay para paises e incluso ciudades.\nMercator # La proyecci√≥n lleva el nombre del cart√≥grafo Gerardus Mercator y probablemente sea esta la que te imagines cuando pienses en un mapa del mundo. En la proyecci√≥n Mercator se mantienen la direcci√≥n y la forma pero se distorsiona el tama√±o a medida que se aleja del Ecuador.\nProyecci√≥n Mercator hecha en R\nMollweide # Esta proyecci√≥n se caracteriza por conservar el √°rea en cualquier lugar del mapa. Fue creada por el matem√°tico Karl Brandan Mollweide en 1805. Algunas de las aplicaciones de esta proyecci√≥n son los mapas de la Radiaci√≥n de fondo de microondas o de concentraci√≥n de qu√≠micos en el mar.\nProyecci√≥n Mollweide hecha en R\nPlate Carr√©e # Esta es una proyecci√≥n equirrectangular, es decir, en la que los meridianos y paralelos se ubican como l√≠neas con igual distancia entre si. Esto implica que no se conserva ni el √°rea ni la forma, pero a pesar de esto, se suele utilizar para mapas tem√°ticos.\nProyecci√≥n Plate Carr√©e hecha en R\nAitoff # La proyeccci√≥n de Aitoff conserva la direcci√≥n y la distancia de todos los puntos al centro del mapa, donde se cruza el meridiano de Greenwich y el Ecuador.\nProyecci√≥n Aitoff hecha en R\nWinkel tripel # Esta proyecci√≥n fue propuesta por el cart√≥grafo Oswald Winkel y tiene la particularidad de ser la media aritm√©tica entre la proyecci√≥n equirrectangular y la proyecci√≥n de Aitoff.\nLa proyecci√≥n de Winkle busca minimizar tres tipos de distorsi√≥n (de ah√≠ el tripel en su nombre): √°rea, direcci√≥n y distancia, y es usada por la National Geographic Society.\nProyecci√≥n Winkel tripel hecha en R\nFlujo de trabajo en R # Para los mapas anteriores us√© un shapefile descargado del repositorio de informaci√≥n geogr√°fica geoBoundaries, en el que puedes encontrar la informaci√≥n de la divisi√≥n administrativa de muchos pa√≠ses en varias resoluciones. En este caso, yo descargu√© la informaci√≥n del mundo s√≥lo a nivel de paises, con baja resoluci√≥n.\nImportando el mapa # Como siempre, vamos a importar el shapefile usando la funci√≥n st_read().\nlibrary(sf) library(dplyr) library(rmapshaper) mapa_base \u0026lt;- sf::st_read(\u0026#34;geoBoundariesCGAZ_ADM0.shp\u0026#34;) %\u0026gt;% rmapshaper::ms_simplify(sys = T, keep = 0.01) %\u0026gt;% sf::st_as_sf() En el bloque de c√≥digo anterior hago dos cosas adicionales. En primer lugar, del paquete dplyr uso el operador pipe para encadenar las salidas de cada linea de c√≥digo con la entrada de la siguiente. El operador pipe es la secuencia de caracteres %\u0026gt;%, y si has trabajado con el tidyverse te ser√° familiar.\nEn segundo lugar, uso la funci√≥n ms_simplify del paquete rmapshaper para simplificar las geometr√≠as y disminuir el tiempo que se demora en dibujar cada mapa. Dado que rmapshaper a√∫n no tiene soporte completo para el paquete sf, internamente la funci√≥n lo convierte en un objeto distinto, por lo que al final uso la funci√≥n st_as_sf() para que el mapa vuelva a funcionar con sf.\nFunciones para trabajar con proyecciones # Para estos efectos, hay dos funciones clave. La primera es la funci√≥n st_crs(), que permite extraer cu√°l es el sistema de coordenadas, y por extensi√≥n la proyecci√≥n, del objeto con el que estamos trabajando.\nEn general, los sistema de coordenadas que vas a encontrar siguen la nomencluatura \u0026ldquo;EPSG:XXXX\u0026rdquo;. La primera parte es por el European Petroleum Survey Group, o EPSG. Esta es una organizaci√≥n que mantiene una base de datos de sistemas de coordenadas geogr√°ficas. La segunda parte es el c√≥digo en dicha base de datos con el que podr√°s acceder al sistema de coordenadas que necesites.\nSi corremos la siguiente l√≠nea de c√≥digo,\nsf::st_crs(mapa_base) R nos debe devolver que este objeto tiene un ID EPSG de 4326. Puedes consultar m√°s informaci√≥n sobre este y otros sistemas de coordenadas en este link.\nLa otra funci√≥n que nos va a ayudar es st_transform(). Con esta funci√≥n, podremos convertir un mapa de un sistema de coordenadas geogr√°ficas a otro. Por ejemplo, si quiero convertir el mapa base al sistema EPSG:3116, que es el sistema oficial del Instituto Agustin Codazzi para Colombia, tendr√≠a que hacer lo siguiente:\nmapa_nuevo \u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;EPSG:3116\u0026#34;)) Esta transformaci√≥n en particular genera un error al intentar dibujar el mapa. Lo importante es que sepas c√≥mo usar la funci√≥n st_transform en caso que lo necesites.\nC√≥digo para dibujar los mapas # Con las dos funciones anteriores, ya tenemos los elementos necesarios para transformar las proyecciones. Ac√° les dejo el c√≥digo que us√© para dibujar los mapas que aparecen m√°s arriba en el post.\nlibrary(dplyr) library(tmap) library(tmaptools) library(sf) mapa_base \u0026lt;- sf::st_read(\u0026#39;~/Downloads/World Map/geoBoundariesCGAZ_ADM0.shp\u0026#39;) %\u0026gt;% rmapshaper::ms_simplify(sys=T, keep = 0.01) %\u0026gt;% st_as_sf() # Proyecci√≥n de Mercator mapa_mercator \u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;EPSG:3395\u0026#34;)) tm_shape(mapa_mercator, bbox = tmaptools::bb(mapa_mercator, ylim=c(-15496570.74, 18764656.23), xlim=c(-20026376.39, 20026376.39))) + tm_polygons() + tm_graticules() # Proyecci√≥n de Molweide mapa_mollweide \u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;ESRI:54009\u0026#34;)) tm_shape(mapa_mollweide) + tm_polygons() + tm_graticules() # Proyecci√≥n Plate Carr√©e mapa_plate_carree\u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;EPSG:32662\u0026#34;)) tm_shape(mapa_plate_carree) + tm_polygons() + tm_graticules() # Proyecci√≥n Aitoff mapa_aitoff \u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;ESRI:54043\u0026#34;)) tm_shape(mapa_aitoff) + tm_polygons() + tm_graticules() # Proyecci√≥n de Winkel tripel mapa_winkel \u0026lt;- sf::st_transform(mapa_base, crs = st_crs(\u0026#34;ESRI:54019\u0026#34;)) tm_shape(mapa_winkel) + tm_polygons() + tm_graticules() ","date":"31 de enero de 2021","externalUrl":null,"permalink":"/posts/hablemos-de-proyecciones/","section":"Publicaciones","summary":"Ahora que conoces algunos paquetes para visualizar mapas, es importante que entiendas qu√© son las proyecciones, pues te van a servir para hacer an√°lisis espacial m√°s adelante.","title":"Hablemos de proyecciones","type":"posts"},{"content":"Una de las primeras cosas que tienes que saber si quieres comenzar tu camino para programar en python son los diferentes tipos de estructuras de datos que tendr√°s a tu disposici√≥n. Cada una de ellas cuenta con caracter√≠sticas particulares, de tal manera que no hay una s√≥la que sea la soluci√≥n a todos los problemas. Al finalizar este post tendr√°s las herramientas b√°sicas para entender estas diferencias, crear estas estructuras y trabajar con ellas.\nListas # Una lista es una estructura de datos que puede contener elementos de distintos tipos: n√∫meros, strings, booleanos, etc. aunque usualmente se usa para contener solamente uno. Es importante saber que las listas son mutables, es decir que se pueden modificar los elementos que estas contienen despu√©s de que la lista se cre√≥ y que los elementos tienen un √≠ndice num√©rico. Entrar√© en m√°s detalle sobre esto cuando veamos c√≥mo acceder a sus elementos.\na. Crear una lista # Para crear una lista en python, basta con escribir una secuencia de elementos separados por comas dentro de par√©ntesis cuadrados. A manera de ejemplo:\n# Crear una lista de un elemento mi_lista1 = [4] # Crear una lsita de varios elementos mi_lista2 = [\u0026#39;Camilo\u0026#39;, \u0026#39;Martinez\u0026#39;, \u0026#39;Ciencia\u0026#39;, \u0026#39;Datos\u0026#39;] b. Acceder a los elementos de una lista # Como mencionaba con anterioridad, las listas est√°n indexadas de manera num√©rica de conformidad con la posici√≥n de cada elemento de la lista. Esto es lo que permite acceder a los elementos de manera ordenada cuando estemos trabajando.\nEs muy importante decir que en Python se empieza contando desde 0. Es decir, el primer elemento de una lista tendr√° un √≠ndice 0, el segundo tendr√° un √≠ndice 1 y as√≠ sucesivamente.\nSupongamos que quiero acceder al string Ciencia en mi_lista2 del ejemplo anterior. Sabemos que Ciencia est√° en la tercera posici√≥n en la lista, lo que implica que el √≠ndice num√©rico que debemos usar es el 2. Entonces, para acceder a este elemento simplemente debemos escribir en python:\nmi_lista2[2] Estos par√©ntesis cuadrados que van despu√©s de una estructura de datos, se conocen como el Operador de sub√≠ndice (o Subscript operator en ingl√©s). Hay muchas formas de jugar con este operador de sub√≠ndice; no necesariamente tendemos que extraer los elementos uno por uno. Por ejemplo, si queremos extraer Mart√≠nez y Ciencia, podemos usar un slice de la siguiente manera:\nmi_lista2[1:3] Te estar√°s preguntando, pero si Ciencia era el elemento 2 ¬øpor qu√© hay que poner 3 en el n√∫mero de la derecha? As√≠ como python cuenta desde 0 y no desde 1, cuando se hacen slices el n√∫mero de la derecha es 1 + el √≠ndice que queremos. Supongamos que tenemos una lista con 20 elementos y quiero extraer el 6 al 15. Por la manera como est√° escrito python, tendr√≠amos que escribir en el √≠ndice de la derecha 15+1, es decir, 16:\nmi_lista3[6:16] Por otro lado, recuerda que las listas son mutables, por lo que podemos modificar los elementos que est√°n en la lista usando la misma forma de acceder a los elementos descrita anteriormente. Si por ejemplo quisiera modificar el Mart√≠nez por Rodr√≠guez lo puedo hacer escribiendo:\nmi_lista_2[1] = \u0026#39;Rodr√≠guez\u0026#39; Encontrar√°s m√°s informaci√≥n sobre esta forma de extraer y modificar elementos en este link.\nc. M√©todos √∫tiles de las listas # No voy en entrar en detalle en este post, pero es importante que sepas que Python es un lenguaje de programaci√≥n orientado a objetos, un paradigma de la programaci√≥n basado en el concepto de los objetos. Estos objetos pueden contener tanto datos como c√≥digo y en t√©rminos generales tienen atributos, que son las caracter√≠sticas del objeto, y m√©todos, que son las acciones asociadas a √©ste. A continuaci√≥n, algunos m√©todos √∫tiles para trabajar con listas:\n# A√±adir un elemento al final de una lista mi_lista.append(\u0026#39;Nuevo elemento\u0026#39;) # Eliminar todos los elementos de una lista mi_lista.clear() # Encontrar el √≠ndice de un elemento de la lista mi_lista.index(\u0026#39;Elemento de la lista\u0026#39;) # Reversar el orden de la lista mi_lista.reverse() # Ordenar la lista mi_lista.sort() # Contar cu√°ntos elementos de la lista tienen un valor dado mi_lista.count(\u0026#39;Valor para contar\u0026#39;) Tuplas # Las tuplas son similares a las listas, en la medida que pueden almacenar elementos de distintos tipos y usan √≠ndices num√©ricos, pero a diferencia de ellas no son mutables.\na. Crear una tupla # La creaci√≥n de una tupla es muy similar a la de una lista. En vez de usar par√©ntesis cuadrados usamos par√©ntesis normales. Ahora bien, para el caso de una tupla de un elemento, la creaci√≥n es un poco distinta porque si s√≥lo se encierra en par√©ntesis, python lo va a interpretar como un n√∫mero, un string o un booleano com√∫n y corriente. Entonces, para crear una tupla escribimos:\n# Crear tuplas de un elemento mi_tupla1 = (8,) # En este caso, siempre tenemos que escribir una coma despu√©s del √∫nico elemento # Crear tuplas de varios elementos mi_tupla2 = (\u0026#39;Manzanas\u0026#39;, \u0026#39;Peras\u0026#39;, \u0026#39;Uvas\u0026#39;) b. Acceder a los elementos de una tupla # Esta operaci√≥n sigue ex√°ctamente las mismas reglas que el acceso a elementos en las listas. Para saber qu√© elemento queremos obtener tenemos que encontrar su posici√≥n en la tupla contando desde 0 y usar el operador de sub√≠ndice para elegirlo. Por ejemplo, si quiero seleccionar Manzanas de mi_tupla2, tengo que escribir:\nmi_tupla2[0] Como dec√≠a con anterioridad, las listas no son mutables, por lo que no las puedes modificar directamente. Es decir, un m√©todo como .append() no funcionar√≠a en este caso. Sin embargo, si quieres crear una nueva tupla con elementos adicionales a la inicial puedes usar el operador +=. Por ejemplo, si quiero a√±adir fresas y duraznos a la mi_tupla2, puedo escribir:\nmi_tupla2 += (\u0026#39;Fresas\u0026#39;, \u0026#39;Duraznos\u0026#39;) En estricto sentido, lo que hace esta l√≠nea de c√≥digo no es modificar la tupla anterior, sino crear una nueva tupla que ahora contiene 5 elementos y ponerle el nombre de la tupla anterior. Puede parecer una diferencia muy peque√±a pero cobrar√° importancia en la medida que trabajes m√°s con √©stas estructuras.\nc. M√©todos √∫tiles de las tuplas # Al no ser mutables como las listas, las tuplas tienen menos m√©todos con los que puedes trabajar. B√°sicamente encontrar√°s dos m√©todos:\n# Encontrar el √≠ndice de un elemento de la lista mi_tupla.index(\u0026#39;Elemeto de la tupla\u0026#39;) # Contar cu√°ntos elementos de la lista tienen un valor dado mi_tupla.count(\u0026#39;Valor para contar\u0026#39;) Diccionarios # Los diccionarios son estructuras un poco distintas, que funcionan relacionando llaves (o keys) con valores de manera no ordenada (o m√°s exactamente no tienen un √≠ndice num√©rico). En los diccionarios, las llaves deben ser inmutables (por ejemplo strings o tuplas) y deben ser √∫nicas, aunque los diccionarios como tal si son mutables.\na. Crear un diccionario # Para crear un diccionario vamos a usar corchetes para encerrar parejas de elementos separados por \u0026lsquo;:\u0026rsquo; de la siguiente manera. El primer elemento va a ser la llave y el segundo elemento va a ser el valor.\nmi_diccionario = {\u0026#39;Bogot√°\u0026#39;: 11001 ,\u0026#39;Medell√≠n\u0026#39;: 05001, \u0026#39;Cali\u0026#39;: 76001} En este caso, cre√© un diccionario con el c√≥digo DIVIPOLA de √©stas tres ciudades, disponible aqu√≠.\nb. Acceder a los elementos de un diccionario # El operador de sub√≠ndice tambi√©n funciona para los diccionarios, s√≥lo que en este caso no vamos a incluir un √≠ndice num√©rico sino el nombre de la llave que queremos obtener. Por ejemplo, si quiero saber cu√°l es el c√≥digo DIVIPOLA de Medell√≠n, voy a escribir:\nmi_diccionario[\u0026#39;Medell√≠n\u0026#39;] Ahora, supongamos que se me olvid√≥ a√±adir a la ciudad de Bucaramanga y quisiera que estuviera incluida en mi diccionario. Para ello, hacemos una operaci√≥n similar a la modificaci√≥n de las listas que se describi√≥ con anterioridad:\nmi_diccionario[\u0026#39;Bucaramanga\u0026#39;] = 68001 Este mismo procedimiento lo podemos usar si nos equivocamos al introducir un valor en el diccionario (p.e. Si el c√≥digo DIVIPOLA de Cali estuviera mal).\nCon esto, te debe quedar un poco m√°s claro por qu√© los diccionarios se llaman as√≠.\nc. M√©todos √∫tiles de los diccionarios # Algunos m√©todos que debes saber para trabajar con diccionarios son:\n# Eliminar todos los elementos de un diccionario mi_diccionario.clear() # Obtener una lista con todas llaves del diccionario mi_diccionario.keys() # Obtener una lista con todos los valores del diccionario mi_diccionario.values() # Obtener una lista de tuplas con cada llave y cada valor mi_diccioanrio.items() # Eliminar una pareja de llave-valor mi_diccionario.pop(\u0026#39;Nombre de la llave\u0026#39;) Conjuntos # Finalmente, los conjuntos son colecciones no ordenadas de valores √∫nicos y s√≥lo pueden contener elementos inmutables como strings, n√∫meros o tuplas.\na. Crear un conjunto # Para crear un conjunto tambi√©n usamos los corchetes, pero en vez de incluir parejas de llaves y valores separados por \u0026lsquo;:\u0026rsquo;, vamos a escribir los elementos a incluir de la siguiente manera:\nmi_conjunto1 = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10} Vale la pena decir, que tambi√©n podemos crear conjuntos a partir de listas usando la funci√≥n set(). Por ejemplo:\nmi_lista_para_conjunto = [1, 2, 2, 2, 3, 5, 7, 9] mi_conjunto2 = set(mi_lista_para_conjunto) En este caso vale la pena aclarar que si bien la lista tiene elementos repetidos, al crear el conjunto s√≥lo apareceran los elementos una vez. Para este ejemplo, el conjunto est√°ra compuesto por {1, 2, 3, 5, 7, 9}.\nb. Acceder a los elementos de un conjunto # En vez de acceder a los elementos tal cual como lo hemos hablado para las estructuras de datos anteriores, al ser estructuras no ordenadas y de valores √∫nicos, lo que podemos hacer con los conjuntos es verificar si un elemento est√° dentro del conjunto de la siguiente manera:\n1 in mi_conjunto1 11 not in mi_conjunto 1 El resultado de la operaci√≥n anterior ser√° un booleano, es decir, un True o un False.\nc. M√©todos √∫tiles de los conjuntos # Tal como en la teor√≠a de conjuntos que se ve en el colegio, las operaciones m√°s interesantes de los conjuntos se dan cuando se interact√∫an varios conjuntos entre si. Aqu√≠ una lista de m√©todos √∫tiles para conjuntos:\n#¬†A√±adir un elemento al conjunto mi_conjunto1.add(\u0026#39;Elemento a a√±adir\u0026#39;) # Eliminar un elemento del conjunto mi_conjunto.discard(\u0026#39;Elemento a eliminar\u0026#39;) mi_conjunto.remove(\u0026#39;Elemento a eliminar\u0026#39;) # Eliminar todos los elementos del conjunto mi_conjunto.clear() # Encontrar la uni√≥n de dos conjuntos mi_conjunto.union(otro_conjunto) # Encontrar la intersecci√≥n de dos conjuntos mi_conjunto.intersection(otro_conjunto) # Encontrar si un conjunto contiene a otro conjunto mi_conjunto.issuperset(otro_conjunto) # Encontrar si un conjunto est√° contenido en otro conjunto mi_conjunto.issubset(otro_conjunto) # Encontrar si dos conjuntos son disjuntos mi_conjunto.isdisjoint(otro_conjunto) Espero que te haya servido esta gu√≠a para entender un poco mejor los diferentes tipos de estructuras de datos en python. Si quieres leer m√°s del tema, tambi√©n te recomiendo leer sobre los arrays de numpy, una estructura que trae algunas ventajas sobre las lsitas y que es la base de paquetes para ciencia de datos como pandas.\n","date":"24 de enero de 2021","externalUrl":null,"permalink":"/posts/estructuras-de-datos-basicas-en-python/","section":"Publicaciones","summary":"Una de las primeras cosas que tienes que saber si quieres comenzar tu camino para programar en python son los diferentes tipos de estructuras de datos que tendr√°s a tu disposici√≥n.","title":"Estructuras de datos b√°sicas en python","type":"posts"},{"content":"As√≠ que decidiste aprender a usar R para trabajar con mapas. Esta guia te dar√° las herramientas b√°sicas para que puedas hacerlo, incluyas visualizaciones de mapas en tu flujo de trabajo y te motives a hacer an√°lisis espacial con este lenguaje.\nC√≥digo vs interfaces de usuario # Antes de comenzar, lo primero que tienes que saber es que para hacer mapas en R vas a tener que escribir c√≥digo. No es c√≥digo muy complejo si tienes una familiaridad b√°sica con este lenguaje de programaci√≥n, pero quiz√°s al principio tiene una curva de aprendizaje m√°s empinada que programas como ArcGIS (o su alternativa Open Source QGIS) en los que puedes interactuar a trav√©s de men√∫s y botones con tu mouse.\nSin embargo, si ya est√°s trabajando en un ambiente de R, si quieres automatizar la creaci√≥n de muchos mapas con estructuras de control - los bucles con for-, o si te gustar√≠a incluir f√°cilmente tu an√°lisis en un dashboard de shiny, realizar mapas de esta forma puede ser una muy buena alternativa.\n¬øD√≥nde consigo los mapas? # Lo primero que te puedes estar preguntando es: ¬øPero y d√≥nde encuentro los mapas para trabajar? Afortunadamente, en l√≠nea hay muchos repositorios de informaci√≥n con atributos espaciales. Aqui va una lista de enlaces que te pueden ser de utilidad para empezar.\nPara Colombia # El Marco Geoestad√≠stico Nacional del DANE contiene los pol√≠gonos del pa√≠s, sus departamentos y municipios, con revisiones en 2005, 2012, 2017, 2018 y 2020. El portal de Datos Abiertos del IGAC tiene informaci√≥n de agrolog√≠a, cartograf√≠a, geodesia, entre otros. El IDECA tiene una gran cantidad de informaci√≥n para Bogot√° para un gran n√∫mero de tem√°ticas: Ordenamiento Territorial, Salud, Ambiente, Seguridad, entre otros. GeoMedell√≠n aloja numerosos conjuntos de informaci√≥n geolocalizada para Medell√≠n, tambi√©n separados por temas. Para el resto del Mundo # El GADM del Centro de Ciencias Espaciales de la Universidad de California, Davis tiene los shapefiles para todos los pa√≠ses y sus subdivisiones. Dependiendo el pa√≠s que escojas habr√° mayor o menor calidad de la informaci√≥n. Esta no es una lista exhaustiva de fuentes de informaci√≥n, as√≠ que si conoces otra fuente que creas que debe estar all√≠, comp√°rtemela para a√±adirla.\nEl formato shapefile # El formato m√°s com√∫n con el que te vas a encontrar es el shapefile. Este formato es desarollado por ESRI, la compa√±√≠a que cre√≥ ArcGIS, y consiste en varios archivos con extensiones *.dbf, *.prj, *.sbn, *.sbx, *.shp, *.shx, entre otros.\nPara efectos pr√°cticos, siempre que querramos importar o modificar el shapefile en R, vamos a referirnos √∫nicamente al archivo *.shp y R se encargar√° del resto. As√≠mismo, es importante que no borres los archivos con las dem√°s extensiones, dado que para que el shapefile funcione los necesitas a todos.\nEventualmente, te puedes encontrar con otros formatos como el GeoPackage o geodatabase, pero la manera de trabajar con ellos en R es my similar a la del shapefile.\n1. Simple Features: sf # Simple Features es un est√°ndar para la representaci√≥n de objetos espaciales de la vida real a trav√©s de geometr√≠as -puntos, lineas, pol√≠gonos, etc. - en los sistemas de informaci√≥n geogr√°fica. El paquete sf implementa este est√°ndar en R y es con el que vamos a trabajar.\nEn esta gu√≠a no vamos a cubrir cosas espec√≠ficas como las funciones para personalizar los mapas, el sistema de coordenadas de los shapefiles u operaciones con y entre shapes. Por ahora solo vamos a importar un shape a R.\nVoy a usar el mapa de las localidades de la Bogot√° disponible en la p√°gina del IDECA para hacer los siguiente ejemplos. Lo primero, y lo √∫nico, que vamos a hacer con sf ser√° importar el shapefile. Para ello, vamos a correr el siguiente c√≥digo:\ninstall.packages(\u0026#39;sf\u0026#39;) # Si no has instalado el paquete a√∫n library(sf) mi_shape \u0026lt;- sf::st_read(\u0026#39;Loca.shp\u0026#39;) # Debes modificar el contenido de st_read dependiendo de d√≥nde tengas guardado el archivo. Si todo salio bien, deber√≠as tener un objeto en r con clase sf, que contiene un mapa con las localidades de Bogot√°.\n2. ggplot2 # La primera forma de visualizar este objeto es usando el paquete ggplot2 del tidyverse. Este paquete es una de las librer√≠as m√°s usadas para crear gr√°ficos en R y tiene muchas opciones para ajustar cada detalle.\nVisualizar un mapa en ggplot es muy sencillo. As√≠ como tienes funciones como geom_point() o geom_bar() para crear un gr√°fico de puntos o un gr√°fico de barras, el paquete sf contiene una funci√≥n geom_sf() que se enlaza con ggplot2 y te permite visualizar el mapa.\nA modo de ejemplo, el resultado del siguiente c√≥digo ser√°:\nlibrary(ggplot2) ggplot(data = mi_shape) + geom_sf() Mapa de las localidades de bogot√° usando ggplot2\nDe aqui en adelante, puedes jugar con las opciones de temas de ggplot2, para cambiar el color de fondo, la fuente, los ejes, entre muchas otras cosas. Por ejemplo, intenta a√±adir al final del c√≥digo anterior + theme_void(). Casi cualquier configuraci√≥n que funcionar√≠a para un ggplot normal, funciona para un mapa hecho de esta forma.\n3. tmap # tmap es un paquete dise√±ado espec√≠ficamente para la creaci√≥n de mapas tem√°ticos con sf. tmap tiene una sintaxis muy parecida a la de ggplot y tiene la ventaja de que no tienes que lidiar con etiquetas de los ejes, color de fondo, etc. Ya est√° dise√±ado para sacar un mapa m√°s limpio.\nAl ejecutar los siguientes comandos, tendr√°s como resultado:\nlibrary(tmap) tm_shape(mi_shape) + tm_polygons() Mapa de las localidades de bogot√° usando tmap\nUna vez est√©s familiarizado con este paquete, te recomiendo revisar el paquete tmaptools, que contiene algunas funciones √∫tiles para trabajar con tmap.\n4. leaflet # Finalmente, el paquete leaflet ofrece una funcionalidad mucho m√°s interesante: Interactividad. Con este paquete, puedes crear un mapa en el que podr√°s arrastrar, hacer zoom, definir que hace cuando haces clic o cuando pasas el mouse por encima de un pol√≠gono, entre muchas otras cosas.\nLo mejor de todo, la sintaxis es parecida a los dos m√©todos anteriores, por lo que construir un mapa m√°s complejo sigue siendo muy sencillo usando leaflet.\nDel siguiente c√≥digo, resulta:\nlibrary(leaflet) leaflet(data = mi_shape) %\u0026gt;% addTiles() %\u0026gt;% # Esta funci√≥n a√±ade el mapa de fondo, que peudes cambiar por muchas opciones addPolygons(weight = 0.5, label = ~LocNombre) Mapa de las localidades con leaflet\nUna gran ventaja de trabajar con leaflet es que puedes integrar los mapas interactivos con tableros de visualizaci√≥n con shiny, conservando la interactividad con los usuarios. Si quieres saber c√≥mo funciona shiny, revisa la introducci√≥n que hice en esta entrada de blog.\nBonus: Haz el mapa de las calles de tu ciudad # Recientemente encontr√© este tutorial de Christian Burkhart ( @ChBurkhart) en el que describe c√≥mo hacer un mapa usando osmdata y ggplot2. Te invito a que hagas este ejercicio, que no te tomar√° m√°s de 5 minutos. Yo lo hice para Bogot√° y no qued√≥ tan mal.\nCon estos 4 paquetes, tienes lista una caja de herramientas para empezar a trabajar con mapas y al jugar con las opciones, podr√°s hacer visualizaciones profesionales y de manera muy f√°cil.\nLecturas relacionadas # Documentaci√≥n de sf Documentaci√≥n de tmap Documentaci√≥n de leaflet para R ","date":"17 de enero de 2021","externalUrl":null,"permalink":"/posts/4-paquetes-para-hacer-mapas-en-r/","section":"Publicaciones","summary":"As√≠ que decidiste aprender a usar R para trabajar con mapas.","title":"4 paquetes para hacer mapas en R","type":"posts"},{"content":" En general, usamos a los computadores para realizar c√°lculos que ser√≠an m√°s complicados si los hacemos de manera manual. Tanto por la capacidad de los computadores de realizar muchas tareas repetitivas en menor tiempo, como por la menor posibilidad de introducir errores en las operaciones. Por ejemplo, oprimir el bot√≥n equivocado en la calculadora.\nSin embargo, en lo que respecta a n√∫meros decimales, la manera en c√≥mo se procesan en muchos lenguajes de programaci√≥n puede llevar a que algunas operaciones no se comporten como esperamos.\nEl problema # Para explicar lo que no funciona, vamos a desarrollar un ejercicio muy sencillo. En una consola de python, realizar la siguiente operaci√≥n\n1 + 2 nos va a devolver 3. Esto es evidente, es una suma simple.\nAhora bien, introduzcamos los n√∫meros decimales al dividir la operaci√≥n anterior entre 10. Es decir, sumemos\n0.1 + 0.2 ¬øDeber√≠a dar 0.3 verdad? No exactamente. En realidad, python va a arrojar que la respuesta a esta suma es 0.30000000000000004. Claramente algo debe estar pasando tras bambalinas.\nUna particularidad para R # Si bien este problema no se presenta en un entorno de R, no significa que no existan dificultades con los decimales. Si no me crees, intenta resolver\nceiling(31/60 * 60) Teniendo en cuenta que la funci√≥n ceiling busca el n√∫mero entero m√°s peque√±o que sea mayor o igual al argumento, esta expresi√≥n deber√≠a ser igual a 31 ¬øcierto?\nFloats # La manera como python y la mayor√≠a de lenguajes de programaci√≥n representan los n√∫meros decimales es a trav√©s de los n√∫meros de punto flotante, o de manera abreviada floats.\nNotaci√≥n cient√≠fica # En el fondo, lo que hacen los floats es representar cualquier n√∫mero en t√©rminos de notaci√≥n cient√≠fica. Es decir, separan el n√∫mero en un significando y un exponente.\nEl significando contiene los d√≠gitos del n√∫mero en cuesti√≥n y los almacena como un n√∫mero con un s√≥lo lugar en las unidades y cu√°ntos decimales sean necesarios. A modo de ejemplo. Para el n√∫mero 117, el significando ser√≠a 1.17.\nPor su parte, la parte del exponente indica en d√≥nde va en realidad el punto decimal del n√∫mero original. En otras palabras, por qu√© potencia de 10 tenemos que multiplicar el signficando para volver al n√∫mero original. Para el mismo ejemplo, el exponente ser√≠a 2, pues al multiplicar 1.17 por 100, que es \\(10^2\\), volvemos a obtener 117.\nEsto tambi√©n aplica para n√∫meros negativos o n√∫meros muy peque√±os. Por ejemplo, si queremos representar -0.0005 en esta notaci√≥n, tenemos que el significando es -5 y que el exponente es -4, pues al resolver \\(-5 * 10^{-4}\\) volvemos al n√∫mero original.\nPrecisi√≥n # Ahora bien, con todo esto no hay que perder de vista que los computadores almacenan los n√∫meros en sistema binario. Es decir, en potencias de 2. Esto hace que la parte decimal de los n√∫meros sea el resultado de sumar fracciones del estilo \\(1/2 + 1/4 + 1/8 + 1/16 + \u0026hellip;\\).\nDado lo anterior, es muy f√°cil representar 0.5 y de hecho, para este n√∫mero no hay problema en la suma de fracciones. Sin embargo, no todos los n√∫meros se pueden representar f√°cilmente de esta forma. Volviendo al caso inicial, no podemos escribir ni 0.1 ni 0.2 con una suma finita de potencias de 2. Entonces, lo que hace el computador es tratar de aproximar lo m√°ximo posible al n√∫mero deseado.\nPor esta raz√≥n, cuando insertamos en la consola de python\n0.1 + 0.2 lo que hace el interpretador es procesar ambos n√∫meros como floats y tratar de resolver la suma con la mejor aproximaci√≥n posible teniendo en cuenta el sistema binario.\nComo resultado, lo que devuelve python es un valor muy cercano a 0.3, pero no exactamente igual.\n¬øQu√© hacer al respecto? # Decimals # En este caso, y en especial cuando tenemos que lidiar con c√°lculos de dinero y no nos podemos permitir estos peque√±os errores, python incluye un tipo de n√∫mero llamado Decimal en el m√≥dulo decimal.\nEn el siguiente cuadro de c√≥digo est√° la comparaci√≥n de c√≥mo escribimos un float y un n√∫mero con esta nueva clase.\nfrom decimal import Decimal # 0.1 como float 0.1 #0.3 como Decimal Decimal(\u0026#39;0.1\u0026#39;) Al operar usando los Decimal vamos a tener que el problema inicial desaparece, y python va a resolver correctamente la operaci√≥n de 0.1 + 0.2 y dar√° 0.3 cerrado.\nO\u0026hellip; ¬ønada? # En la gran mayor√≠a de casos, este tipo de problemas con los floats son demasiado peque√±os como para que nos tengamos que preocupar. Es decir, ¬øen realidad importa para todos nuestros c√°lculos una diferencia que est√° casi 20 ceros a la derecha del punto?\nEsto depender√° de la aplicaci√≥n puntual que estemos desarrollando. Pero lo importante es estar consciente de que la mayor√≠a de lenguajes de programaci√≥n representan y almacenan los decimales de esta forma para saber en qu√© casos va a representar un problema y actuar de manera correspondiente.\nEn este sentido, no es que hayamos vivido varias d√©cadas con computadores que no saben sumar. Es que la forma en c√≥mo se almacenan estos n√∫meros no es tan intuitiva. Entonces, la pr√≥xima vez que vayas a hacer operaciones con decimales, presta mucha atenci√≥n a c√≥mo funcionan las floats y as√≠ te ahorrar√°s dolores de cabeza.\nLecturas complementarias # The floating point guide Floating point numbers - Computerphile Why doesn‚Äôt R think these numbers are equal? ","date":"5 de octubre de 2020","externalUrl":null,"permalink":"/posts/cuidado-con-los-decimales/","section":"Publicaciones","summary":"En general, usamos a los computadores para realizar c√°lculos que ser√≠an m√°s complicados si los hacemos de manera manual.","title":"¬°Cuidado con los decimales!","type":"posts"},{"content":"Al trabajar en un proyecto que requiere gran cantidad de c√≥digo, llenar el archivo con comentarios a trav√©s de numerales (#) puede no ser la mejor soluci√≥n para entender qu√© estamos haciendo o para compartirlo con otras personas. Despu√©s de todo, el archivo del c√≥digo no tiene que ser el mismo de la documentaci√≥n. Esto es justamente lo que buscan solucionar los cuadernos de Jupyter.\nLos Jupyter Notebooks # Seg√∫n la documentaci√≥n, los cuadernos de Jupyter son ambientes de computaci√≥n interactiva que le permite al usuario hacer el reporte de alguna computaci√≥n incluyendo c√≥digo, gr√°ficos, ecuaciones, im√°genes, videos, entre otros. En cristiano, esto quiere decir que podemos explicar con detalle cada paso en el trabajo que estemos realizando y hacerlo ameno de leer para otras personas.\nY ahora un dato coctelero. El Proyecto Jupyter (que incluye los cuadernos, JupyterHub y JupyterLab) fue creado por el Colombiano Fernando Perez a partir de sus desarrollos previos en IPython.\nInstalaci√≥n e inicio # La manera m√°s f√°cil de instalar Jupyter es a trav√©s de Anaconda, que es un programa de gesti√≥n de librer√≠as para Python y R. Este incluye una instalaci√≥n de Python y una serie de aplicaciones para el desarrollo de proyectos de ciencia de datos, incluyendo los cuadernos de Jupyter.\nUna vez realizada la instalaci√≥n de Anaconda, podemos abrir un cuaderno de Jupyter de dos maneras. La primera es abrir la la aplicaci√≥n llamada Anaconda Navigator y oprimir el bot√≥n de \u0026ldquo;Launch\u0026rdquo; que acompa√±a el logo de Jupyter Notebook o escribir en la terminal de comandos del computador:\njupyter notebook El flujo de trabajo # Al ejecutar el c√≥digo anterior, se deber√≠a abrir una pantalla en el navegador por defecto (en mi caso es Google Chrome), en el que se nos muestran las carpetas del directorio principal del computador. En la esquina superior derecha, se encuentra un bot√≥n que dice \u0026ldquo;New\u0026rdquo; que nos permitir√° crear un nuevo cuaderno.\nInterfaz de Jupyter\nEl trabajo en Jupyter se desarrolla a trav√©s de celdas. As√≠ como en Excel las celdas pueden contener distintos tipos de datos, en Jupyter las celdas pueden estar en distintos modos: C√≥digo o Markdown. Mientras en el modo c√≥digo se escribir√°n las instrucciones para que Jupyter ejecute, en el modo Markdown se incluir√°n el texto, el formato, las im√°genes o el video de acompa√±amiento, como se muestra en la imagen anterior.\nAhora bien, adem√°s del tipo de contenido que van a tener las celdas, hay dos modos del trabajo en el cuaderno. En el modo de edici√≥n, vamos a poder modificar el contenido de cada celda seg√∫n lo que queramos hacer. En el modo de comandos, vamos a poder navegar entre las celdas, crear nuevas o eliminar existentes, y definir si las celdas van a ser de c√≥digo o de Markdown.\nEntender los tipos de celdas y c√≥mo navegar en el cuaderno son los √∫nicos requerimientos para empezar a escribir cuadernos detallados y f√°ciles de seguir.\nAlgunos atajos de teclado # Si bien la interfaz de Jupyter contiene botones para realizar la mayor√≠a de acciones, despu√©s de trabajar con un par de cuadernos nos daremos cuenta que usar los botones no es la manera m√°s r√°pida para trabajar. Estos son los atajos de teclado que uso m√°s a menudo:\nEnter: Entrar al modo de edici√≥n en al celda seleccionada Esc: Salir del modo de edici√≥n y entrar al modo de comandos A: Insertar celda arriba (por la palabra Above) B: Insertar celda abajo (por la palabra Below) X: Cortar celda seleccionada C: Copiar celda seleccionada V: Pegar celdas copiadas D + D: Eliminar celda seleccionada Y: Cambiar la celda a modo de c√≥digo M: Cambiar la celda a modo Markdown Ctrl + Enter o Cmd + Enter: Ejecutar el contenido de una celda de c√≥digo Jupyter Lab # Jupyter Lab es la \u0026ldquo; nueva generaci√≥n de interfaz de usuario basada en la web del Proyecto Jupyter\u0026rdquo;. A grandes rasgos, es una manera m√°s refinada de interactuar con los cuadernos de Jupyter. Personalmente, prefiero trabajar con Jupyter Lab, dado que su interfaz es m√°s intuitiva, permite interactuar m√°s f√°cilmente con los dem√°s archivos del computador y trabajar con varios cuadernos abiertos a la vez.\nLa buena noticia es que al instalar Anaconda tambi√©n instalamos Jupyter Lab. Similar a los cuadernos tradicionales, para abrir Jupyter Lab podemos usar el Navegador de Anaconda o simplemente escribiendo en la terminal de comandos:\njupyter lab ¬øY se puede utilizar con R? # ¬°Claro que si! De hecho, el nombre Jupyter hace referencia a tres lenguajes de programaci√≥n: Julia, Python y R. Y no s√≥lo se puede trabajar con estos tres lenguajes. Una consulta a la documentaci√≥n sobre los kernels de Jupyter muestra que tambi√©n se encuentran soportados C#, JavaScript, Go, Ruby, PHP, entre otros.\nPara trabajar con alg√∫n lenguaje distinto a Python - que es la opci√≥n por defecto al instalar Anaconda - se debe instalar el kernel correspondiente. En el caso de R, tenemos que instalar el IRKernel desde la terminal de comandos.\nEste procedimiento no funciona desde la terminal de RStudio, es necesario primero abrir R desde la terminal de comandos del computador y ah√≠ si seguir las instrucciones.\nDesde la terminal de R, vamos a escribir la siguiente l√≠nea de c√≥digo para asegurarnos de que tenemos los paquetes necesarios instalados.\ninstall.packages(c(\u0026#39;repr\u0026#39;, \u0026#39;IRdisplay\u0026#39;, \u0026#39;evaluate\u0026#39;, \u0026#39;crayon\u0026#39;, \u0026#39;pbdZMQ\u0026#39;, \u0026#39;devtools\u0026#39;, \u0026#39;uuid\u0026#39;, \u0026#39;digest\u0026#39;)) Posteriormente, vamos a instalar el IRKernel como tal\ndevtools::install_github(\u0026#39;IRkernel/IRkernel\u0026#39;) y luego la haremos visible a Jupyter al ejecutar\nIRkernel::installspec() Y ya est√°. La pr√≥xima vez que abramos Jupyter, podremos seleccionar la opci√≥n para trabajar cuadernos con R, a trav√©s de la instalaci√≥n local con los paquetes que ya tengamos instalados.\nJupyter Lab con R habilitado\nEspero que este tutorial haya servido para motivarlos a usar los cuadernos de Jupyter por primera vez y a acercarse a Python a trav√©s de ellos. ¬°Buena suerte escribiendo c√≥digo!\nLecturas complementarias # Documentaci√≥n sobre la edici√≥n individual de Anaconda. Tutorial sobre el formato Markdown Documentaci√≥n sobre Jupyter Lab ¬øC√≥mo usar Git en conjunto con Jupyter? ","date":"28 de septiembre de 2020","externalUrl":null,"permalink":"/posts/una-introducci%C3%B3n-a-jupyter/","section":"Publicaciones","summary":"Al trabajar en un proyecto que requiere gran cantidad de c√≥digo, llenar el archivo con comentarios a trav√©s de numerales (#) puede no ser la mejor soluci√≥n para entender qu√© estamos haciendo o para compartirlo con otras personas.","title":"Una introducci√≥n a Jupyter","type":"posts"},{"content":"Los tableros o dashboards son herramientas muy √∫tiles para extraer conclusiones de los datos, en ocasiones m√°s convenientes que realizar muchas gr√°ficas en excel para luego incluirlas en una presentaci√≥n de diapositivas. En este art√≠culo se explicar√° c√≥mo hacer un tablero b√°sico de visualizaci√≥n en R y se compartir√° el enlace para un ejemplo con base en la informaci√≥n de covid-19 del Instituto Nacional de Salud de Colombia.\nLos tableros de visualizaci√≥n # Seguramente has escuchado del furor alrededor de Tableau o PoweBI. Al revisar la documentaci√≥n de sus servicios, la promesa de valor que ofrecen estas compa√±√≠as est√° en \u0026ldquo;aprovechar el poder de los datos\u0026rdquo; o \u0026ldquo;eliminar la brecha entre los datos y la toma de decisiones\u0026rdquo;.\nLos tableros de visualizaci√≥n son formas eficientes de ver, y en algunos casos interactuar, con informaci√≥n relevante para un problema determinado. Piensa en la evoluci√≥n de un reporte escrito que se realiza para el jefe de un proyecto, en la que la informaci√≥n m√°s relevante se presenta en un s√≥lo vistazo, es interactiva y, dependiendo de los datos disponibles, en tiempo real.\nSi bien las plataformas mencionadas son muy populares y robustas, no necesariamente son la mejor alternativa en todos los casos. Si quieres hacer una exploraci√≥n de tus datos de manera r√°pida para hacer limpieza o preprocesamiento, o si quieres aprovechar alguna caracter√≠stica especial de una librer√≠a de tu lenguaje de programaci√≥n preferido, existen alternativas que pueden hacer esta tarea m√°s f√°cil y sin recurrir a servicios de terceros.\nShiny y shinydashboard # Para el caso de R, shiny es la librer√≠a por excelencia para realizar tableros de visualizaci√≥n con muy pocas l√≠neas de c√≥digo, desarrollada por RStudio. Por su parte, shinydashboard es un paquete complementario que ofrece un dise√±o con un encabezado, una barra lateral y un cuerpo para el tablero.\nLa estructura m√°s b√°sica de un tablero de visualizaci√≥n hecho con shiny tiene la forma:\nlibrary(shiny) library(shinydashboard) ui \u0026lt;- dashboardPage( dashboardHeader(), dashboardSidebar(), dashboardBody() ) server \u0026lt;- function(input, output) {} Como se puede ver, hay dos partes principales. La interfaz de usuario o ui es el objeto que define c√≥mo ser√° la visualizaci√≥n del tablero y los elementos que estar√°n all√≠ incluidos. Por su parte, el servidor o server contiene todos los c√°lculos y operaciones necesarios para generar los elementos que se van a visualizar.\nHay dos formas de escribir un tablero en scripts de R. La primera es generar un script que se llame app.R e incluir la interfaz y el servidor tal cual como aparecen en el ejemplo. La otra es definirlos en scripts separados y llamarlos ui.R y server.R. En mi opini√≥n, la segunda forma es la m√°s c√≥moda porque no es necesario desplazarse hacia arriba y hacia abajo cada vez que se a√±ade alg√∫n elemento al tablero.\nPara lo que sigue de este art√≠culo, el encabezado del tablero tendr√° √∫nicamente el t√≠tulo del tablero, la barra lateral estar√° deshabilitada y el cuerpo estar√° compuesto por √∫nicamente una fila. Para mayor informaci√≥n sobre esta organizaci√≥n, la documentaci√≥n de shinydashboard hace una explicaci√≥n detallada. Dado lo anterior, la base de la aplicaci√≥n ser√≠a la siguiente:\nui \u0026lt;- dashboardPage( dashboardHeader(title = \u0026#34;Mi nuevo dashboard\u0026#34;), dashboardSidebar(disable = T), dashboardBody( fluidRow(\u0026#34;√önica fila del tablero\u0026#34;) ) ) server \u0026lt;- function(input, output) {} Render y Output # Como se mencion√≥, shiny usa una interacci√≥n entre los objetos del servidor y la interfaz de usuario. Para ello, los tableros de visualizaci√≥n utilizan dos familias de funciones para conectarlos: las funciones render_ en el servidor y _Output en la interfaz de usuario.\nPor ejemplo, digamos que se quiere imprimir el valor de una variable definida en el servidor. No se puede llamar simplemente a la variable como lo har√≠amos en un script ordinario. Por el contrario, se tiene que usar esta familia de funciones de la siguiente manera:\nui \u0026lt;- dashboardPage( dashboardHeader(title = \u0026#34;Mi nuevo dashboard\u0026#34;), dashboardSidebar(disable = T), dashboardBody( fluidRow( textOutput(outputId = \u0026#34;mi_texto\u0026#34;) ) ) ) server \u0026lt;- function(input, output) { x \u0026lt;- 3 output$mi_texto \u0026lt;- renderText({ paste(\u0026#34;El valor de x es: \u0026#34;, x) }) } El resultado del c√≥digo anterior es un tablero as√≠:\nEjemplo 1. Render Text\nTal como lo muestra el ejemplo, el nombre que se le asigna al objeto en el servidor (el nombre que va despu√©s de output$) debe coincidir con el outputId de la funci√≥n en la interfaz de usuario. De esta manera, shiny sabe cu√°l objeto ubicar en el tablero de visualizaci√≥n y en qu√© lugar.\nCajas informativas # De esta misma manera podemos generar cajas informativas que contienen un valor num√©rico y una descripci√≥n de la informaci√≥n que est√° all√≠ contenida. Siguiendo una forma muy similar, el siguiente c√≥digo\nui \u0026lt;- dashboardPage( dashboardHeader(title = \u0026#34;Mi nuevo dashboard\u0026#34;), dashboardSidebar(disable = T), dashboardBody( fluidRow( valueBoxOutput(outputId = \u0026#34;mi_value_box\u0026#34;) ) ) ) server \u0026lt;- function(input, output) { x \u0026lt;- 42 output$mi_value_box \u0026lt;- renderValueBox({ valueBox(x, subtitle = \u0026#34;El sentido de la vida, el universo y todo lo dem√°s\u0026#34; ) }) } genera el siguiente tablero\nEjemplo 2. Render Value Box\nGr√°ficos # Para el caso de los gr√°ficos, la sintaxis es muy similar. Se crea la gr√°fica desde el servidor usando renderPlot con una gr√°fica de ggplot2 y luego se carga en el tablero usando plotOutput.\nui \u0026lt;- dashboardPage( dashboardHeader(title = \u0026#34;Mi nuevo dashboard\u0026#34;), dashboardSidebar(disable = T), dashboardBody( fluidRow( plotOutput(outputId = \u0026#34;mi_grafico\u0026#34;) ) ) ) server \u0026lt;- function(input, output) { output$mi_grafico \u0026lt;- renderPlot({ ggplot(mtcars, aes(x = mpg, y = hp)) + geom_point() }) } Ejemplo 3. Render Plot\nTablero de covid-19 # Usando este flujo de trabajo sencillo de shiny y shinydashboard puedes empezar a experimentar con tus propios tableros de visualizaci√≥n sobre alg√∫n tema de tu inter√©s. En mi caso, quise hacer un tablero b√°sico de visualizaci√≥n sobre los datos de covid-19 en Colombia, publicados por el Instituto Nacional de Salud y que se pueden ver en el tablero de esa entidad.\nEn este ejercicio us√© una distribuci√≥n de los elementos un poco m√°s compleja, usando tab boxes y varias columnas por cada fila. Adem√°s, inclu√≠ cajas informativas, gr√°ficos y un mapa interactivo con el paquete leaflet. Para ver y utilizar este tablero, puedes encontrar el c√≥digo fuente y las instrucciones en el siguiente repositorio en Github.\nLecturas complementarias # Mastering Shiny Documentaci√≠n de shiny Documentaci√≥n de shinydashboard ","date":"17 de agosto de 2020","externalUrl":null,"permalink":"/posts/como-hacer-un-dashboard-en-r/","section":"Publicaciones","summary":"Los tableros o dashboards son herramientas muy √∫tiles para extraer conclusiones de los datos, en ocasiones m√°s convenientes que realizar muchas gr√°ficas en excel para luego incluirlas en una presentaci√≥n de diapositivas.","title":"¬øC√≥mo hacer un dashboard en R?","type":"posts"},{"content":"","date":"1 de agosto de 2020","externalUrl":"https://github.com/camartinezbu/covid-dashboard-colombia","permalink":"/portfolio/dashboard_covid_2020/","section":"Portafolio","summary":"Un tablero de visualizaci√≥n hecho en {shiny} y {shinydashboard} con base en el tablero del Instituto Nacional de Salud en Colombia.","title":"Dashboard de Covid-19","type":"portfolio"},{"content":"","date":"1 de enero de 0001","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","date":"1 de enero de 0001","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":" Me llamo Camilo Mart√≠nez Burgos üë®‚Äçüíª Soy un apasionado por la ciencia de datos y la programaci√≥n.\nConsidero que los datos son clave para entender el mundo. Quiero que m√°s personas y organizaciones puedan aplicar las herramientas de an√°lisis que maneja esta disciplina para mejorar el bienestar de todos.\nEstudi√© mi pregrado en econom√≠a en la Universidad del Rosario y tengo una Maestr√≠a en Ciencias Econ√≥micas de la Universidad Nacional de Colombia. Tambi√©n tengo estudios complementarios en Desaf√≠os Globales e Innovaci√≥n en Pol√≠ticas P√∫blicas de Florida International University y en Liderazgo e Innovaci√≥n de MIT Professional Education.\nAdicionalmente, tengo conocimientos de herramientas como R, Python, Git y Github, PostgreSQL, Docker, entre otras.\nCuento con m√°s de 6 a√±os de experiencia trabajando en asuntos de an√°lisis de pol√≠ticas en Colombia. Me he desempe√±ado como Asesor Econ√≥mico en el Consejo Gremial Nacional y como Analista de Ciudades Inteligentes y Seguridad Urbana en ProBogot√° Regi√≥n y actualmente me desempe√±o como Consultor de Innovaci√≥n, Anal√≠tica de Datos y Pol√≠tica P√∫blica.\nSi quieres conocer mi presencia en otras redes, puedes encontrarme en:\nGithub LinkedIn Mastodon X/Twitter ","date":"1 de enero de 0001","externalUrl":null,"permalink":"/about/","section":"camartinezbu.com","summary":"Me llamo Camilo Mart√≠nez Burgos üë®‚Äçüíª Soy un apasionado por la ciencia de datos y la programaci√≥n.","title":"Sobre m√≠","type":"page"}]